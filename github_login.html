<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="js/resources/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="js/resources/jQuery.unserializeForm.min.js" type="text/javascript"></script>
</head>
<body>
This window will close itself in a short moment.
<script type='text/javascript'>
    if (!window.opener || !window.opener.Reposio || !window.opener.Reposio.controller || !window.opener.Reposio.controller.check_login) {
        alert('A problem prevented us to finish authentication. Please close the current window/tab and retry.');
        return;
    }
    var entries = unescape(location.search.substring(1)).split(/&/),
        params = { provider: 'github' },
        i, parts;

    for (i = 0; i < entries.length; i++) {
        parts = entries[i].split('=');
        if (parts.length === 2) {
            params[parts[0]] = parts[1];
        }
    }

    window.opener.Reposio.controller.check_login(params);

    window.close();
</script>
</body>
