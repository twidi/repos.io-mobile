var Reposio={};$(document).ready((function App__on_ready(){Reposio.controller=new Reposio.Controller();Reposio.controller.init()}));(function(b){var d=(function g(){this.providers={};for(var l in b.Providers){this.providers[l]=new b.Providers[l](this)}for(var k in b.Models){this[k]=null}this.display=new b.Display(this)});d.prototype.init=(function c(){this.display.init()});d.prototype.set_current_object=(function i(l,k){var m=(this[l]===null||this[l].id!=k);if(m){this[l]=b.Models[l].get(k,this);this.display["change_"+l]()}this.display["update_"+l+"_navbar"](this[l]);return m});d.prototype.fetch_full_error=(function a(m,o,p,l,k,q,n){if(this.display.confirm_new_fech("full","this page",m,n)){o.fetch_full(p,l,k,q,n)}});d.prototype.fetch_more_error=(function f(m,o,p,l,k,n){if(this.display.confirm_new_fech("more","more",m,n)){o.fetch_more(p,l,k,n)}});d.prototype.fetch_all_error=(function j(n,p,q,l,m,k,o){if(this.display.confirm_new_fech("all","all",n,o)){p.fetch_all(q,l,m,k,o)}});d.prototype.make_page_hash=(function e(n,l,k){var m="#"+l.id+"!"+n.$class.model_name+"="+n.ref.replace("/","!")+"@"+n.provider.name;return m});d.prototype.toggle_favorite=(function h(q,o,n){var p=this.make_page_hash(q,o,n),m=$.jStorage.get("favorites",[]),l=m.length,k;m=_.reject(m,function(r){return r.hash==p});if(l==m.length){k={hash:p,model:q.$class.model_name,ref:q.ref,provider:q.provider.name};if(o.title!="Details"){k.title=o.title}if(n&&_.size(n)>0){k.options=n}switch(q.$class.model_name){case"account":if(q.details&&q.details.avatar_url){k.avatar_url=q.details.avatar_url}break;case"repository":if(q.details.user&&q.details.user.avatar_url){k.avatar_url=q.details.user.avatar_url}if(q.details.is_fork){k.is_fork=true}if(q.details.description){k.description=q.details.description}break}m.push(k)}$.jStorage.set("favorites",m);$.jStorage.set("favorites-managed",true);this.display.need_favorites_redraw=true});b.Controller=d})(Reposio);(function(v){var h=(function f(B){this.controller=B});h.prototype.init=(function A(){var I=this;this.need_favorites_redraw=true;this.templates_container=$("#templates");for(var G in this.pages_list){this.construct_pages(G,this.pages_list[G])}this.nodes={home:{favorites:$("#home-favorites")}};$.mobile.initializePage();I.init_events();var F=$("div[data-role=page]:not(.ui-page)"),E=$("#start-screen"),D=$("#progress-loader"),H=F.length,C=(function B(J,M){if(M<J.length){var L=Math.max(6,Math.min(Math.round(100*(M+1)/H),100));D.css({width:L+"%"});setTimeout((function K(){var O=J.eq(M);O.page();C(J,M+1)}),10);if(M==2){$("html").removeClass("loading")}}else{var N=$.jStorage.get("start_screen_seen");D.parent().html("Enjoy !");E.fadeOut(N?"fast":1200,function(){E.remove()});$.jStorage.set("start_screen_seen",true)}});C(F,0)});h.prototype.format_date=(function w(F,G,B,C){if(!F){return""}var E=F.split("T");if(G){var D=E[1].slice(0,B?8:5);return(C?"":E[0]+" ")+D}else{return E[0]}});h.prototype.escape_html=(function d(B){if(!B){return""}return B.indexOf("<")===-1?B:$("<div/>").text(B).html()});h.prototype.nodes={};h.prototype.templates={};h.prototype.pages_list={};h.prototype.pages={};h.prototype.construct_pages=(function m(B,H){for(var M=0;M<H.length;M++){var D=H[M];D.name=D.id;D.id=B+"_"+D.name;D.type=B;if(!D.title){D.title=D.name[0].toUpperCase()+D.name.slice(1)}if(!D.method){D.method=D.name}}var Q="",C=(H.length>4);for(var R=0;R<H.length;R++){var P=H[R],S="",K=[];if(C){K.push(H[0]);K.push(H[1]);K.push(H[(R<2)?2:R])}else{K=H}S='<div data-role="page" id="'+P.id+'">';S+='<div data-role="header" data-id="'+B+'_pages" data-position="fixed" data-theme="a">';S+="<h3></h3>";S+='<a href="#main_menu_'+P.id+'" id="main_menu_'+P.id+'_opener" data-icon="gear" data-iconpos="notext" data-rel="popup" class="ui-btn-right">Options</a>';S+='<div data-role="navbar">';S+="<ul"+(C?' class="extended"':"")+">";for(var O=0;O<K.length;O++){var J=K[O];S+="<li>";S+='<a href="#'+J.id+'"'+(O<R?' data-direction="reverse"':"")+' class="'+(J.name==P.name?"ui-btn-active ui-state-persist ":"")+J.id+'-link">';S+=J.title;if(J.count){S+='<span class="'+J.id+'-count ui-li-count ui-btn-up-c ui-btn-corner-all">?</span>'}S+="</a>";S+="</li>"}if(C){S+='<li><a data-rel="popup" href="#menu_'+P.id+'">...</a>'}S+="</ul>";S+="</div>";S+="</div>";S+='<div data-role="content"></div>';if(C){S+='<div data-role="popup" id="menu_'+P.id+'" data-theme="a" class="nav-menu">';S+='<ul data-inset="true" data-theme="a">';for(var N=0;N<H.length;N++){var G=H[N];S+="<li>";S+='<a href="#'+G.id+'" class="'+(G.name==P.name?"ui-btn-active ":"")+G.id+'-link">';S+=G.title;if(G.count){S+='<span class="'+G.id+'-count ui-li-count ui-btn-up-c ui-btn-corner-all">?</span>'}S+="</a>";S+="</li>"}S+="</ul>";S+="</div>"}S+='<div data-role="popup" id="main_menu_'+P.id+'" data-theme="a" class="main-nav-menu">';S+="</div>";S+="</div>";Q+=S}$("body").append(Q);for(var L=0;L<H.length;L++){var I=H[L],F=$("#"+I.id),E=$("#main_menu_"+I.id),T=this.get_template(I.id,true,true);I.nodes={links:$("a."+I.id+"-link"),page:F,header:F.children(":jqmData(role=header)").children("h3"),content:F.children(":jqmData(role=content)"),main_menu:E,refresh_control:$(),go_button:$(),favorite_control:$()};I.node=I.nodes.page;if(T){I.nodes.content.prepend(T.children)}I.view=v.View.get(I,this);this.pages[I.id]=I}});h.prototype.update_go_button=(function n(D,B){var C=D.nodes.go_button;if(C.length){C.find(".provider").text(this.controller[D.type].provider.name);C.toggleClass("ui-disabled",!B);C.attr("href",B||"")}});h.prototype.init_events=(function z(){var J=this;$(document).on("pagebeforechange",(function E(Q,P){if(typeof P.toPage!=="string"){return}if(P.options.dataUrl){P.options.dataUrl=P.options.dataUrl.replace("?","!")}P.options.allowSamePageTransition=true;if(P.toPage==$.mobile.path.stripQueryParams(location.href.replace("!","?"))){P.options.transition="none"}J.on_before_page_change(Q,P)}));$(document).on("pagechange",(function B(T,S){J.update_fullscreen_control();if($.mobile.activePage&&$.mobile.activePage.hasClass("current_page")&&!$.mobile.activePage.hasClass("page_loaded")){$.mobile.loading("show")}try{var R=J.pages[S.toPage.data("url")],Q;J.update_favorite_control(R);Q=J["get_real_"+R.type+"_page"](R.name,J.controller[R.type]);R.nodes.main_menu.data("go-button-url",Q);J.update_go_button(R,Q)}catch(P){}}));$(".nav-menu").on("popupafterclose",(function N(){var S=$(this),R=S.find("a.ui-btn-active"),P,Q;if(R.length){Q=S.parents(".ui-page");if(Q.length){P=R.attr("href");Q.find('.ui-header .ui-navbar a[href="'+P+'"]').addClass("ui-btn-active")}}}));$(".nav-menu").on("popupbeforeposition",(function G(){var P=$(this).children("ul");if(!P.hasClass("ui-listview")){P.listview()}}));$(".main-nav-menu").on("popupbeforeposition",(function D(){var P=$(this),R=$("#"+this.id+"_opener");R.addClass("popup-opened");if(!P.children().length){var Q=J.get_template("main-nav-menu");P.append(Q.cloneNode(true));P.trigger("create");var S=J.pages[$.mobile.activePage.data("url")];S.nodes.refresh_control=S.nodes.main_menu.find(".refresh-control");S.nodes.go_button=S.nodes.main_menu.find(".go-button");J.update_go_button(S,S.nodes.main_menu.data("go-button-url"));S.nodes.favorite_control=S.nodes.main_menu.find(".favorite-control");J.update_favorite_control(S)}}));$(".main-nav-menu").on("popupafterclose",(function H(){var P=$("#"+this.id+"_opener");P.removeClass("popup-opened")}));$(document).on("click",".events-list a.collapsible-trigger",(function F(T){T.preventDefault();T.stopPropagation();var S=$(this),P=S.parents("li"),U,R,V,Q;if(!S.hasClass("filled")){S.addClass("filled");V=P[0].event_data;if(V.provider["more_"+V.event.type]){Q=V.provider["more_"+V.event.type](V.event,V.source);P.append(Q);R=P.children(":last");R.collapsible();J.render_widgets(R);S.data("collapsible",R);setTimeout(function(){R.trigger("expand")},100)}}else{U=P.hasClass("more-opened");R=S.data("collapsible");if(R){R.trigger(U?"collapse":"expand")}}P.toggleClass("more-opened",!U);return false}));$(document).on("click",".events-list a.fetch-desc-trigger",(function I(W){W.preventDefault();W.stopPropagation();var Y=$(this),U=Y.data("repository"),X=v.Models.repository.get(U,J.controller),R=(function T(ab){$('p.ui-li-desc[data-fetching-repository="'+U+'"]').each((function ac(){var ad=$(this);ad.children().remove();ad.append(ab)}))}),Z=(function Q(){var ab=$(this),ac=ab.parent();ac.children().remove();ac.append("<em>loading...</em>").attr("data-fetching-repository",U)}),aa=(function V(ac){var ab;X.update_data("details",ac);if(X.details.description){ab="<strong>"+J.escape_html(X.details.description)+" </strong>"}else{ab="<em>no description</em>"}R(ab)}),S=(function P(ab){R("<em>Loading failed! ("+J.get_error_text(ab)+') </em><a href="#" class="fetch-desc-trigger" data-repository="'+X.id+'">Retry ?</a>')});$('a.fetch-desc-trigger[data-repository="'+U+'"]').each(Z);if(X.details_fetched){aa()}else{X.fetch("details",aa,S,null,"fail_if_404")}}));$(document).on("click","li.with-extension",(function L(P){P.preventDefault();P.stopPropagation();$(this).toggleClass("extended");return false}));$(document).on("click",".refresh-control",(function K(S){S.preventDefault();S.stopPropagation();var R=J.pages[$.mobile.activePage.data("url")],Q=R.view.accept_options?R.view.get_options_from_form():null;R.nodes.main_menu.popup("close");setTimeout((function P(){$.mobile.loading("show");J.ask_for_page(R.id,J.controller[R.type].id,Q,"force")}),200)}));$(document).on("change",".favorite-control",(function C(R){R.preventDefault();R.stopPropagation();var Q=J.pages[$.mobile.activePage.data("url")],P=Q.view.accept_options?Q.view.get_options_from_form():null;Q.nodes.main_menu.popup("close");J.controller.toggle_favorite(J.controller[Q.type],Q,P)}));$(window).on("scrollstop",J.load_visible_images);$(window).on("resize",J.load_visible_images);$.jStorage.listenKeyChange("favorites",function(P,Q){J.need_favorites_redraw=true;if($.mobile.activePage.data("url")=="home"){J.refresh_home_favorites()}});if(screenfull.enabled){$(document).on("change",".fullscreen-control",(function O(P){$(this).parents(".main-nav-menu").popup("close");screenfull.toggle()}));screenfull.onchange=J.update_fullscreen_control}else{var M=$(".fullscreen-control");M.parents(".ui-checkbox").add(M.parents("label")).remove()}});h.prototype.load_visible_images=(function o(){var B,D=$("img[data-original]:in-viewport:visible");for(var C=0;C<D.length;C++){B=D[C];B.src=B.getAttribute("data-original");B.removeAttribute("data-original")}});h.prototype.update_fullscreen_control=(function u(){$(".fullscreen-control").attr("checked",screenfull.isFullscreen).each(function(){try{$(this).checkboxradio("refresh")}catch(B){}})});h.prototype.update_favorite_control=(function l(D){var E=this.controller.make_page_hash(this.controller[D.type],D,D.view.accept_options?D.view.get_options_from_form():null),B=$.jStorage.get("favorites",[]),C=_.find(B,function(F){return F.hash==E});D.nodes.favorite_control.attr("checked",!!C).checkboxradio("refresh")});h.prototype.on_before_page_change=(function r(F,E){var C=$.mobile.path.parseUrl(E.toPage),B,D;if(C.hash&&E.options){B=C.hash.slice(1);if(this.pages[B]){D=this.pages[B];if(E.options.pageData&&E.options.pageData[D.type]){$.mobile.loading("show");this.ask_for_page(D.id,E.options.pageData[D.type],_.omit(E.options.pageData,D.type));return}}}if(D||!$(C.hash).length){$.mobile.changePage($("#home"));F.preventDefault()}if(C.hash=="#home"){this.refresh_home_favorites()}});h.prototype.is_page_for=(function k(C,D,B){var E=C.node.data("current-for");if(!E||E!=D.id){return false}if(C.view.accept_options&&C.node.data("current-options")!=$.param(B)){return false}return true});h.prototype.ask_for_page=(function b(J,H,I,C){H=H.replace(":","/");var F=this,G=this.pages[J],D=this.controller.set_current_object(G.type,H),E=this.controller[G.type],K=G.view.accept_options?G.view.manage_options(I):{};$(".current_page, .page_loaded").removeClass("current_page page_loaded");G.node.addClass("current_page");G.node.data("title",G.nodes.header.text());if(!C&&this.is_page_for(G,E,K)){this.post_render_page(G)}else{G.nodes.refresh_control.addClass("ui-disabled");G.view.reset(E);if(G.view.accept_options){G.node.data("current-options",$.param(K))}G.node.data("current-for",E.id);E.fetch_full(G.method,(function B(){F.render_page(G,E,K,C)}),K,C)}});h.prototype.ask_for_more=(function e(E){var G=this,F=this.controller[E.type],C=E.view.options;F.fetch_more(E.method,(function B(H){if(!G.is_page_for(E,F,C)){return}E.view.complete(F,H);E.view.update_load_buttons(F);if(E.node.hasClass("current_page")){$.mobile.loading("hide")}}),C,(function D(){E.view.enable_load_buttons()}))});h.prototype.ask_for_all=(function g(F){var H=this,G=this.controller[F.type],D=F.view.options;G.fetch_all(F.method,(function C(I){if(!H.is_page_for(F,G,D)){return}F.view.complete(G,I)}),(function B(){if(!H.is_page_for(F,G,D)){return}if(F.node.hasClass("current_page")){F.view.hide_load_buttons();$.mobile.loading("hide")}}),D,(function E(){F.view.enable_load_buttons()}))});h.prototype.render_page=(function x(D,E,B,C){if(!this.is_page_for(D,E,B)){return}D.view.update(E,C);if(D.node.hasClass("current_page")){this["update_"+D.type+"_navbar"](E);this.post_render_page(D)}});h.prototype.post_render_page=(function y(B){$.mobile.loading("hide");B.node.addClass("page_loaded");B.nodes.refresh_control.removeClass("ui-disabled ui-btn-active")});h.prototype.render_widgets=(function c(B){B.find(":jqmData(role=listview)").listview();B.find(":jqmData(role=collapsible-set)").collapsibleset();B.find(":jqmData(role=collapsible)").collapsible();B.find(":jqmData(role=button)").button();B.find(":jqmData(role=table)").table()});h.prototype.create_events_list_items=(function q(G){var F=this.get_template("event-list-day"),C=this.get_template("event-list-item"),D=[],H=null,B,I;for(var E=0;E<G.length;E++){I=G[E];if(I.day!=H){B=F.cloneNode(true);B.innerHTML=I.day;H=I.day;D.push(B)}B=C.cloneNode(true);B.innerHTML=I.html;B.event_data={event:I.event,source:I.source,provider:I.provider};D.push(B)}return D});h.prototype.get_error_text=(function t(B){var C="";if(B){if(B.statusText){C=B.statusText}if(B.status){if(B.statusText){C+=" - "}C+=B.status}}if(!C){C="undefined error"}return C});h.prototype.confirm_new_fech=(function p(F,E,D,C){$.mobile.loading("hide");var B=confirm("Unable to fetch "+E+" ("+this.get_error_text(D)+"), retry ?");if(B){$.mobile.loading("show")}else{if(C){C()}else{switch(F){case"full":history.go(-1);break;case"more":case"all":}}}return B});h.prototype.get_template=(function s(D,C,F){var B,E;if(!this.templates[D]){B=this.templates_container.find("[data-template-for="+D+"]")[0];E=document.createElement("div");E.innerHTML=B.childNodes[0].nodeValue;if(!F){E=E.removeChild(E.children[0])}B.parentNode.removeChild(B);this.templates[D]=E}E=this.templates[D];if(C){delete this.templates[D]}return E});h.prototype.clear_listview=(function i(C,D,B){C.children(":not(.ui-li-divider)").remove();if(D){C.append('<li class="failover">'+D+"</li>")}if(B){C.listview("refresh")}});v.Display=h;h.prototype.get_favorites_items=(function j(){var C=$.jStorage.get("favorites",[]),D=[],E,B,F,G;if(!C.length){C=[{hash:"#account_home!account=twidi@github",model:"account",ref:"twidi",avatar_url:"https://secure.gravatar.com/avatar/4929cd99d0f54b7fa03081f9ab8bb0d4",provider:"github"},{hash:"#repository_home!repository=twidi:repos.io-mobile@github",model:"repository",ref:"twidi/repos.io-mobile",avatar_url:"https://secure.gravatar.com/avatar/4929cd99d0f54b7fa03081f9ab8bb0d4",description:"A mobile application for Github",provider:"github"}];if(!$.jStorage.get("favorites-managed")){$.jStorage.set("favorites",C)}}for(E=0;E<C.length;E++){B=C[E];G={name:B.provider};switch(B.model){case"account":F={login:B.ref};if(B.title){F.login+=" - "+B.title}if(B.avatar_url){F.avatar_url=B.avatar_url}D.push(this.create_account_list_item(F,G,B.hash));break;case"repository":F={full_name:B.ref,is_fork:B.is_fork,description:B.description};if(B.title){F.full_name+=" - "+B.title}if(B.avatar_url){F.user={avatar_url:B.avatar_url}}D.push(this.create_repository_list_item(F,G,B.hash));break}}return D});h.prototype.refresh_home_favorites=(function a(){if(!this.need_favorites_redraw){return}var C=this,B=this.get_favorites_items();this.clear_listview(this.nodes.home.favorites);this.nodes.home.favorites.append(B);this.need_favorites_redraw=false;setTimeout(C.load_visible_images,500);setTimeout(C.load_visible_images,1000);setTimeout(C.load_visible_images,2000)})})(Reposio);(function(f){f.Display.prototype.pages_list.account=[{id:"home",title:"Details",method:"details"},{id:"repositories",title:"Repos",count:true},{id:"activity",method:"own_events"},{id:"members",method:"org_members"},{id:"stars"},{id:"following",count:true},{id:"followers",count:true},{id:"events",method:"received_events"}];f.Display.prototype.change_account=(function a(){$(".account_repositories-count").hide();$(".account_followers-count").hide();$(".account_following-count").hide();for(var k=0;k<this.pages_list.account.length;k++){var l=this.pages_list.account[k];for(var h=0;h<l.nodes.links.length;h++){l.nodes.links[h].href="#"+l.id+"!account="+this.controller.account.id}l.nodes.header.html(this.controller.account.username+" - "+l.title);l.node.removeData("current-for")}});f.Display.prototype.account_link=(function c(k,j,i){var h='<a class="account-link" href="#account_home!account='+k+"@"+j+'">';h+=k;if(i){h+='<img class="avatar-small avatar-small-after" src="'+i+'" />'}h+="</a>";return h});f.Display.prototype.create_account_list_item=(function g(l,n,i){var p=this.get_template("account-list-item"),q=p.cloneNode(true),o=q.getElementsByTagName("a")[0],h=o.children,k=h[0],m=h[1],j=[];o.href=i||"#account_home!account="+l.login+"@"+n.name;m.innerHTML=l.login;k.setAttribute("data-original",l.avatar_url);if(l.html_prepend){$(o).prepend(l.html_prepend)}return q});f.Display.prototype.create_accounts_list_items=(function d(k,l){var h=[];for(var j=0;j<k.length;j++){h.push(this.create_account_list_item(k[j],l))}return h});f.Display.prototype.update_account_navbar=(function e(i){var h=i.is_organization();$(".go-button").find(".provider").html(i.provider.name);$(".account_members-link").closest("li").toggle(h);$(".account_repositories-count").html(i.details?i.details.repos_count:"?").show();$(".account_followers-count").html(i.details?i.details.followers_count:"?").show();$(".account_following-count").html(i.details?i.details.following_count:"?").show()});f.Display.prototype.get_real_account_page=(function b(h,j){var i=j.is_organization();switch(h){case"home":return"https://github.com/"+j.username;case"repositories":return"https://github.com/"+j.username+"?tab=repositories";case"activity":return i?null:"https://github.com/"+j.username+"?tab=activity";case"followers":return"https://github.com/"+j.username+"/followers";case"stars":case"following":return"https://github.com/"+j.username+"/following";case"members":return i?"https://github.com/"+j.username+"?tab=members":null}return null})})(Reposio);(function(e){e.Display.prototype.pages_list.repository=[{id:"home",title:"Details",method:"details"},{id:"activity"},{id:"contributors"},{id:"forks",count:true},{id:"stars",count:true}];e.Display.prototype.change_repository=(function b(){$(".repository_forks-count").hide();$(".repository_stars-count").hide();for(var k=0;k<this.pages_list.repository.length;k++){var l=this.pages_list.repository[k];for(var h=0;h<l.nodes.links.length;h++){l.nodes.links[h].href="#"+l.id+"!repository="+this.controller.repository.id.replace("/",":")}l.nodes.header.html(this.controller.repository.path+" - "+l.title);l.node.removeData("current-for")}});e.Display.prototype.repository_link=(function a(h,i){var j=h.replace("/",":");return'<a class="repo-link" href="#repository_home!repository='+j+"@"+i+'">'+h+"</a>"});e.Display.prototype.create_repository_list_item=(function d(o,p,i){var r=this.get_template("repository-list-item"),u=o.full_name||o.name,s=r.cloneNode(true),q=s.getElementsByTagName("a")[0],h=q.children,j=h[1].children,m=j[0],k=j[1],n=h[2],t=h[3],l=[];q.href=i||"#repository_home!repository="+u.replace("/",":")+"@"+p.name,k.innerHTML=u;if(o.user&&o.user.avatar_url){m.setAttribute("data-original",o.user.avatar_url)}if(o.description){n.innerHTML=o.description}else{l.push("no-desc")}if(!o.is_fork){l.push("no-fork")}if(o.pushed_at){t.getElementsByTagName("span")[0].innerHTML=this.format_date(o.pushed_at,true)}else{l.push("no-date")}if(l.length){s.className+=" "+l.join(" ")}return s});e.Display.prototype.create_repositories_list_items=(function g(k,l){var h=[];for(var j=0;j<k.length;j++){h.push(this.create_repository_list_item(k[j],l))}return h});e.Display.prototype.update_repository_navbar=(function c(h){$(".go-button").find(".provider").html(h.provider.name);$(".repository_forks-count").html(h.details?h.details.forks_count:"?").show();$(".repository_stars-count").html(h.details?h.details.watchers_count:"?").show()});e.Display.prototype.get_real_repository_page=(function f(h,i){switch(h){case"home":case"activity":return"https://github.com/"+i.path;case"contributors":return"https://github.com/"+i.path+"/contributors";case"forks":return"https://github.com/"+i.path+"/network";case"stars":return"https://github.com/"+i.path+"/stargazers"}return null})})(Reposio);(function(k){k.Models={};k.Models.base=Class.$extend({__classvars__:{model_name:null,fields:{},cache:{},default_params:{},fetchable_params:{},get:(function p(t,s){if(!this.cache[this.model_name]){this.cache[this.model_name]={}}if(!this.cache[this.model_name][t]){this.cache[this.model_name][t]=new this(t,s)}return this.cache[this.model_name][t]}),save_many_from_events:(function q(v,z,s){var x,y,w,t;for(var u=0;u<v.length;u++){x=v[u];if(x.actor&&x.actor.login&&x.actor.avatar_url){y=k.Models.account.get(x.actor.login+"@"+z.name,s);y.update_data("details",x.actor)}if(x.repository&&x.repository.full_name&&(x.repository.description||x.repository.pushed_at)){if(x.repository.full_name.indexOf("/")!=-1){w=k.Models.repository.get(x.repository.full_name+"@"+z.name,s);w.update_data("details",x.repository)}}if(x.type=="ForkEvent"&&x.forkee){w=k.Models.repository.get(x.forkee.full_name+"@"+z.name,s);w.update_data("details",x.forkee)}}})},__init__:(function b(v,s){var u=v.split("@");this.id=v;this.ref=u[0];this.provider=s.providers[u[1]];this.controller=s;this.list_page_status={};this.details_fetched=false;for(var t in this.__classvars__.fields){if(this.__classvars__.fields[t] instanceof Array){this[t]={};this.list_page_status[t]={__global__:{all:false}}}else{this[t]=null}}}),is_type_list:(function e(s){return(this.$class.fields[s] instanceof Array)}),is_type_string:(function h(s){return(this.$class.fields[s]==="")}),update_data:(function r(s,t,u){if(this.is_type_list(s)){this[s][u||""]=t}else{if(this.is_type_string(s)){this[s]=t}else{if(this[s]===null){this[s]={}}this[s]=$.extend(this[s],t)}}}),get_list:(function l(x,u,y){var w=this.filter_fetchable_params(x,u);if(this["sort_and_filter_"+x]){var t=this.list_page_status[x].__global__.all;if(!t){var v=this.filter_unfetchable_params(x,u);if(!_.isEmpty(v)){y=y||this[x][$.param(w)];t=true}}if(t){var s=this["sort_and_filter_"+x](u,y);if(s!==null){return s}}}return y||this[x][$.param(w)]}),filter_fetchable_params:(function m(s,t){t=t||{};if(this.$class.fetchable_params[s]){return _.pick(t,this.$class.fetchable_params[s])}else{return t}}),filter_unfetchable_params:(function o(s,t){t=t||{};if(this.$class.fetchable_params[s]){return _.omit(t,this.$class.fetchable_params[s])}else{return{}}}),fetch:(function j(u,x,t,w,v){var s=this;w=w||{};if(this.$class.default_params[u]){w=$.extend({},this.$class.default_params[u],w);delete w.max_pages}s.provider["get_"+s.$class.model_name+"_"+u](s.ref,function(y,z){if(y&&y.status==404&&!v){z=s.$class.fields[u];y=null}if(y){if(t){t(y)}}else{if(x){x(z)}}},w)}),fetched:(function c(s,t){if(this.is_type_list(s)){if(this.list_page_status[s].__global__.all){return true}return(typeof this[s][t]!="undefined")}else{if(s=="details"){return this.details_fetched}else{return(this[s]!==null)}}}),fetch_full:(function i(u,y,x,v,t){var s=this,w;x=this.filter_fetchable_params(u,x);w=$.param(x);if(u!="details"&&!s.fetched("details","")){s.fetch_full("details",function(){s.fetch_full(u,y,x,v)});return}if(v&&this.list_page_status[u]){s.list_page_status[u].__global__={all:false}}if(v||!s.fetched(u,w)){s.fetch(u,function(z){if(u=="details"){s.details_fetched=true}s.update_data(u,z,w);if(s.is_type_list(u)){s.update_list_page_status(u,x,1,z?z.length||0:0)}y()},function(z){s.controller.fetch_full_error(z,s,u,y,x,v,t)},x,"fail_if_404")}else{y()}}),update_list_page_status:(function f(y,v,z,t){var w=this.$class.default_params[y]||{},A=$.param(v),s=w.max_pages||null,u=w.per_page||null,x=true;if(!t){x=false}else{if(s&&z>=s){x=false}else{if(u&&t<u){x=false}}}this.list_page_status[y][A]={last_page:z,maybe_more:x};if(x){this.list_page_status[y].__global__={all:false}}else{this.list_page_status[y].__global__={all:true,params:v,str_params:A};if(this["manage_global_for_"+y]){this["manage_global_for_"+y]()}}}),_fetch_more:(function a(u,y,x,t){var s=this,w,v;y=this.filter_fetchable_params(u,y);w=$.param(y);v=$.extend({},y,{page:s.list_page_status[u][w].last_page+1});s.fetch(u,function(z){s[u][w]=s[u][w].concat(z);s.update_list_page_status(u,y,v.page,z?z.length||0:0);x(z)},t,v)}),fetch_more:(function g(u,w,v,t){var s=this;this.list_page_status[u].__global__={all:false};this._fetch_more(u,v,w,function(x){s.controller.fetch_more_error(x,s,u,w,v,t)})}),fetch_all:(function d(y,t,z,w,A){var x=this,B;w=this.filter_fetchable_params(y,w);B=$.param(w);x.list_page_status[y].__global__={all:false};var v=function(C){t(C);if(x.list_page_status[y][B].maybe_more){s()}else{z()}};var u=function(C){x.controller.fetch_all_error(C,x,y,t,z,w,A)};var s=function(){x._fetch_more(y,w,v,u)};s()}),sort_and_filter_events:(function n(t,u){var v=t.mode==="display",s,w;if(!t.type){return v?u:[]}s=v?_.filter:_.reject;w=t.type.split(",");return s(u,function(x){return(w.indexOf(x.type)!==-1)})})})})(Reposio);(function(g){g.Models.account=g.Models.base.$extend({__classvars__:{model_name:"account",fields:{details:{},repositories:[],stars:[],own_events:[],received_events:[],followers:[],following:[],org_members:[],orgs:[]},default_params:{repositories:{per_page:50},stars:{per_page:50},own_events:{per_page:30,max_pages:10},received_events:{per_page:30,max_pages:10},followers:{per_page:50},following:{per_page:50},org_members:{per_page:50}},fetchable_params:{repositories:["direction","sort","type"],stars:["direction","sort"],own_events:[],received_events:[]},sort_and_filter_helpers:{repositories:{filter_type:(function m(q){return(q.user.login==this.username)}),filter_type_method:{member:_.reject,owner:_.filter},filter_forks:(function f(q){return q.is_fork}),filter_forks_method:{no:_.reject,yes:_.filter},filter_language:(function l(q){return(q.language&&q.language==this)}),sort_field:{created:"created_at",pushed:"pushed_at",updated:"updated_at",full_name:"full_name"}},stars:{sort_field:{created:"starred_order",updated:"pushed_at"},filter_forks:(function j(q){return q.is_fork}),filter_forks_method:{no:_.reject,yes:_.filter},filter_language:(function d(q){return(q.language&&q.language==this)})}},save_many:(function c(s,u,q){var t;for(var r=0;r<s.length;r++){t=g.Models.account.get(s[r].login+"@"+u.name,q);t.update_data("details",s[r])}})},__init__:(function e(r,q){this.$super(r,q);this.username=this.ref}),update_data:(function i(q,r,s){this.$super(q,r,s);switch(q){case"repositories":case"stars":g.Models.repository.save_many(r,this.provider,this.controller);break;case"followers":case"following":case"org_members":g.Models.account.save_many(r,this.provider,this.controller);break;case"orgs":g.Models.account.save_many(_.map(r,function(t){t.type="Organization";return t}),this.provider,this.controller);break;case"own_events":case"received_events":g.Models.base.save_many_from_events(r,this.provider,this.controller);break}}),manage_global_for_repositories:(function k(){var q=this.list_page_status.repositories.__global__;if(q.params.type!="all"){q.all=false}}),sort_and_filter_repositories:(function p(q,u){var s=this.list_page_status.repositories.__global__,r=this.$class.sort_and_filter_helpers.repositories,t=u||this.repositories[s.str_params];if(q.type&&q.type!="all"){t=r.filter_type_method[q.type](t,r.filter_type,this)}if(q.forks&&q.forks!="all"){t=r.filter_forks_method[q.forks](t,r.filter_forks)}if(q.language){t=_.filter(t,r.filter_language,q.language=="CSharp"?"C#":q.language)}if(u||q.sort!=s.params.sort){t=_.sortBy(t,r.sort_field[q.sort]);if(q.direction=="desc"){t.reverse()}}else{if(q.direction!=s.params.direction){t.reverse();if(q.type=="all"){s.params.direction=q.direction}}}return t}),manage_global_for_stars:(function o(){var q=this.list_page_status.stars.__global__;if(q.params.sort!="created"){q.all=false}}),sort_and_filter_stars:(function n(q,v){var t=this.list_page_status.stars.__global__,s=this.$class.sort_and_filter_helpers.stars,u=v||this.stars[t.str_params],w;if((!t.all&&q.sort=="created")||(t.all&&!t.default_order_saved)){if(t.all){t.default_order_saved=true}if((t.all?t.params:q).direction=="desc"){u.reverse();if(t.all){t.params.direction="asc"}}var r=t.all?"":_.uniqueId();_.each(u,function(y,x){y.starred_order=r+x});if(!t.all&&q.direction=="desc"){u.reverse()}}if(q.language){u=_.filter(u,s.filter_language,q.language=="CSharp"?"C#":q.language)}if(q.forks&&q.forks!="all"){u=s.filter_forks_method[q.forks](u,s.filter_forks,this)}if(v||q.sort!=t.params.sort){u=_.sortBy(u,s.sort_field[q.sort]);if(q.direction=="desc"){u.reverse()}}else{if(q.direction!=t.params.direction){u.reverse();t.params.direction=q.direction}}return u}),sort_and_filter_own_events:(function b(q,t){var r=this.list_page_status.own_events.__global__,s=t||this.own_events[r.str_params];return this.sort_and_filter_events(q,s)}),sort_and_filter_received_events:(function h(q,t){var r=this.list_page_status.received_events.__global__,s=t||this.received_events[r.str_params];return this.sort_and_filter_events(q,s)}),is_organization:(function a(){return(this.details&&this.details.type&&this.details.type=="Organization")})})})(Reposio);(function(d){d.Models.repository=d.Models.base.$extend({__classvars__:{model_name:"repository",fields:{details:{},readme:"",activity:[],forks:[],stars:[],contributors:[]},default_params:{activity:{per_page:30,max_pages:10},forks:{per_page:50},stars:{per_page:50},contributors:{per_page:100}},fetchable_params:{forks:["sort"],activity:[]},sort_and_filter_helpers:{forks:{sort_field:{newest:"created_at",oldest:"created_at",watchers:"watchers_count"},filter_never_updated:(function g(h){return h.pushed_at<=h.created_at})}},save_many:(function f(k,m,h){var l;for(var j=0;j<k.length;j++){l=d.Models.repository.get(k[j].full_name+"@"+m.name,h);l.update_data("details",k[j])}})},__init__:(function b(j,h){this.$super(j,h);this.path=this.ref;this.href_id=this.id.replace("/",":");var i=this.path.split("/");this.details={name:i[1],user:{login:i[0]}}}),update_data:(function c(i,j,k){this.$super(i,j,k);switch(i){case"details":var h=d.Models.account.get(this.details.user.login+"@"+this.provider.name,this.controller);if(j.user){h.update_data("details",j.user)}break;case"forks":d.Models.repository.save_many(j,this.provider,this.controller);break;case"stars":case"contributors":d.Models.account.save_many(j,this.provider,this.controller);break;case"activity":d.Models.base.save_many_from_events(j,this.provider,this.controller);break}}),sort_and_filter_forks:(function a(h,l){var j=this.list_page_status.forks.__global__,i=this.$class.sort_and_filter_helpers.forks,k=l||this.forks[j.str_params];if(h.never_updated=="hide"){k=_.reject(k,i.filter_never_updated)}k=_.sortBy(k,i.sort_field[h.sort]);if(h.sort!="oldest"){k.reverse()}return k}),sort_and_filter_activity:(function e(h,k){var i=this.list_page_status.activity.__global__,j=k||this.activity[i.str_params];return this.sort_and_filter_events(h,j)})})})(Reposio);(function(S){var i=(function k(ak){this.provider=ak});i.prototype.format=(function B(al,am){if(al.type&&this[al.type]){var ak=this[al.type](al,am);if(!ak){ak=this.base_format(al,am,"<em>("+al.type.replace("Event","").toLowerCase()+")</em>")}return{event:al,source:am,provider:this,html:ak,day:this.provider.controller.display.format_date(al.created_at)}}return null});i.prototype.format_actor=(function N(am,an,al){var ak='<a class="account-link'+(al?" main-link":"")+'" href="#account_home!account='+am.login+"@"+an.provider.name+'">';if(am.avatar_url){ak+='<img class="avatar-small" src="img/default-avatar.png" data-original="'+am.avatar_url+'" />'}ak+=am.login;ak+="</a>";return ak});i.prototype.format_repo=(function t(ao,an,ap,al,am){var aq=ao.full_name.split("/"),ak;ak='<a class="repo-link'+(al?" main-link":"")+'" href="#repository_home!repository='+ao.full_name.replace("/",":")+"@"+ap.provider.name+'">'+aq[1]+"</a>";if(am||an.login!=aq[0]&&(ap.$class.model_name!="account"||ap.username!=aq[0])){ak+=" by "+this.format_actor({login:aq[0]},ap)}return ak});i.prototype.base_format=(function W(ao,ap,am,ar,aq,al){var ak,an;ak='<p class="ui-li-aside">'+this.provider.controller.display.format_date(ao.created_at,"show-time",null,"time-only")+"</p>";if(!aq&&ao.repository&&ao.repository.full_name){aq=this.format_repo(ao.repository,ao.actor,ap,"main")}an=this.format_actor(ao.actor,ap,"main")+" "+am;if(aq){an+=" "+aq}ak+='<div class="event-main">'+an+"</div>";if(al){ak+=this.format_external_link(al)}if(ar){ak+='<p class="ui-li-desc">'+ar+"</p>"}return ak});i.prototype.markdown_event_more=(function w(ak){if(!ak){return""}result='<div class="markdown">';result+=marked(ak,{sanitize:true,breaks:true,smartLists:true});result+="</div>";return result});i.prototype.trigger_text=(function J(al,ak){if(ak){return'<a href="#" class="collapsible-trigger">'+al+"</a>"}else{return al}});i.prototype.more=(function ah(al){var ak='<div data-role="collapsible" data-content-theme="d" data-corners="false" data-mini="true" class="event-more"><h3>More</h3>';ak+=al;ak+="</div>";return ak});i.prototype.description_fetcher=(function A(am,an,ak){var ao,al;if(!ak){ak=am.repository}if(ak.full_name&&(!an.path||ak.full_name!=an.path)){al=S.Models.repository.get(ak.full_name+"@github",this.provider.controller);if(typeof(ak.description)!="undefined"){al.update_data("details",ak)}ao="Description: ";if(al.details&&al.details.description){ao+="<strong>"+this.provider.controller.display.escape_html(al.details.description)+"</strong>"}else{if(al.details_fetched){ao+="<em>no description</em>"}else{ao+='<a href="#" class="fetch-desc-trigger" data-repository="'+al.id+'">click to fetch</a>'}}}return ao});i.prototype.format_external_link=(function D(ak){var al='<a class="ui-li-link-alt ui-btn ui-btn-icon-notext ui-btn-up-c" data-theme="c" href="'+ak+'" target="_blank">';al+='<span class="ui-btn ui-btn-icon-notext">';al+='<span class="ui-btn-inner">';al+='<span class="ui-icon ui-icon-arrow-r">&nbsp;</span>';al+="</span>";al+="</span>";al+="</a>";return al});i.prototype.CommitCommentEvent=(function o(al,am){var ak=this.trigger_text("commented",al.comment.body)+" a commit on";return this.base_format(al,am,ak,null,null,al.comment.html_url)});i.prototype.more_CommitCommentEvent=(function P(ak,al){return this.more(this.markdown_event_more(ak.comment.body))});i.prototype.CreateEvent=(function Y(am,an){var ak="created",ao,al;switch(am.ref_type){case"branch":ak+=" a branch on";ao="Branch: <strong>"+am.ref+"</strong>";al="https://github.com/"+am.repository.full_name+"/tree/"+am.ref;break;case"repository":if(am.description){ao="Description: <strong>"+am.description+"</strong>"}al="https://github.com/"+am.repository.full_name;break;case"tag":ak+=" a tag on";ao="Tag: <strong>"+am.ref+"</strong>";al="https://github.com/"+am.repository.full_name+"/tree/"+am.ref;break}return this.base_format(am,an,ak,ao,null,al)});i.prototype.DeleteEvent=(function aa(al,am){var ak="deleted",an;switch(al.ref_type){case"branch":ak+=" a branch on";an="Branch: <strong>"+al.ref+"</strong>";break;case"tag":an="Tag: <strong>"+al.ref+"</strong>";break}return this.base_format(al,am,ak,an)});i.prototype.DownloadEvent=(function r(ak,al){});i.prototype.FollowEvent=(function I(ak,al){var am=this.format_actor(ak.target,al);return this.base_format(ak,al,"started following",null,am)});i.prototype.ForkEvent=(function Q(al,am){var ak=this.trigger_text("forked",al.forkee),an=this.description_fetcher(al,am,al.forkee);return this.base_format(al,am,ak,an)});i.prototype.more_ForkEvent=(function ab(ak,al){return this.more("<p>Fork: "+this.format_repo(ak.forkee,ak.actor,al,null,true)+"</p>")});i.prototype.ForkApplyEvent=(function a(ak,al){return this.base_format(ak,al,"applied the fork queue to")});i.prototype.GistEvent=(function u(al,an){var am=al.action,ak,ao;if(!am.match(/d$/)){if(!am.match(/e$/)){am+="e"}am+="d"}ak=am+" a gist";if(al.gist.description){ao="Description: <strong>"+al.gist.description+"</strong>"}return this.base_format(al,an,ak,ao,null,al.gist.html_url)});i.prototype.GollumEvent=(function af(am,an){var ao=this.format_repo(am.repository,am.actor,an),ak=this.trigger_text("edited",true)+" the "+ao+" wiki",al="https://github.com/"+am.repository.full_name+"/wiki";return this.base_format(am,an,ak,null," ",al)});i.prototype.more_GollumEvent=(function ai(am,ao){var al='<ul data-role="listview" data-theme="d">';for(var ak=0;ak<am.pages.length;ak++){var an=am.pages[ak];al+="<li>";al+="<em>"+an.title+"</em> — <strong>"+an.action+"</strong>";al+="</li>"}al+="</ul>";return this.more(al)});i.prototype.IssueCommentEvent=(function T(am,an){var ak,ao=(am.is_pull_request?"Pull request":"Issue")+": <strong>#"+am.issue.number+" - "+am.issue.title+"</strong>",al;if(am.action=="created"){ak=this.trigger_text("commented",am.comment.body);ak+=" "+(am.is_pull_request?"a pull request":"an issue")+" on"}else{ak=am.action+" a ";ak+=this.trigger_text("comment",am.action!="deleted"&&am.comment.body);ak+=" on an issue on"}if(am.comment.html_url){al=am.comment.html_url}else{if(am.issue.html_url&&am.comment.id){al=am.issue.html_url+"#issuecomment-"+am.comment.id}}return this.base_format(am,an,ak,ao,null,al)});i.prototype.more_IssueCommentEvent=(function p(ak,al){return this.more(this.markdown_event_more(ak.comment.body))});i.prototype.IssuesEvent=(function z(al,am){var ak=al.action+" an "+this.trigger_text("issue",al.issue.body)+" on",an="Issue <strong>#"+al.issue.number+" - "+al.issue.title+"</strong>";return this.base_format(al,am,ak,an,null,al.issue.html_url)});i.prototype.more_IssuesEvent=(function C(ak,al){return this.more(this.markdown_event_more(ak.issue.body))});i.prototype.MemberEvent=(function L(al,am){var ak=al.action+" ";ak+=this.format_actor(al.member,am);ak+=" as a member "+(al.action=="added"?"to":"from");return this.base_format(al,am,ak)});i.prototype.PublicEvent=(function K(ak,al){return this.base_format(ak,al,"open sourced")});i.prototype.PullRequestEvent=(function R(al,am){var ak=al.action+" a "+this.trigger_text("pull request",al.pull_request.body)+" on",an="Pull request <strong>#"+al.pull_request.number+" - "+al.pull_request.title+"</strong>";return this.base_format(al,am,ak,an,null,al.pull_request.html_url)});i.prototype.more_PullRequestEvent=(function g(ak,al){return this.more(this.markdown_event_more(ak.pull_request.body))});i.prototype.PullRequestReviewCommentEvent=(function y(al,am){var ak=this.trigger_text("commented",al.comment.body)+" a pull request on",an;if(al.pull_request.number){an="Pull request <strong>#"+al.pull_request.number+"</strong>"}return this.base_format(al,am,ak,an,null,al.comment.html_url)});i.prototype.more_PullRequestReviewCommentEvent=(function q(ak,al){return this.more(this.markdown_event_more(ak.comment.body))});i.prototype.PushEvent=(function ae(am,an){var ak="pushed "+(am.size?this.trigger_text(am.size+" commit"+(am.size>1?"s":""),true):"")+" to",ao,al;if(am.ref&&am.ref.indexOf("refs/heads/")===0){ao="Branch: <strong>"+am.ref.replace("refs/heads/","")+"</strong>"}if(am.size==1){al="https://github.com/"+am.repository.full_name+"/commit/"+am.commits[0].sha}else{if(am.before&&am.head){al="https://github.com/"+am.repository.full_name+"/compare/"+am.before+"..."+am.head}}return this.base_format(am,an,ak,ao,null,al)});i.prototype.more_PushEvent=(function f(ap,aq){var ao='<ul data-role="listview" data-theme="d">';for(var an=0;an<ap.commits.length;an++){var ar=ap.commits[an],ak=ar.message.split("\n"),am=ak.shift(),al=ak.length?"<br />"+ak.join("<br />"):"";ao+="<li"+(al.length?' class="with-extension"':"")+">";ao+="<strong>"+ar.author.name+"</strong>";ao+=" — <em>";ao+=am;if(al){ao+='<span class="extension">'+al+"</span>"}ao+="</em>";ao+="</li>"}ao+="</ul>";return this.more(ao)});i.prototype.TeamAddEvent=(function H(ak,al){});i.prototype.WatchEvent=(function e(al,am){var ak=al.action+" watching",an=this.description_fetcher(al,am);return this.base_format(al,am,ak,an)});var ac=(function n(ak){var am,al=(providers_config?providers_config.github||{}:{});this.name="github";if(al.auth=="basic"&&al.username&&al.password){am="Basic "+Base64.encode(al.username+":"+al.password)}else{if(al.auth=="oauth"&&al.token){am="token "+al.token}}if(am){Gh3.Helper.headers.Authorization=am}Gh3.Helper.cache=false;this.controller=ak;this.formatter=new i(this)});ac.prototype.get_user=(function O(ak){return new Gh3.User(ak)});ac.prototype.get_repo=(function F(al){var ak=al.split("/");return new Gh3.Repository(ak[1],this.get_user(ak[0]))});ac.prototype.map_type={accounts:"account",repositories:"repository",events:"event"};ac.prototype.decorate_collback=(function d(an,ak,al){var am=this;return function(ap,aq){var ao;if(!ap){switch(al){case"field":ao=aq[ak];break;case"repositories":case"accounts":case"events":ao=_.map(aq[ak].getAll(),am["map_"+am.map_type[al]],am);break;default:ao=aq[ak].getAll()}}an(ap,ap?null:ao)}});ac.prototype.map=(function V(ao,am){var al={},ak;if(ao){for(var an=0;an<am._.length;an++){ak=am._[an];if(typeof(ao[ak])=="undefined"){continue}al[am[ak]||ak]=ao[ak]}}return al});ac.prototype.account_mapping={_:["login","type","avatar_url","name","created_at","company","location","email","blog","public_repos","followers_count","following_count","contributions"],blog:"site",public_repos:"repos_count"};ac.prototype.map_account=(function m(al){var ak={};if(al){ak=this.map(al,this.account_mapping)}return ak});ac.prototype.repository_mapping={_:["name","full_name","description","pushed_at","created_at","updated_at","forks_count","fork","watchers_count","language"],fork:"is_fork"};ac.prototype.map_repository=(function x(al){var ak={};if(al){ak=this.map(al,this.repository_mapping);if(al.fork&&al.parent){ak.parent=this.map_repository(al.parent)}if(al.user){ak.user=this.map_account(al.user)}}return ak});ac.prototype.map_event=(function c(ao){var ak={},aq;if(ao){aq=ao.payload||{};switch(ao.type){case"CommitCommentEvent":ak.comment=this.map(aq.comment,{_:["body","html_url"]});break;case"CreateEvent":ak=this.map(aq,{_:["ref_type","ref","description"]});break;case"DeleteEvent":ak=this.map(aq,{_:["ref_type","ref"]});break;case"FollowEvent":if(aq.target&&aq.target.login){ak.target={login:aq.target.login}}break;case"ForkEvent":if(aq.forkee&&isNaN(aq.forkee)){ak.forkee=this.map_repository(aq.forkee)}break;case"GistEvent":ak=this.map(aq,{_:["action"]});ak.gist=this.map(aq.gist,{_:["description","html_url"]});break;case"GollumEvent":ak.pages=[];if(aq.pages&&aq.pages.length){for(var ar=0;ar<aq.pages.length;ar++){ak.pages.push(this.map(aq.pages[ar],{_:["title","action"]}))}}break;case"IssueCommentEvent":ak=this.map(aq,{_:["action"]});ak.issue=this.map(aq.issue,{_:["number","title","html_url"]});ak.issue.is_pull_request=(aq.issue&&aq.issue.pull_request&&aq.issue.pull_request.html_url);ak.comment=this.map(aq.comment,{_:["body","html_url","id"]});break;case"IssuesEvent":ak=this.map(aq,{_:["action"]});ak.issue=this.map(aq.issue,{_:["number","title","body","html_url"]});break;case"MemberEvent":ak=this.map(aq,{_:["action"]});if(aq.member&&aq.member.login){ak.member={login:aq.member.login}}break;case"PullRequestEvent":ak=this.map(aq,{_:["action","number"]});ak.pull_request=this.map(aq.pull_request,{_:["body","title","html_url"]});if(ak.number){ak.pull_request.number=ak.number;delete ak.number}break;case"PullRequestReviewCommentEvent":var al;ak.pull_request={};if(aq.comment._links&&aq.comment._links.pull_request&&aq.comment._links.pull_request.href){al=aq.comment._links.pull_request.href;al=al.match(/(\d+)\/?$/);al=al?al[1]:null;if(al){ak.pull_request.number=al}}ak.comment=this.map(aq.comment,{_:["body","html_url"]});if(!ak.comment.html_url&&aq.comment&&aq.comment._links&&aq.comment._links.html){ak.comment.html_url=aq.comment._links.html.href}break;case"PushEvent":var at,am;ak=this.map(aq,{_:["size","ref","before","head"]});ak.commits=[];if(ak.size){if(aq.commits){am=aq.commits;at=false}else{if(aq.shas){am=aq.shas;at=true}}if(!am.length){ak.size=0}else{for(var ap=0;ap<am.length;ap++){var an=am[ap];ak.commits.push({sha:at?an[0]:an.sha,message:at?an[2]:an.message,author:{name:at?an[3]:an.author.name}})}}}break;case"WatchEvent":ak=this.map(aq,{_:["action"]});break}ak.type=ao.type;ak.created_at=ao.created_at;ak.actor=this.map(ao.actor,{_:["login","avatar_url"]});ak.repository=this.map(ao.repository||ao.repo,{_:["name","full_name"]});if(ak.repository&&(ak.repository.full_name||ak.repository.name)){if(!ak.repository.full_name&&ak.repository.name){ak.repository.full_name=ak.repository.name;ak.repository.name=null}if(ak.type=="CreateEvent"&&ak.ref_type=="repository"&&ak.description){ak.repository.description=ak.description}}}return ak});ac.prototype.get_account_details=(function G(ao,an,am){var al=this;function ak(ap,aq){if(!ap&&aq){aq=al.map_account(aq)}return an(ap,aq)}this.get_user(ao).fetch(ak,am)});ac.prototype.get_account_repositories=(function ad(am,al,ak){this.get_user(am).repositories.fetch(this.decorate_collback(al,"repositories","repositories"),ak)});ac.prototype.get_account_stars=(function ag(am,al,ak){this.get_user(am).starred.fetch(this.decorate_collback(al,"starred","repositories"),ak)});ac.prototype.get_account_own_events=(function v(am,al,ak){this.get_user(am).events.fetch(this.decorate_collback(al,"events","events"),ak)});ac.prototype.get_account_received_events=(function j(am,al,ak){this.get_user(am).received_events.fetch(this.decorate_collback(al,"received_events","events"),ak)});ac.prototype.get_account_followers=(function b(am,al,ak){this.get_user(am).followers.fetch(this.decorate_collback(al,"followers","accounts"),ak)});ac.prototype.get_account_following=(function aj(am,al,ak){this.get_user(am).following.fetch(this.decorate_collback(al,"following","accounts"),ak)});ac.prototype.get_account_org_members=(function U(am,al,ak){this.get_user(am).members.fetch(this.decorate_collback(al,"members","accounts"),ak)});ac.prototype.get_account_orgs=(function Z(am,al,ak){this.get_user(am).orgs.fetch(this.decorate_collback(al,"orgs","accounts"),ak)});ac.prototype.get_repository_details=(function s(al,ao,an){var am=this;function ak(ap,aq){if(!ap&&aq){aq=am.map_repository(aq)}return ao(ap,aq)}this.get_repo(al).fetch(ak,an)});ac.prototype.get_repository_readme=(function h(ak,am,al){this.get_repo(ak).fetchReadme(this.decorate_collback(am,"readme","field"),al)});ac.prototype.get_repository_activity=(function X(ak,am,al){this.get_repo(ak).events.fetch(this.decorate_collback(am,"events","events"),al)});ac.prototype.get_repository_forks=(function E(ak,am,al){this.get_repo(ak).forks.fetch(this.decorate_collback(am,"forks","repositories"),al)});ac.prototype.get_repository_stars=(function M(ak,am,al){this.get_repo(ak).stargazers.fetch(this.decorate_collback(am,"stargazers","accounts"),al)});ac.prototype.get_repository_contributors=(function l(ak,am,al){this.get_repo(ak).contributors.fetch(this.decorate_collback(am,"contributors","accounts"),al)});if(!S.Providers){S.Providers={}}S.Providers.github=ac})(Reposio);(function(D){D.View=Class.$extend({__classvars__:{model:null,view_name:null,views:{},views_cache:{},get:(function C(I,J){if(!this.views_cache[I.id]){this.views_cache[I.id]=new this.views[I.id](I,J)}return this.views_cache[I.id]})},__init__:(function A(I,J){this.page=I;this.display=J;this.nodes_cache=null;this.container=null;this.init_events();this.accept_options=this.__classvars__.accept_options}),init_events:(function G(){}),cache_nodes:(function p(){this.container=this.page.nodes.content;this.nodes_cache={}}),nodes:(function l(){if(!this.nodes_cache){this.cache_nodes()}return this.nodes_cache}),reset:(function x(I){if(!this.page.node.data("mobile-page")){this.page.node.page()}}),update:(function n(J,I){})});D.View.views._list=D.View.$extend({__init__:(function y(I,J){this.$super(I,J);this.options={}}),cache_nodes:(function m(){this.$super();this.nodes_cache.list=this.container.children("ul");this.nodes_cache.load_buttons=this.container.children(".load-buttons");this.nodes_cache.load_more_button=this.nodes_cache.load_buttons.find("a.list-more-button");this.nodes_cache.load_all_button=this.nodes_cache.load_buttons.find("a.list-all-button")}),reset:(function o(J){this.$super();var I=this.nodes();this.empty_list_node();I.load_buttons.addClass("ui-hidden");I.load_more_button.addClass("ui-disabled");I.load_all_button.addClass("ui-disabled")}),empty_list_node:(function f(){var I=this.nodes(),J=I.list[0];while(J.firstChild){J.removeChild(J.firstChild)}}),update:(function g(L,K){var J=this.nodes(),I=this.get_items(L,this.get_data(L));this.empty_list_node();if(I.length){I[0].className+=" ui-first-child";this.update_list_node(I)}this.update_load_buttons(L);this.refresh_widgets()}),update_list_node:(function r(K){var J=this.nodes(),M=J.list[0],I=M.lastChild;if(K.length){K[K.length-1].className+=" ui-last-child";if(I){I.className=I.className.replace("ui-last-child","")}for(var L=0;L<K.length;L++){M.appendChild(K[L])}}}),complete:(function i(L,K){var J=this.nodes(),I=this.get_items(L,this.prepare_data(L,K));this.update_list_node(I);this.refresh_widgets()}),update_load_buttons:(function a(L){var I=this.nodes();if(!I.load_buttons.length){return}var J=$.param(this.options),K=L.list_page_status[this.$class.data_field][J];if(!L.list_page_status[this.$class.data_field].__global__.all&&(K?K.maybe_more:true)){this.enable_load_buttons()}else{this.hide_load_buttons()}}),toggle_load_buttons_enabled:(function d(J){var I=this.nodes();if(!I.load_buttons.length){return}I.load_more_button.toggleClass("ui-disabled",!J);I.load_all_button.toggleClass("ui-disabled",!J);if(J){this.show_load_buttons()}}),disable_load_buttons:(function w(){this.toggle_load_buttons_enabled(false)}),enable_load_buttons:(function v(){this.toggle_load_buttons_enabled(true)}),toggle_load_buttons_visible:(function F(J){var I=this.nodes();if(!I.load_buttons.length){return}I.load_buttons.toggleClass("ui-hidden",!J);if(!J){this.disable_load_buttons()}}),hide_load_buttons:(function q(){this.toggle_load_buttons_visible(false)}),show_load_buttons:(function B(){this.toggle_load_buttons_visible(true)}),refresh_widgets:(function H(){this.display.load_visible_images()}),get_data:(function u(I){return I.get_list(this.$class.data_field,this.options)}),prepare_data:(function k(J,I){return J.get_list(this.$class.data_field,this.options,I)}),get_items:(function z(J,I){}),options_form:(function e(){var I=this,L="#"+this.$class.view_name+"_options";if(!this._options_form){this._options_form=$(L);if(!this._options_form.length){var K=I.display.get_template(I.$class.view_name+"_options",true),J=$(K);this._options_form=J.find(L);setTimeout(function(){J.collapsible();$.mobile.checkboxradio.prototype.enhanceWithin(I._options_form,true);$.mobile.button.prototype.enhanceWithin(I._options_form,true);$.mobile.selectmenu.prototype.enhanceWithin(I._options_form,true);$.mobile.controlgroup.prototype.enhanceWithin(I._options_form,true);I.page.nodes.content.prepend(K)},500)}}return this._options_form}),get_options_from_form:(function h(){var P=this.options_form().serializeArray(),I,J={},Q=[],M={},L={},K=this.$class.view_name+"_options_";for(var O=0;O<P.length;O++){I=P[O].name.replace(K,"");if(I=="submit"){continue}if(!_.contains(Q,I)){Q.push(I);L[I]=$("#"+P[O].name).is("select[multiple=multiple]")}if(L[I]){if(!J[I]){J[I]=[]}J[I].push(P[O].value)}else{J[I]=P[O].value}}Q.sort();for(var N=0;N<Q.length;N++){M[Q[N]]=J[Q[N]]}return M}),manage_options:(function c(I){var J,K,L={},M=this.$class.view_name+"_options_";this.options_form().find("[type=reset]").click();J=$.extend({},this.$class.default_options);if(I){for(K in I){if(typeof(J[K])!=="undefined"){J[K]=decodeURIComponent(decodeURIComponent(I[K]))}}}for(K in J){L[M+K]=J[K]}this.options_form().unserializeForm($.param(L));this.options=J;return this.options}),init_events:(function E(){var K=this,N=(function L(S){S.preventDefault();S.stopPropagation();var Q=K.get_options_from_form(),P={},T="#"+K.$class.view_name;T+="!"+K.$class.model+"="+K.display.controller[K.$class.model].id.replace("/",":");for(var R in Q){P[R]=encodeURIComponent(Q[R])}T+="&"+$.param(P);window.location.hash=T;return false}),O=(function J(P){P.preventDefault();P.stopPropagation();if(!$(this).hasClass("ui-disabled")){var Q=K.display.pages[$.mobile.activePage.data("url")];$.mobile.loading("show");K.disable_load_buttons();K.display.ask_for_more(Q)}return false}),I=(function M(P){P.preventDefault();P.stopPropagation();if(!$(this).hasClass("ui-disabled")){var Q=K.display.pages[$.mobile.activePage.data("url")];$.mobile.loading("show");K.disable_load_buttons();K.display.ask_for_all(Q)}return false});$(document).on("submit","#"+this.__classvars__.view_name+"_options",N);$(document).on("click","#"+this.__classvars__.view_name+"_load_buttons .list-more-button",O);$(document).on("click","#"+this.__classvars__.view_name+"_load_buttons .list-all-button",I)})});D.View.views._accounts=D.View.views._list.$extend({get_items:(function s(J,I){return this.display.create_accounts_list_items(I,J.provider)})});D.View.views._repositories=D.View.views._list.$extend({get_items:(function j(J,I){return this.display.create_repositories_list_items(I,J.provider)})});D.View.views._events=D.View.views._list.$extend({get_items:(function b(M,K){var I=[];for(var J=0;J<K.length;J++){var L=M.provider.formatter.format(K[J],M);if(L){I.push(L)}}return this.display.create_events_list_items(I)}),refresh_widgets:(function t(){this.display.render_widgets(this.nodes().list);this.display.load_visible_images()})})})(Reposio);(function(d){d.View.views.account_home=d.View.$extend({__classvars__:{model:"account",view_name:"account_home"},cache_nodes:(function f(){this.$super();var h=this.nodes_cache;var g=this.container.find(".account-main");h.avatar=g.children("img");h.provider=g.children("p.provider");h.name=g.children("p.account-name");var i=g.children("h3");h.username=i.children("strong");h.organization=i.children("span");h.infos=this.container.find(".account-details");h.infos_loading=h.infos.children(".failover");h.infos_items=h.infos.children(".ui-li-has-icon");h.company_container=h.infos.children("li.account-company");h.company=h.company_container.children(":last");h.location_container=h.infos.children("li.account-location");h.location=h.location_container.children(":last");h.email_container=h.infos.children("li.account-email");h.email=h.email_container.children(":last");h.created_at_container=h.infos.children("li.account-created_at");h.created_at=h.created_at_container.children(":last");h.site_container=h.infos.children("li.account-site");h.site=h.site_container.find("a");h.orgs_container=this.container.find(".account-orgs")}),reset:(function c(h){this.$super();var g=this.nodes(),i=!!(h&&h.details);g.username.html(h.username||"loading...");g.name.html((i&&h.details.name)||"");g.avatar.attr("src","img/default-avatar.png");if(i&&h.details.avatar_url){g.avatar.attr("src",h.details.avatar_url)}if(i){this._update_org(h,g);this._update_details(h,g);if(!h.details.created_at){g.infos_loading.show()}}else{g.organization.hide();g.orgs_container.show();g.infos_items.hide();g.infos_loading.show()}if(!i||!h.orgs||!h.orgs.length){this.display.clear_listview(g.orgs_container,"Loading...",true)}}),_update_details:(function e(i,g){g.created_at.html(i.details.created_at?this.display.format_date(i.details.created_at):"");g.created_at_container.toggle(!!i.details.created_at);g.company.html(i.details.company||"");g.company_container.toggle(!!i.details.company);g.location.html(i.details.location||"");g.location_container.toggle(!!i.details.location);var h=!!(i.details.email&&i.details.email.indexOf("@")!==-1);g.email.html(h?i.details.email:"");g.email_container.toggle(h);g.site.html(i.details.site||"");g.site_container.toggle(!!i.details.site);g.site.attr("href",i.details.site||"/")}),_update_org:(function b(i,g){var h=i.is_organization();g.orgs_container.toggle(!h);g.organization.toggle(h);return h}),update:(function a(m,i){var h=this.nodes(),n=this;var l=this._update_org(m,h);h.username.html(m.username);h.provider.html(m.provider.name);h.avatar.attr("src",m.details.avatar_url);h.name.html(m.details.name||"");h.name.toggle(!!m.details.name);this._update_details(m,h);h.infos_loading.hide();if(!l){var k=(function j(p){m.update_data("orgs",p);if(m.orgs[""]&&m.orgs[""].length){n.display.clear_listview(h.orgs_container);h.orgs_container.append(n.display.create_accounts_list_items(m.orgs[""],m.provider));h.orgs_container.listview("refresh");n.display.load_visible_images()}else{n.display.clear_listview(h.orgs_container,"No organizations",true);h.orgs_container.fadeOut()}});var o=(function g(p){n.display.clear_listview(h.orgs_container,"Failed to load organizations",true)});if(typeof m.orgs[""]==="undefined"||i){m.fetch("orgs",k,o)}else{k(m.orgs[""])}}n.container.find("ul[data-role=listview]").listview("refresh")})});d.View.views.account_repositories=d.View.views._repositories.$extend({__classvars__:{model:"account",view_name:"account_repositories",data_field:"repositories",accept_options:true,default_options:{direction:"desc",forks:"all",language:null,sort:"pushed",type:"all"}}});d.View.views.account_stars=d.View.views._repositories.$extend({__classvars__:{model:"account",view_name:"account_stars",data_field:"stars",accept_options:true,default_options:{direction:"desc",forks:"all",language:null,sort:"created"}}});d.View.views.account_followers=d.View.views._accounts.$extend({__classvars__:{model:"account",view_name:"account_followers",data_field:"followers"}});d.View.views.account_following=d.View.views._accounts.$extend({__classvars__:{model:"account",view_name:"account_following",data_field:"following"}});d.View.views.account_members=d.View.views._accounts.$extend({__classvars__:{model:"account",view_name:"account_members",data_field:"org_members"}});d.View.views.account_activity=d.View.views._events.$extend({__classvars__:{model:"account",view_name:"account_activity",data_field:"own_events",accept_options:true,default_options:{mode:"display",type:null}}});d.View.views.account_events=d.View.views._events.$extend({__classvars__:{model:"account",view_name:"account_events",data_field:"received_events",accept_options:true,default_options:{mode:"display",type:null}}})})(Reposio);(function(d){d.View.views.repository_home=d.View.$extend({__classvars__:{model:"repository",view_name:"repository_home"},cache_nodes:(function c(){this.$super();var j=this.nodes_cache;var i=this.container.children(".repo-main");j.provider=i.children("p.provider");var k=i.children(".repo-path");j.name=k.children("strong.repo-name");j.owner_container=k.children("span.repo-owner-container");j.owner=j.owner_container.children("span.repo-owner");j.fork_container=i.children("div.repo-fork");var l=i.find(".repo-links");j.fork_name=l.children("span.repo-fork-name");j.fork_owner=l.find("span strong.repo-fork-owner");j.last_push_container=i.children("p.repo-last-push");j.last_push=j.last_push_container.children("span");j.desc_readme=this.container.children("div.ui-collapsible-set");j.description_container=j.desc_readme.children("div.repo-desc-container");j.description=j.description_container.find(".repo-desc");j.readme_container=j.desc_readme.children("div.repo-readme-container");j.readme=j.readme_container.find(".repo-readme")}),reset:(function h(j){this.$super();var i=this.nodes(),k=!!(j&&j.details);i.name.html((k&&j.details.name)||"loading...");if(k&&j.details.user){this._update_owner(j,i);i.owner_container.show()}else{i.owner_container.hide()}if(k&&j.details.is_fork&&j.details.parent){this._update_fork(j,i);i.fork_container.show()}else{i.fork_container.hide()}if(k&&j.details.pushed_at){this._update_last_push(j,i);i.last_push_container.show()}else{i.last_push_container.hide()}if(k&&(j.details.description||j.readme)){i.desc_readme.show()}else{i.desc_readme.hide()}i.description.text((k&&j.details.description)||"");i.readme.html((k&&j.readme)||"<em>Loading...</em>");this.display.render_widgets(this.container)}),_update_owner:(function f(j,i){i.owner.html(this.display.account_link(j.details.user.login,j.provider.name,j.details.user.avatar_url))}),_update_fork:(function a(j,i){i.fork_name.html(this.display.repository_link(j.details.parent.name,j.provider.name));i.fork_owner.html(this.display.account_link(j.details.parent.user.login,j.provider.name,j.details.parent.user.avatar_url))}),_update_last_push:(function b(j,i){i.last_push.html(j.details.pushed_at?this.display.format_date(j.details.pushed_at,true):"never !")}),update:(function g(k,n){var i=this.nodes();i.provider.html(k.provider.name);i.name.html(k.details.name);this._update_owner(k,i);i.owner_container.show();if(k.details.is_fork){this._update_fork(k,i);i.fork_container.show()}this._update_last_push(k,i);i.last_push_container.show();i.description.text(k.details.description||"<em>No description!</em>");i.description_container.toggle(!!k.details.description);var o=(function m(p){k.update_data("readme",p);if(!k.readme&&i.readme_container.hasClass("ui-collapsible-collapsed")){i.readme_container.fadeOut()}else{i.readme.html(k.readme||"<em>No readme!</em>")}});var j=(function l(p){i.readme.html("<em>Failed to load readme!</em>")});if(k.readme===null||n){k.fetch("readme",o,j)}else{o(k.readme)}i.desc_readme.show();i.readme_container.show();this.display.render_widgets(this.container)})});d.View.views.repository_forks=d.View.views._repositories.$extend({__classvars__:{model:"repository",view_name:"repository_forks",data_field:"forks",accept_options:true,default_options:{never_updated:"show",sort:"newest"}}});d.View.views.repository_activity=d.View.views._events.$extend({__classvars__:{model:"repository",view_name:"repository_activity",data_field:"activity",accept_options:true,default_options:{mode:"display",type:null}}});d.View.views.repository_contributors=d.View.views._accounts.$extend({__classvars__:{model:"repository",view_name:"repository_contributors",data_field:"contributors"},get_items:(function e(k,l){for(var j=0;j<l.length;j++){l[j].html_prepend='<p class="ui-li-aside count ui-li-desc">'+l[j].contributions+"</p>"}return this.$super(k,l)})});d.View.views.repository_stars=d.View.views._accounts.$extend({__classvars__:{model:"repository",view_name:"repository_stars",data_field:"stars"}})})(Reposio);