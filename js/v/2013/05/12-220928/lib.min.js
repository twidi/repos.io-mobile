var Reposio={};$(document).ready((function App__on_ready(){Reposio.controller=new Reposio.Controller();Reposio.controller.init()}));(function(e){var g=(function k(){this.providers={};this.can_login=false;for(var r in e.Providers){this.providers[r]=new e.Providers[r](this);if(!this.can_login&&this.providers[r].can_login()){this.can_login=true}}for(var q in e.Models){this[q]=null}this.current_user=null;this.favorites=$.jStorage.get("favorites",[]);this.display=new e.Display(this)});g.prototype.init=(function f(){this.get_current_user();this.display.init()});g.prototype.set_current_object=(function o(r,q){var s=(this[r]===null||this[r].id!=q);if(s){this[r]=e.Models[r].get(q,this);this.display["change_"+r]()}this.display["update_"+r+"_navbar"](this[r]);return s});g.prototype.fetch_full_error=(function c(s,u,v,r,q,w,t){if(this.display.confirm_new_fech("full","this page",s,t)){u.fetch_full(v,r,q,w,t)}});g.prototype.fetch_more_error=(function j(s,u,v,r,q,t){if(this.display.confirm_new_fech("more","more",s,t)){u.fetch_more(v,r,q,t)}});g.prototype.fetch_all_error=(function p(t,v,w,r,s,q,u){if(this.display.confirm_new_fech("all","all",t,u)){v.fetch_all(w,r,s,q,u)}});g.prototype.make_page_hash=(function i(t,r,q){var s="#"+r.id+"!"+t.$class.model_name+"="+t.ref.replace("/",":")+"@"+t.provider.name;return s});g.prototype.toggle_favorite=(function m(w,u,s,t){var v=this.make_page_hash(w,u,s),r=this.favorites.length,q;this.favorites=_.reject($.jStorage.get("favorites",[]),function(x){return x.hash==v});if(r==this.favorites.length){q=this.create_favorite(v,w,u.title,s);this.favorites[t?"unshift":"push"](q)}$.jStorage.set("favorites",this.favorites);$.jStorage.set("favorites-managed",true);this.display.ask_for_favorites_redraw()});g.prototype.create_favorite=(function d(t,s,u,r){var q={hash:t,model:s.$class.model_name,ref:s.ref,provider:s.provider.name};if(u!="Details"){q.title=u}if(r&&_.size(r)>0){q.options=r}switch(s.$class.model_name){case"account":if(s.details&&s.details.avatar_url){q.avatar_url=s.details.avatar_url}break;case"repository":if(s.details.user&&s.details.user.avatar_url){q.avatar_url=s.details.user.avatar_url}if(s.details.is_fork){q.is_fork=true}if(s.details.description){q.description=s.details.description}break}return q});g.prototype.is_favorited=(function l(t,r,q){var s=this.make_page_hash(t,r,q);return !!(_.find(this.favorites,function(u){return u.hash==s}))});g.prototype.get_current_user=(function b(){this.current_user=$.jStorage.get("logged-user",null);if(!this.current_user){return}if(this.current_user.provider&&this.providers[this.current_user.provider]){if(!this.providers[this.current_user.provider].init_auth(this.current_user)){this.current_user=null}}else{this.current_user=null}if(!this.current_user){setTimeout(function(){controller.logout()},500)}});g.prototype.login=(function a(s,r,q){this.current_user=r;this.current_user.username=s;this.current_user.provider=q;$.jStorage.set("logged-user",this.current_user);this.display.login_success()});g.prototype.logout=(function h(){this.current_user=null;$.jStorage.deleteKey("logged-user");this.display.logout()});g.prototype.check_login=(function n(r){var q=this;setTimeout(function(){if(!r.provider||!q.providers[r.provider]){return q.display.login_fail()}q.providers[r.provider].check_login(r,(function s(u,x){var v=e.Models.account.get(u.login+"@"+r.provider,q);v.update_data("details",u);v.details_fetched=true;if(!q.is_favorited(v,q.display.pages.account_home)){var w=q.make_page_hash(v,q.display.pages.account_home),t=q.create_favorite(w,v,"Details");this.favorites=$.jStorage.get("favorites",[]);this.favorites.unshift(t);$.jStorage.set("favorites",this.favorites);q.display.ask_for_favorites_redraw()}q.login(u.login,x,r.provider)}),function(){q.display.login_fail()})},1)});e.Controller=g})(Reposio);(function(A){var m=(function j(H){this.controller=H});m.prototype.init=(function G(){var O=this;this.need_favorites_redraw=true;this.templates_container=$("#templates");this.nodes={body:$("body"),home:{favorites:$("#home-favorites"),anonymous:$("#welcome-anonymous"),username:$("#welcome span"),login_button:$("#home-login-button"),no_login_button:$(".home-hide-no-login-button")}};for(var M in this.pages_list){this.construct_pages(M,this.pages_list[M])}$.mobile.initializePage();O.init_events();var L=$("div[data-role=page]:not(.ui-page)"),K=$("#start-screen"),J=$("#progress-loader"),N=L.length,I=(function H(P,S){if(S<P.length){var R=Math.max(6,Math.min(Math.round(100*(S+1)/N),100));J.css({width:R+"%"});setTimeout((function Q(){var U=P.eq(S);U.page();I(P,S+1)}),10);if(S==2){$("html").removeClass("loading")}}else{var T=$.jStorage.get("start_screen_seen");J.parent().html("Enjoy !");K.fadeOut(T?"fast":1200,function(){K.remove()});$.jStorage.set("start_screen_seen",true)}});I(L,0);if(this.controller.can_login){$("#welcome-anonymous-cannot-login").hide();$("#welcome-anonymous-can-login").show();$(".auth-menu").show();this.toggle_auth_infos()}});m.prototype.format_date=(function B(L,M,H,I){if(!L){return""}var K=L.split("T");if(M){var J=K[1].slice(0,H?8:5);return(I?"":K[0]+" ")+J}else{return K[0]}});m.prototype.escape_html=(function h(H){if(!H){return""}return H.indexOf("<")===-1?H:$("<div/>").text(H).html()});m.prototype.nodes={};m.prototype.templates={};m.prototype.pages_list={};m.prototype.pages={};m.prototype.construct_pages=(function r(H,N){for(var S=0;S<N.length;S++){var J=N[S];J.name=J.id;J.id=H+"_"+J.name;J.type=H;if(!J.title){J.title=J.name[0].toUpperCase()+J.name.slice(1)}if(!J.method){J.method=J.name}}var W="",I=(N.length>4);for(var X=0;X<N.length;X++){var V=N[X],Y="",Q=[];if(I){Q.push(N[0]);Q.push(N[1]);Q.push(N[(X<2)?2:X])}else{Q=N}Y='<div data-role="page" id="'+V.id+'">';Y+='<div data-role="header" data-id="'+H+'_pages" data-position="fixed" data-theme="a">';Y+="<h3></h3>";Y+='<a href="#main_menu_'+V.id+'" id="main_menu_'+V.id+'_opener" data-icon="gear" data-iconpos="notext" data-rel="popup" class="ui-btn-right">Options</a>';Y+='<div data-role="navbar">';Y+="<ul"+(I?' class="extended"':"")+">";for(var U=0;U<Q.length;U++){var P=Q[U];Y+="<li>";Y+='<a href="#'+P.id+'"'+(U<X?' data-direction="reverse"':"")+' class="'+(P.name==V.name?"ui-btn-active ui-state-persist ":"")+P.id+'-link">';Y+=P.title;if(P.count){Y+='<span class="'+P.id+'-count ui-li-count ui-btn-up-c ui-btn-corner-all">?</span>'}Y+="</a>";Y+="</li>"}if(I){Y+='<li><a data-rel="popup" href="#menu_'+V.id+'">...</a>'}Y+="</ul>";Y+="</div>";Y+="</div>";Y+='<div data-role="content"></div>';if(I){Y+='<div data-role="popup" id="menu_'+V.id+'" data-theme="a" class="nav-menu">';Y+='<ul data-inset="true" data-theme="a">';for(var T=0;T<N.length;T++){var M=N[T];Y+="<li>";Y+='<a href="#'+M.id+'" class="'+(M.name==V.name?"ui-btn-active ":"")+M.id+'-link">';Y+=M.title;if(M.count){Y+='<span class="'+M.id+'-count ui-li-count ui-btn-up-c ui-btn-corner-all">?</span>'}Y+="</a>";Y+="</li>"}Y+="</ul>";Y+="</div>"}Y+='<div data-role="popup" id="main_menu_'+V.id+'" data-theme="a" class="main-nav-menu">';Y+="</div>";Y+="</div>";W+=Y}this.nodes.body.append(W);for(var R=0;R<N.length;R++){var O=N[R],L=$("#"+O.id),K=$("#main_menu_"+O.id),Z=this.get_template(O.id,true,true);O.nodes={links:$("a."+O.id+"-link"),page:L,header:L.children(":jqmData(role=header)").children("h3"),content:L.children(":jqmData(role=content)"),main_menu:K,refresh_control:$(),go_button:$(),favorite_control:$()};O.node=O.nodes.page;if(Z){O.nodes.content.prepend(Z.children)}O.view=A.View.get(O,this);this.pages[O.id]=O}});m.prototype.update_go_button=(function s(J,H){var I=J.nodes.go_button;if(I.length){I.find(".provider").text(this.controller[J.type].provider.name);I.toggleClass("ui-disabled",!H);I.attr("href",H||"")}});m.prototype.init_events=(function F(){var R=this;$(document).on("pagebeforechange",(function K(Z,Y){if(typeof Y.toPage!=="string"){return}if(Y.options.dataUrl){Y.options.dataUrl=Y.options.dataUrl.replace("?","!")}Y.options.allowSamePageTransition=true;if(Y.toPage==$.mobile.path.stripQueryParams(location.href.replace("!","?"))){Y.options.transition="none"}R.on_before_page_change(Z,Y)}));$(document).on("pagechange",(function H(ac,ab){R.update_fullscreen_control();if($.mobile.activePage&&$.mobile.activePage.hasClass("current_page")&&!$.mobile.activePage.hasClass("page_loaded")){$.mobile.loading("show")}try{var aa=R.pages[ab.toPage.data("url")],Z;R.update_favorite_control(aa);Z=R["get_real_"+aa.type+"_page"](aa.name,R.controller[aa.type]);aa.nodes.main_menu.data("go-button-url",Z);R.update_go_button(aa,Z)}catch(Y){}}));$(".nav-menu").on("popupafterclose",(function W(){var ab=$(this),aa=ab.find("a.ui-btn-active"),Y,Z;if(aa.length){Z=ab.parents(".ui-page");if(Z.length){Y=aa.attr("href");Z.find('.ui-header .ui-navbar a[href="'+Y+'"]').addClass("ui-btn-active")}}}));$(".nav-menu").on("popupbeforeposition",(function O(){var Y=$(this).children("ul");if(!Y.hasClass("ui-listview")){Y.listview()}}));$(".main-nav-menu").on("popupbeforeposition",(function J(){var Z=$(this),ab=$("#"+this.id+"_opener");ab.addClass("popup-opened");if(!Z.children().length){var aa=R.get_template("main-nav-menu");Z.append(aa.cloneNode(true));Z.trigger("create");var ac=R.pages[$.mobile.activePage.data("url")];ac.nodes.refresh_control=ac.nodes.main_menu.find(".refresh-control");ac.nodes.go_button=ac.nodes.main_menu.find(".go-button");R.update_go_button(ac,ac.nodes.main_menu.data("go-button-url"));ac.nodes.favorite_control=ac.nodes.main_menu.find(".favorite-control");R.update_favorite_control(ac);var Y=ac.nodes.main_menu.find(".auth-menu");Y.find(".ui-btn-text").text(R.controller.current_user?"Logout":"Login");if(R.controller.can_login){Y.show()}}}));$(".main-nav-menu").on("popupafterclose",(function P(){var Y=$("#"+this.id+"_opener");Y.removeClass("popup-opened")}));$(document).on("click",".events-list a.collapsible-trigger",(function M(ac){ac.preventDefault();ac.stopPropagation();var ab=$(this),Y=ab.parents("li"),ad,aa,ae,Z;if(!ab.hasClass("filled")){ab.addClass("filled");ae=Y[0].event_data;if(ae.provider["more_"+ae.event.type]){Z=ae.provider["more_"+ae.event.type](ae.event,ae.source);Y.append(Z);aa=Y.children(":last");aa.collapsible();R.render_widgets(aa);ab.data("collapsible",aa);setTimeout(function(){aa.trigger("expand")},100)}}else{ad=Y.hasClass("more-opened");aa=ab.data("collapsible");if(aa){aa.trigger(ad?"collapse":"expand")}}Y.toggleClass("more-opened",!ad);return false}));$(document).on("click",".events-list a.fetch-desc-trigger",(function Q(af){af.preventDefault();af.stopPropagation();var ah=$(this),ad=ah.data("repository"),ag=A.Models.repository.get(ad,R.controller),aa=(function ac(ak){$('p.ui-li-desc[data-fetching-repository="'+ad+'"]').each((function al(){var am=$(this);am.children().remove();am.append(ak)}))}),ai=(function Z(){var ak=$(this),al=ak.parent();al.children().remove();al.append("<em>loading...</em>").attr("data-fetching-repository",ad)}),aj=(function ae(al){var ak;ag.update_data("details",al);if(ag.details.description){ak="<strong>"+R.escape_html(ag.details.description)+" </strong>"}else{ak="<em>no description</em>"}aa(ak)}),ab=(function Y(ak){aa("<em>Loading failed! ("+R.get_error_text(ak)+') </em><a href="#" class="fetch-desc-trigger" data-repository="'+ag.id+'">Retry ?</a>')});$('a.fetch-desc-trigger[data-repository="'+ad+'"]').each(ai);if(ag.details_fetched){aj()}else{ag.fetch("details",aj,ab,null,"fail_if_404")}}));$(document).on("click","li.with-extension",(function U(Y){Y.preventDefault();Y.stopPropagation();$(this).toggleClass("extended");return false}));$(document).on("click",".refresh-control",(function T(ab){ab.preventDefault();ab.stopPropagation();var aa=R.pages[$.mobile.activePage.data("url")],Z=aa.view.accept_options?aa.view.get_options_from_form():null;aa.nodes.main_menu.popup("close");setTimeout((function Y(){$.mobile.loading("show");R.ask_for_page(aa.id,R.controller[aa.type].id,Z,"force")}),200)}));$(document).on("change",".favorite-control",(function I(aa){aa.preventDefault();aa.stopPropagation();var Z=R.pages[$.mobile.activePage.data("url")],Y=Z.view.accept_options?Z.view.get_options_from_form():null;Z.nodes.main_menu.popup("close");R.controller.toggle_favorite(R.controller[Z.type],Z,Y)}));$(window).on("scrollstop",R.load_visible_images);$(window).on("resize",R.load_visible_images);$.jStorage.listenKeyChange("favorites",function(Y,Z){R.controller.favorites=$.jStorage.get("favorites",[]);R.ask_for_favorites_redraw()});if(screenfull.enabled){$(document).on("change",".fullscreen-control",(function X(Y){$(this).parents(".main-nav-menu").popup("close");screenfull.toggle()}));screenfull.onchange=R.update_fullscreen_control}else{var V=$(".fullscreen-control");V.parents(".ui-checkbox").add(V.parents("label")).remove()}R.nodes.home.no_login_button.on("click",(function N(Y){Y.preventDefault();Y.stopPropagation();R.nodes.home.anonymous.fadeOut()}));R.nodes.home.login_button.on("click",(function L(Y){Y.preventDefault();Y.stopPropagation();R.login()}));$(document).on("click",".auth-menu",(function S(Z){Z.preventDefault();Z.stopPropagation();var Y=R.pages[$.mobile.activePage.data("url")];(Y?Y.nodes.main_menu:$.mobile.activePage.find(".main-nav-menu")).popup("close");if(R.controller.current_user){R.controller.logout()}else{R.login()}}))});m.prototype.load_visible_images=(function t(){var H,J=$("img[data-original]:in-viewport:visible");for(var I=0;I<J.length;I++){H=J[I];H.src=H.getAttribute("data-original");H.removeAttribute("data-original")}});m.prototype.update_fullscreen_control=(function z(){$(".fullscreen-control").attr("checked",screenfull.isFullscreen).each(function(){try{$(this).checkboxradio("refresh")}catch(H){}})});m.prototype.update_favorite_control=(function q(I){var H=this.controller.is_favorited(this.controller[I.type],I,I.view.accept_options?I.view.get_options_from_form():null);I.nodes.favorite_control.attr("checked",!!H).checkboxradio("refresh")});m.prototype.on_before_page_change=(function w(L,K){var I=$.mobile.path.parseUrl(K.toPage),H,J;if(I.hash&&K.options){H=I.hash.slice(1);if(this.pages[H]){J=this.pages[H];if(K.options.pageData&&K.options.pageData[J.type]){$.mobile.loading("show");this.ask_for_page(J.id,K.options.pageData[J.type],_.omit(K.options.pageData,J.type));return}}}if(J||!$(I.hash).length){$.mobile.changePage($("#home"));L.preventDefault()}if(I.hash=="#home"){this.refresh_home_favorites()}});m.prototype.is_page_for=(function p(I,J,H){var K=I.node.data("current-for");if(!K||K!=J.id){return false}if(I.view.accept_options&&I.node.data("current-options")!=$.param(H)){return false}return true});m.prototype.ask_for_page=(function e(P,N,O,I){N=N.replace(":","/");var L=this,M=this.pages[P],J=this.controller.set_current_object(M.type,N),K=this.controller[M.type],Q=M.view.accept_options?M.view.manage_options(O):{};$(".current_page, .page_loaded").removeClass("current_page page_loaded");M.node.addClass("current_page");M.node.data("title",M.nodes.header.text());if(!I&&this.is_page_for(M,K,Q)){this.post_render_page(M)}else{M.nodes.refresh_control.addClass("ui-disabled");M.view.reset(K);if(M.view.accept_options){M.node.data("current-options",$.param(Q))}M.node.data("current-for",K.id);K.fetch_full(M.method,(function H(){L.render_page(M,K,Q,I)}),Q,I)}});m.prototype.ask_for_more=(function i(K){var M=this,L=this.controller[K.type],I=K.view.options;L.fetch_more(K.method,(function H(N){if(!M.is_page_for(K,L,I)){return}K.view.complete(L,N);K.view.update_load_buttons(L);if(K.node.hasClass("current_page")){$.mobile.loading("hide")}}),I,(function J(){K.view.enable_load_buttons()}))});m.prototype.ask_for_all=(function k(L){var N=this,M=this.controller[L.type],J=L.view.options;M.fetch_all(L.method,(function I(O){if(!N.is_page_for(L,M,J)){return}L.view.complete(M,O)}),(function H(){if(!N.is_page_for(L,M,J)){return}if(L.node.hasClass("current_page")){L.view.hide_load_buttons();$.mobile.loading("hide")}}),J,(function K(){L.view.enable_load_buttons()}))});m.prototype.render_page=(function C(J,K,H,I){if(!this.is_page_for(J,K,H)){return}J.view.update(K,I);if(J.node.hasClass("current_page")){this["update_"+J.type+"_navbar"](K);this.post_render_page(J)}});m.prototype.post_render_page=(function E(H){$.mobile.loading("hide");H.node.addClass("page_loaded");H.nodes.refresh_control.removeClass("ui-disabled ui-btn-active")});m.prototype.render_widgets=(function g(H){H.find(":jqmData(role=listview)").listview();H.find(":jqmData(role=collapsible-set)").collapsibleset();H.find(":jqmData(role=collapsible)").collapsible();H.find(":jqmData(role=button)").button();H.find(":jqmData(role=table)").table()});m.prototype.create_events_list_items=(function v(M){var L=this.get_template("event-list-day"),I=this.get_template("event-list-item"),J=[],N=null,H,O;for(var K=0;K<M.length;K++){O=M[K];if(O.day!=N){H=L.cloneNode(true);H.innerHTML=O.day;N=O.day;J.push(H)}H=I.cloneNode(true);H.innerHTML=O.html;H.event_data={event:O.event,source:O.source,provider:O.provider};J.push(H)}return J});m.prototype.get_error_text=(function y(H){var I="";if(H){if(H.statusText){I=H.statusText}if(H.status){if(H.statusText){I+=" - "}I+=H.status}}if(!I){I="undefined error"}return I});m.prototype.confirm_new_fech=(function u(L,K,J,I){$.mobile.loading("hide");var H=confirm("Unable to fetch "+K+" ("+this.get_error_text(J)+"), retry ?");if(H){$.mobile.loading("show")}else{if(I){I()}else{switch(L){case"full":history.go(-1);break;case"more":case"all":}}}return H});m.prototype.get_template=(function x(J,I,L){var H,K;if(!this.templates[J]){H=this.templates_container.find("[data-template-for="+J+"]")[0];K=document.createElement("div");K.innerHTML=H.childNodes[0].nodeValue;if(!L){K=K.removeChild(K.children[0])}H.parentNode.removeChild(H);this.templates[J]=K}K=this.templates[J];if(I){delete this.templates[J]}return K});m.prototype.clear_listview=(function n(I,J,H){I.children(":not(.ui-li-divider)").remove();if(J){I.append('<li class="failover">'+J+"</li>")}if(H){I.listview("refresh")}});A.Display=m;m.prototype.get_favorites_items=(function o(){var I=[],J,H,K,L;if(!this.controller.favorites.length){this.controller.favorites=[{hash:"#account_home!account=twidi@github",model:"account",ref:"twidi",avatar_url:"https://secure.gravatar.com/avatar/4929cd99d0f54b7fa03081f9ab8bb0d4",provider:"github"},{hash:"#repository_home!repository=twidi:repos.io-mobile@github",model:"repository",ref:"twidi/repos.io-mobile",avatar_url:"https://secure.gravatar.com/avatar/4929cd99d0f54b7fa03081f9ab8bb0d4",description:"A mobile application for Github",provider:"github"}];if(!$.jStorage.get("favorites-managed")){$.jStorage.set("favorites",this.controller.favorites)}}for(J=0;J<this.controller.favorites.length;J++){H=this.controller.favorites[J];L={name:H.provider};switch(H.model){case"account":K={login:H.ref};if(H.title){K.login+=" - "+H.title}if(H.avatar_url){K.avatar_url=H.avatar_url}I.push(this.create_account_list_item(K,L,H.hash));break;case"repository":K={full_name:H.ref,is_fork:H.is_fork,description:H.description};if(H.title){K.full_name+=" - "+H.title}if(H.avatar_url){K.user={avatar_url:H.avatar_url}}I.push(this.create_repository_list_item(K,L,H.hash));break}}return I});m.prototype.ask_for_favorites_redraw=(function D(){this.need_favorites_redraw=true;if($.mobile.activePage.data("url")=="home"){this.refresh_home_favorites()}});m.prototype.refresh_home_favorites=(function b(){if(!this.need_favorites_redraw){return}var I=this,H=this.get_favorites_items();this.clear_listview(this.nodes.home.favorites);this.nodes.home.favorites.append(H);this.need_favorites_redraw=false;setTimeout(I.load_visible_images,500);setTimeout(I.load_visible_images,1000);setTimeout(I.load_visible_images,2000)});m.prototype.login=(function f(){window.open(this.controller.providers.github.login_url($.mobile.path.makeUrlAbsolute("github_login.html")))});m.prototype.logout=(function a(){this.toggle_auth_infos()});m.prototype.toggle_auth_infos=(function d(){if(!this.controller.can_login){return}var H=!!this.controller.current_user;$(".auth-menu .ui-btn-text, .auth-menu:not(.ui-btn)").text(H?"Logout":"Login");if(H){this.nodes.home.anonymous.fadeOut();this.nodes.home.username.html(", <strong>"+this.controller.current_user.username+"</strong>");this.nodes.home.username.show()}else{this.nodes.home.anonymous.fadeIn();this.nodes.home.username.hide();this.nodes.home.username.html("")}});m.prototype.login_success=(function c(){this.toggle_auth_infos();alert("You are now identified as "+this.controller.current_user.username)});m.prototype.login_fail=(function l(){alert("Something goes wrong and we couldn't complete the authentication.")})})(Reposio);(function(f){f.Display.prototype.pages_list.account=[{id:"home",title:"Details",method:"details"},{id:"repositories",title:"Repos",count:true},{id:"activity",method:"own_events"},{id:"members",method:"org_members"},{id:"stars"},{id:"following",count:true},{id:"followers",count:true},{id:"events",title:"Following activity",method:"received_events"}];f.Display.prototype.change_account=(function a(){$(".account_repositories-count").hide();$(".account_followers-count").hide();$(".account_following-count").hide();for(var k=0;k<this.pages_list.account.length;k++){var l=this.pages_list.account[k];for(var h=0;h<l.nodes.links.length;h++){l.nodes.links[h].href="#"+l.id+"!account="+this.controller.account.id}l.nodes.header.html(this.controller.account.username+" - "+l.title);l.node.removeData("current-for")}});f.Display.prototype.account_link=(function c(k,j,i){var h='<a class="account-link" href="#account_home!account='+k+"@"+j+'">';h+=k;if(i){h+='<img class="avatar-small avatar-small-after" src="'+i+'" />'}h+="</a>";return h});f.Display.prototype.create_account_list_item=(function g(l,n,i){var p=this.get_template("account-list-item"),q=p.cloneNode(true),o=q.getElementsByTagName("a")[0],h=o.children,k=h[0],m=h[1],j=[];o.href=i||"#account_home!account="+l.login+"@"+n.name;m.innerHTML=l.login;k.setAttribute("data-original",l.avatar_url);if(l.html_prepend){$(o).prepend(l.html_prepend)}return q});f.Display.prototype.create_accounts_list_items=(function d(k,l){var h=[];for(var j=0;j<k.length;j++){h.push(this.create_account_list_item(k[j],l))}return h});f.Display.prototype.update_account_navbar=(function e(i){var h=i.is_organization();$(".go-button").find(".provider").html(i.provider.name);$(".account_members-link").closest("li").toggle(h);$(".account_repositories-count").html(i.details?i.details.repos_count:"?").show();$(".account_followers-count").html(i.details?i.details.followers_count:"?").show();$(".account_following-count").html(i.details?i.details.following_count:"?").show()});f.Display.prototype.get_real_account_page=(function b(h,j){var i=j.is_organization();switch(h){case"home":return"https://github.com/"+j.username;case"repositories":return"https://github.com/"+j.username+"?tab=repositories";case"activity":return i?null:"https://github.com/"+j.username+"?tab=activity";case"followers":return"https://github.com/"+j.username+"/followers";case"stars":case"following":return"https://github.com/"+j.username+"/following";case"members":return i?"https://github.com/"+j.username+"?tab=members":null}return null})})(Reposio);(function(e){e.Display.prototype.pages_list.repository=[{id:"home",title:"Details",method:"details"},{id:"activity"},{id:"contributors"},{id:"forks",count:true},{id:"stars",count:true}];e.Display.prototype.change_repository=(function b(){$(".repository_forks-count").hide();$(".repository_stars-count").hide();for(var k=0;k<this.pages_list.repository.length;k++){var l=this.pages_list.repository[k];for(var h=0;h<l.nodes.links.length;h++){l.nodes.links[h].href="#"+l.id+"!repository="+this.controller.repository.id.replace("/",":")}l.nodes.header.html(this.controller.repository.path+" - "+l.title);l.node.removeData("current-for")}});e.Display.prototype.repository_link=(function a(h,i){var j=h.replace("/",":");return'<a class="repo-link" href="#repository_home!repository='+j+"@"+i+'">'+h+"</a>"});e.Display.prototype.create_repository_list_item=(function d(o,p,i){var r=this.get_template("repository-list-item"),u=o.full_name||o.name,s=r.cloneNode(true),q=s.getElementsByTagName("a")[0],h=q.children,j=h[1].children,m=j[0],k=j[1],n=h[2],t=h[3],l=[];q.href=i||"#repository_home!repository="+u.replace("/",":")+"@"+p.name,k.innerHTML=u;if(o.user&&o.user.avatar_url){m.setAttribute("data-original",o.user.avatar_url)}if(o.description){n.innerHTML=o.description}else{l.push("no-desc")}if(!o.is_fork){l.push("no-fork")}if(o.pushed_at){t.getElementsByTagName("span")[0].innerHTML=this.format_date(o.pushed_at,true)}else{l.push("no-date")}if(l.length){s.className+=" "+l.join(" ")}return s});e.Display.prototype.create_repositories_list_items=(function g(k,l){var h=[];for(var j=0;j<k.length;j++){h.push(this.create_repository_list_item(k[j],l))}return h});e.Display.prototype.update_repository_navbar=(function c(h){$(".go-button").find(".provider").html(h.provider.name);$(".repository_forks-count").html(h.details?h.details.forks_count:"?").show();$(".repository_stars-count").html(h.details?h.details.watchers_count:"?").show()});e.Display.prototype.get_real_repository_page=(function f(h,i){switch(h){case"home":case"activity":return"https://github.com/"+i.path;case"contributors":return"https://github.com/"+i.path+"/contributors";case"forks":return"https://github.com/"+i.path+"/network";case"stars":return"https://github.com/"+i.path+"/stargazers"}return null})})(Reposio);(function(k){k.Models={};k.Models.base=Class.$extend({__classvars__:{model_name:null,fields:{},cache:{},default_params:{},fetchable_params:{},get:(function p(t,s){if(!this.cache[this.model_name]){this.cache[this.model_name]={}}if(!this.cache[this.model_name][t]){this.cache[this.model_name][t]=new this(t,s)}return this.cache[this.model_name][t]}),save_many_from_events:(function q(v,z,s){var x,y,w,t;for(var u=0;u<v.length;u++){x=v[u];if(x.actor&&x.actor.login&&x.actor.avatar_url){y=k.Models.account.get(x.actor.login+"@"+z.name,s);y.update_data("details",x.actor)}if(x.repository&&x.repository.full_name&&(x.repository.description||x.repository.pushed_at)){if(x.repository.full_name.indexOf("/")!=-1){w=k.Models.repository.get(x.repository.full_name+"@"+z.name,s);w.update_data("details",x.repository)}}if(x.type=="ForkEvent"&&x.forkee){w=k.Models.repository.get(x.forkee.full_name+"@"+z.name,s);w.update_data("details",x.forkee)}}})},__init__:(function b(v,s){var u=v.split("@");this.id=v;this.ref=u[0];this.provider=s.providers[u[1]];this.controller=s;this.list_page_status={};this.details_fetched=false;for(var t in this.__classvars__.fields){if(this.__classvars__.fields[t] instanceof Array){this[t]={};this.list_page_status[t]={__global__:{all:false}}}else{this[t]=null}}}),is_type_list:(function e(s){return(this.$class.fields[s] instanceof Array)}),is_type_string:(function h(s){return(this.$class.fields[s]==="")}),update_data:(function r(s,t,u){if(this.is_type_list(s)){this[s][u||""]=t}else{if(this.is_type_string(s)){this[s]=t}else{if(this[s]===null){this[s]={}}this[s]=$.extend(this[s],t)}}}),get_list:(function l(x,u,y){var w=this.filter_fetchable_params(x,u);if(this["sort_and_filter_"+x]){var t=this.list_page_status[x].__global__.all;if(!t){var v=this.filter_unfetchable_params(x,u);if(!_.isEmpty(v)){y=y||this[x][$.param(w)];t=true}}if(t){var s=this["sort_and_filter_"+x](u,y);if(s!==null){return s}}}return y||this[x][$.param(w)]}),filter_fetchable_params:(function m(s,t){t=t||{};if(this.$class.fetchable_params[s]){return _.pick(t,this.$class.fetchable_params[s])}else{return t}}),filter_unfetchable_params:(function o(s,t){t=t||{};if(this.$class.fetchable_params[s]){return _.omit(t,this.$class.fetchable_params[s])}else{return{}}}),fetch:(function j(u,x,t,w,v){var s=this;w=w||{};if(this.$class.default_params[u]){w=$.extend({},this.$class.default_params[u],w);delete w.max_pages}s.provider["get_"+s.$class.model_name+"_"+u](s.ref,function(y,z){if(y&&y.status==404&&!v){z=s.$class.fields[u];y=null}if(y){if(t){t(y)}}else{if(x){x(z)}}},w)}),fetched:(function c(s,t){if(this.is_type_list(s)){if(this.list_page_status[s].__global__.all){return true}return(typeof this[s][t]!="undefined")}else{if(s=="details"){return this.details_fetched}else{return(this[s]!==null)}}}),fetch_full:(function i(u,y,x,v,t){var s=this,w;x=this.filter_fetchable_params(u,x);w=$.param(x);if(u!="details"&&!s.fetched("details","")){s.fetch_full("details",function(){s.fetch_full(u,y,x,v)});return}if(v&&this.list_page_status[u]){s.list_page_status[u].__global__={all:false}}if(v||!s.fetched(u,w)){s.fetch(u,function(z){if(u=="details"){s.details_fetched=true}s.update_data(u,z,w);if(s.is_type_list(u)){s.update_list_page_status(u,x,1,z?z.length||0:0)}y()},function(z){s.controller.fetch_full_error(z,s,u,y,x,v,t)},x,"fail_if_404")}else{y()}}),update_list_page_status:(function f(y,v,z,t){var w=this.$class.default_params[y]||{},A=$.param(v),s=w.max_pages||null,u=w.per_page||null,x=true;if(!t){x=false}else{if(s&&z>=s){x=false}else{if(u&&t<u){x=false}}}this.list_page_status[y][A]={last_page:z,maybe_more:x};if(x){this.list_page_status[y].__global__={all:false}}else{this.list_page_status[y].__global__={all:true,params:v,str_params:A};if(this["manage_global_for_"+y]){this["manage_global_for_"+y]()}}}),_fetch_more:(function a(u,y,x,t){var s=this,w,v;y=this.filter_fetchable_params(u,y);w=$.param(y);v=$.extend({},y,{page:s.list_page_status[u][w].last_page+1});s.fetch(u,function(z){s[u][w]=s[u][w].concat(z);s.update_list_page_status(u,y,v.page,z?z.length||0:0);x(z)},t,v)}),fetch_more:(function g(u,w,v,t){var s=this;this.list_page_status[u].__global__={all:false};this._fetch_more(u,v,w,function(x){s.controller.fetch_more_error(x,s,u,w,v,t)})}),fetch_all:(function d(y,t,z,w,A){var x=this,B;w=this.filter_fetchable_params(y,w);B=$.param(w);x.list_page_status[y].__global__={all:false};var v=function(C){t(C);if(x.list_page_status[y][B].maybe_more){s()}else{z()}};var u=function(C){x.controller.fetch_all_error(C,x,y,t,z,w,A)};var s=function(){x._fetch_more(y,w,v,u)};s()}),sort_and_filter_events:(function n(t,u){var v=t.mode==="display",s,w;if(!t.type){return v?u:[]}s=v?_.filter:_.reject;w=t.type.split(",");return s(u,function(x){return(w.indexOf(x.type)!==-1)})})})})(Reposio);(function(g){g.Models.account=g.Models.base.$extend({__classvars__:{model_name:"account",fields:{details:{},repositories:[],stars:[],own_events:[],received_events:[],followers:[],following:[],org_members:[],orgs:[]},default_params:{repositories:{per_page:50},stars:{per_page:50},own_events:{per_page:30,max_pages:10},received_events:{per_page:30,max_pages:10},followers:{per_page:50},following:{per_page:50},org_members:{per_page:50}},fetchable_params:{repositories:["direction","sort","type"],stars:["direction","sort"],own_events:[],received_events:[]},sort_and_filter_helpers:{repositories:{filter_type:(function m(q){return(q.user.login==this.username)}),filter_type_method:{member:_.reject,owner:_.filter},filter_forks:(function f(q){return q.is_fork}),filter_forks_method:{no:_.reject,yes:_.filter},filter_language:(function l(q){return(q.language&&q.language==this)}),sort_field:{created:"created_at",pushed:"pushed_at",updated:"updated_at",full_name:"full_name"}},stars:{sort_field:{created:"starred_order",updated:"pushed_at"},filter_forks:(function j(q){return q.is_fork}),filter_forks_method:{no:_.reject,yes:_.filter},filter_language:(function d(q){return(q.language&&q.language==this)})}},save_many:(function c(s,u,q){var t;for(var r=0;r<s.length;r++){t=g.Models.account.get(s[r].login+"@"+u.name,q);t.update_data("details",s[r])}})},__init__:(function e(r,q){this.$super(r,q);this.username=this.ref}),update_data:(function i(q,r,s){this.$super(q,r,s);switch(q){case"repositories":case"stars":g.Models.repository.save_many(r,this.provider,this.controller);break;case"followers":case"following":case"org_members":g.Models.account.save_many(r,this.provider,this.controller);break;case"orgs":g.Models.account.save_many(_.map(r,function(t){t.type="Organization";return t}),this.provider,this.controller);break;case"own_events":case"received_events":g.Models.base.save_many_from_events(r,this.provider,this.controller);break}}),manage_global_for_repositories:(function k(){var q=this.list_page_status.repositories.__global__;if(q.params.type!="all"){q.all=false}}),sort_and_filter_repositories:(function p(q,u){var s=this.list_page_status.repositories.__global__,r=this.$class.sort_and_filter_helpers.repositories,t=u||this.repositories[s.str_params];if(q.type&&q.type!="all"){t=r.filter_type_method[q.type](t,r.filter_type,this)}if(q.forks&&q.forks!="all"){t=r.filter_forks_method[q.forks](t,r.filter_forks)}if(q.language){t=_.filter(t,r.filter_language,q.language=="CSharp"?"C#":q.language)}if(u||q.sort!=s.params.sort){t=_.sortBy(t,r.sort_field[q.sort]);if(q.direction=="desc"){t.reverse()}}else{if(q.direction!=s.params.direction){t.reverse();if(q.type=="all"){s.params.direction=q.direction}}}return t}),manage_global_for_stars:(function o(){var q=this.list_page_status.stars.__global__;if(q.params.sort!="created"){q.all=false}}),sort_and_filter_stars:(function n(q,v){var t=this.list_page_status.stars.__global__,s=this.$class.sort_and_filter_helpers.stars,u=v||this.stars[t.str_params],w;if((!t.all&&q.sort=="created")||(t.all&&!t.default_order_saved)){if(t.all){t.default_order_saved=true}if((t.all?t.params:q).direction=="desc"){u.reverse();if(t.all){t.params.direction="asc"}}var r=t.all?"":_.uniqueId();_.each(u,function(y,x){y.starred_order=r+x});if(!t.all&&q.direction=="desc"){u.reverse()}}if(q.language){u=_.filter(u,s.filter_language,q.language=="CSharp"?"C#":q.language)}if(q.forks&&q.forks!="all"){u=s.filter_forks_method[q.forks](u,s.filter_forks,this)}if(v||q.sort!=t.params.sort){u=_.sortBy(u,s.sort_field[q.sort]);if(q.direction=="desc"){u.reverse()}}else{if(q.direction!=t.params.direction){u.reverse();t.params.direction=q.direction}}return u}),sort_and_filter_own_events:(function b(q,t){var r=this.list_page_status.own_events.__global__,s=t||this.own_events[r.str_params];return this.sort_and_filter_events(q,s)}),sort_and_filter_received_events:(function h(q,t){var r=this.list_page_status.received_events.__global__,s=t||this.received_events[r.str_params];return this.sort_and_filter_events(q,s)}),is_organization:(function a(){return(this.details&&this.details.type&&this.details.type=="Organization")})})})(Reposio);(function(d){d.Models.repository=d.Models.base.$extend({__classvars__:{model_name:"repository",fields:{details:{},readme:"",activity:[],forks:[],stars:[],contributors:[]},default_params:{activity:{per_page:30,max_pages:10},forks:{per_page:50},stars:{per_page:50},contributors:{per_page:100}},fetchable_params:{forks:["sort"],activity:[]},sort_and_filter_helpers:{forks:{sort_field:{newest:"created_at",oldest:"created_at",watchers:"watchers_count"},filter_never_updated:(function g(h){return h.pushed_at<=h.created_at})}},save_many:(function f(k,m,h){var l;for(var j=0;j<k.length;j++){l=d.Models.repository.get(k[j].full_name+"@"+m.name,h);l.update_data("details",k[j])}})},__init__:(function b(j,h){this.$super(j,h);this.path=this.ref;this.href_id=this.id.replace("/",":");var i=this.path.split("/");this.details={name:i[1],user:{login:i[0]}}}),update_data:(function c(i,j,k){this.$super(i,j,k);switch(i){case"details":var h=d.Models.account.get(this.details.user.login+"@"+this.provider.name,this.controller);if(j.user){h.update_data("details",j.user)}break;case"forks":d.Models.repository.save_many(j,this.provider,this.controller);break;case"stars":case"contributors":d.Models.account.save_many(j,this.provider,this.controller);break;case"activity":d.Models.base.save_many_from_events(j,this.provider,this.controller);break}}),sort_and_filter_forks:(function a(h,l){var j=this.list_page_status.forks.__global__,i=this.$class.sort_and_filter_helpers.forks,k=l||this.forks[j.str_params];if(h.never_updated=="hide"){k=_.reject(k,i.filter_never_updated)}k=_.sortBy(k,i.sort_field[h.sort]);if(h.sort!="oldest"){k.reverse()}return k}),sort_and_filter_activity:(function e(h,k){var i=this.list_page_status.activity.__global__,j=k||this.activity[i.str_params];return this.sort_and_filter_events(h,j)})})})(Reposio);(function(W){var i=(function k(ap){this.provider=ap});i.prototype.format=(function C(aq,ar){if(aq.type&&this[aq.type]){var ap=this[aq.type](aq,ar);if(!ap){ap=this.base_format(aq,ar,"<em>("+aq.type.replace("Event","").toLowerCase()+")</em>")}return{event:aq,source:ar,provider:this,html:ap,day:this.provider.controller.display.format_date(aq.created_at)}}return null});i.prototype.format_actor=(function Q(ar,at,aq){var ap='<a class="account-link'+(aq?" main-link":"")+'" href="#account_home!account='+ar.login+"@"+at.provider.name+'">';if(ar.avatar_url){ap+='<img class="avatar-small" src="img/default-avatar.png" data-original="'+ar.avatar_url+'" />'}ap+=ar.login;ap+="</a>";return ap});i.prototype.format_repo=(function u(au,at,av,aq,ar){var aw=au.full_name.split("/"),ap;ap='<a class="repo-link'+(aq?" main-link":"")+'" href="#repository_home!repository='+au.full_name.replace("/",":")+"@"+av.provider.name+'">'+aw[1]+"</a>";if(ar||at.login!=aw[0]&&(av.$class.model_name!="account"||av.username!=aw[0])){ap+=" by "+this.format_actor({login:aw[0]},av)}return ap});i.prototype.base_format=(function aa(au,av,ar,ax,aw,aq){var ap,at;ap='<p class="ui-li-aside">'+this.provider.controller.display.format_date(au.created_at,"show-time",null,"time-only")+"</p>";if(!aw&&au.repository&&au.repository.full_name){aw=this.format_repo(au.repository,au.actor,av,"main")}at=this.format_actor(au.actor,av,"main")+" "+ar;if(aw){at+=" "+aw}ap+='<div class="event-main">'+at+"</div>";if(aq){ap+=this.format_external_link(aq)}if(ax){ap+='<p class="ui-li-desc">'+ax+"</p>"}return ap});i.prototype.markdown_event_more=(function x(ap){if(!ap){return""}result='<div class="markdown">';result+=marked(ap,{sanitize:true,breaks:true,smartLists:true});result+="</div>";return result});i.prototype.trigger_text=(function M(aq,ap){if(ap){return'<a href="#" class="collapsible-trigger">'+aq+"</a>"}else{return aq}});i.prototype.more=(function am(aq){var ap='<div data-role="collapsible" data-content-theme="d" data-corners="false" data-mini="true" class="event-more"><h3>More</h3>';ap+=aq;ap+="</div>";return ap});i.prototype.description_fetcher=(function B(ar,at,ap){var au,aq;if(!ap){ap=ar.repository}if(ap.full_name&&(!at.path||ap.full_name!=at.path)){aq=W.Models.repository.get(ap.full_name+"@github",this.provider.controller);if(typeof(ap.description)!="undefined"){aq.update_data("details",ap)}au="Description: ";if(aq.details&&aq.details.description){au+="<strong>"+this.provider.controller.display.escape_html(aq.details.description)+"</strong>"}else{if(aq.details_fetched){au+="<em>no description</em>"}else{au+='<a href="#" class="fetch-desc-trigger" data-repository="'+aq.id+'">click to fetch</a>'}}}return au});i.prototype.format_external_link=(function F(ap){var aq='<a class="ui-li-link-alt ui-btn ui-btn-icon-notext ui-btn-up-c" data-theme="c" href="'+ap+'" target="_blank">';aq+='<span class="ui-btn ui-btn-icon-notext">';aq+='<span class="ui-btn-inner">';aq+='<span class="ui-icon ui-icon-arrow-r">&nbsp;</span>';aq+="</span>";aq+="</span>";aq+="</a>";return aq});i.prototype.CommitCommentEvent=(function o(aq,ar){var ap=this.trigger_text("commented",aq.comment.body)+" a commit on";return this.base_format(aq,ar,ap,null,null,aq.comment.html_url)});i.prototype.more_CommitCommentEvent=(function S(ap,aq){return this.more(this.markdown_event_more(ap.comment.body))});i.prototype.CreateEvent=(function ac(ar,at){var ap="created",au,aq;switch(ar.ref_type){case"branch":ap+=" a branch on";au="Branch: <strong>"+ar.ref+"</strong>";aq="https://github.com/"+ar.repository.full_name+"/tree/"+ar.ref;break;case"repository":if(ar.description){au="Description: <strong>"+ar.description+"</strong>"}aq="https://github.com/"+ar.repository.full_name;break;case"tag":ap+=" a tag on";au="Tag: <strong>"+ar.ref+"</strong>";aq="https://github.com/"+ar.repository.full_name+"/tree/"+ar.ref;break}return this.base_format(ar,at,ap,au,null,aq)});i.prototype.DeleteEvent=(function af(aq,ar){var ap="deleted",at;switch(aq.ref_type){case"branch":ap+=" a branch on";at="Branch: <strong>"+aq.ref+"</strong>";break;case"tag":at="Tag: <strong>"+aq.ref+"</strong>";break}return this.base_format(aq,ar,ap,at)});i.prototype.DownloadEvent=(function s(ap,aq){});i.prototype.FollowEvent=(function L(ap,aq){var ar=this.format_actor(ap.target,aq);return this.base_format(ap,aq,"started following",null,ar)});i.prototype.ForkEvent=(function T(aq,ar){var ap=this.trigger_text("forked",aq.forkee),at=this.description_fetcher(aq,ar,aq.forkee);return this.base_format(aq,ar,ap,at)});i.prototype.more_ForkEvent=(function ag(ap,aq){return this.more("<p>Fork: "+this.format_repo(ap.forkee,ap.actor,aq,null,true)+"</p>")});i.prototype.ForkApplyEvent=(function a(ap,aq){return this.base_format(ap,aq,"applied the fork queue to")});i.prototype.GistEvent=(function v(aq,at){var ar=aq.action,ap,au;if(!ar.match(/d$/)){if(!ar.match(/e$/)){ar+="e"}ar+="d"}ap=ar+" a gist";if(aq.gist.description){au="Description: <strong>"+aq.gist.description+"</strong>"}return this.base_format(aq,at,ap,au,null,aq.gist.html_url)});i.prototype.GollumEvent=(function ak(ar,at){var au=this.format_repo(ar.repository,ar.actor,at),ap=this.trigger_text("edited",true)+" the "+au+" wiki",aq="https://github.com/"+ar.repository.full_name+"/wiki";return this.base_format(ar,at,ap,null," ",aq)});i.prototype.more_GollumEvent=(function an(ar,au){var aq='<ul data-role="listview" data-theme="d">';for(var ap=0;ap<ar.pages.length;ap++){var at=ar.pages[ap];aq+="<li>";aq+="<em>"+at.title+"</em> — <strong>"+at.action+"</strong>";aq+="</li>"}aq+="</ul>";return this.more(aq)});i.prototype.IssueCommentEvent=(function X(ar,at){var ap,au=(ar.is_pull_request?"Pull request":"Issue")+": <strong>#"+ar.issue.number+" - "+ar.issue.title+"</strong>",aq;if(ar.action=="created"){ap=this.trigger_text("commented",ar.comment.body);ap+=" "+(ar.is_pull_request?"a pull request":"an issue")+" on"}else{ap=ar.action+" a ";ap+=this.trigger_text("comment",ar.action!="deleted"&&ar.comment.body);ap+=" on an issue on"}if(ar.comment.html_url){aq=ar.comment.html_url}else{if(ar.issue.html_url&&ar.comment.id){aq=ar.issue.html_url+"#issuecomment-"+ar.comment.id}}return this.base_format(ar,at,ap,au,null,aq)});i.prototype.more_IssueCommentEvent=(function p(ap,aq){return this.more(this.markdown_event_more(ap.comment.body))});i.prototype.IssuesEvent=(function A(aq,ar){var ap=aq.action+" an "+this.trigger_text("issue",aq.issue.body)+" on",at="Issue <strong>#"+aq.issue.number+" - "+aq.issue.title+"</strong>";return this.base_format(aq,ar,ap,at,null,aq.issue.html_url)});i.prototype.more_IssuesEvent=(function E(ap,aq){return this.more(this.markdown_event_more(ap.issue.body))});i.prototype.MemberEvent=(function O(aq,ar){var ap=aq.action+" ";ap+=this.format_actor(aq.member,ar);ap+=" as a member "+(aq.action=="added"?"to":"from");return this.base_format(aq,ar,ap)});i.prototype.PublicEvent=(function N(ap,aq){return this.base_format(ap,aq,"open sourced")});i.prototype.PullRequestEvent=(function V(aq,ar){var ap=aq.action+" a "+this.trigger_text("pull request",aq.pull_request.body)+" on",at="Pull request <strong>#"+aq.pull_request.number+" - "+aq.pull_request.title+"</strong>";return this.base_format(aq,ar,ap,at,null,aq.pull_request.html_url)});i.prototype.more_PullRequestEvent=(function g(ap,aq){return this.more(this.markdown_event_more(ap.pull_request.body))});i.prototype.PullRequestReviewCommentEvent=(function z(aq,ar){var ap=this.trigger_text("commented",aq.comment.body)+" a pull request on",at;if(aq.pull_request.number){at="Pull request <strong>#"+aq.pull_request.number+"</strong>"}return this.base_format(aq,ar,ap,at,null,aq.comment.html_url)});i.prototype.more_PullRequestReviewCommentEvent=(function r(ap,aq){return this.more(this.markdown_event_more(ap.comment.body))});i.prototype.PushEvent=(function aj(ar,at){var ap="pushed "+(ar.size?this.trigger_text(ar.size+" commit"+(ar.size>1?"s":""),true):"")+" to",au,aq;if(ar.ref&&ar.ref.indexOf("refs/heads/")===0){au="Branch: <strong>"+ar.ref.replace("refs/heads/","")+"</strong>"}if(ar.size==1){aq="https://github.com/"+ar.repository.full_name+"/commit/"+ar.commits[0].sha}else{if(ar.before&&ar.head){aq="https://github.com/"+ar.repository.full_name+"/compare/"+ar.before+"..."+ar.head}}return this.base_format(ar,at,ap,au,null,aq)});i.prototype.more_PushEvent=(function f(av,aw){var au='<ul data-role="listview" data-theme="d">';for(var at=0;at<av.commits.length;at++){var ax=av.commits[at],ap=ax.message.split("\n"),ar=ap.shift(),aq=ap.length?"<br />"+ap.join("<br />"):"";au+="<li"+(aq.length?' class="with-extension"':"")+">";au+="<strong>"+ax.author.name+"</strong>";au+=" — <em>";au+=ar;if(aq){au+='<span class="extension">'+aq+"</span>"}au+="</em>";au+="</li>"}au+="</ul>";return this.more(au)});i.prototype.TeamAddEvent=(function K(ap,aq){});i.prototype.WatchEvent=(function e(aq,ar){var ap=aq.action+" watching",at=this.description_fetcher(aq,ar);return this.base_format(aq,ar,ap,at)});var ah=(function n(ap){this.conf=(providers_config?providers_config.github||{}:{});this.name="github";if(this.conf.auth=="oauth"&&this.conf.token){this.set_token(this.conf.token)}Gh3.Helper.cache=false;this.controller=ap;this.formatter=new i(this)});ah.prototype.set_token=(function q(ap){this.conf.token=ap;if(ap){Gh3.Helper.headers.Authorization="token "+ap}else{if(Gh3.Helper.headers.Authorization){delete Gh3.Helper.headers.Authorization}}});ah.prototype.init_auth=(function H(ar){if(!ar||ar.provider!=this.name||!ar.token){return false}this.set_token(ar.token);var aq=this,ap=new Gh3.CurrentUser();ap.fetch(function(au,at){if(au||!at){aq.set_token(null);aq.controller.logout()}});return true});ah.prototype.can_login=(function D(){return !!(this.conf.auth=="oauth"&&this.conf.client_id&&this.conf.token_script)});ah.prototype.login_url=(function ad(ap){this.conf.last_state=Math.random();var aq="https://github.com/login/oauth/authorize?scope=public_repo,user:follow&client_id=";aq+=this.conf.client_id;aq+="&redirect_uri="+escape(ap);aq+="&state="+this.conf.last_state;return aq});ah.prototype.check_login=(function U(at,aq,au){var ar=this,ap=this.conf.last_state;delete this.conf.last_state;if(at.error||!at.code||!at.state||at.state!=ap){return au()}$.ajax({url:this.conf.token_script+"?code="+escape(at.code),dataType:"json"}).done(function(aw){if(aw.error||!aw.token){return au()}ar.set_token(aw.token);var av=new Gh3.CurrentUser();av.fetch(function(ay,ax){if(!ay&&ax){aq(ar.map_account(ax),{token:aw.token})}else{au()}})}).fail(au)});ah.prototype.get_user=(function R(ap){return new Gh3.User(ap)});ah.prototype.get_repo=(function I(aq){var ap=aq.split("/");return new Gh3.Repository(ap[1],this.get_user(ap[0]))});ah.prototype.map_type={accounts:"account",repositories:"repository",events:"event"};ah.prototype.decorate_collback=(function d(at,ap,aq){var ar=this;return function(av,aw){var au;if(!av){switch(aq){case"field":au=aw[ap];break;case"repositories":case"accounts":case"events":au=_.map(aw[ap].getAll(),ar["map_"+ar.map_type[aq]],ar);break;default:au=aw[ap].getAll()}}at(av,av?null:au)}});ah.prototype.map=(function Z(au,ar){var aq={},ap;if(au){for(var at=0;at<ar._.length;at++){ap=ar._[at];if(typeof(au[ap])=="undefined"){continue}aq[ar[ap]||ap]=au[ap]}}return aq});ah.prototype.account_mapping={_:["login","type","avatar_url","name","created_at","company","location","email","blog","public_repos","followers_count","following_count","contributions"],blog:"site",public_repos:"repos_count"};ah.prototype.map_account=(function m(aq){var ap={};if(aq){ap=this.map(aq,this.account_mapping)}return ap});ah.prototype.repository_mapping={_:["name","full_name","description","pushed_at","created_at","updated_at","forks_count","fork","watchers_count","language"],fork:"is_fork"};ah.prototype.map_repository=(function y(aq){var ap={};if(aq){ap=this.map(aq,this.repository_mapping);if(aq.fork&&aq.parent){ap.parent=this.map_repository(aq.parent)}if(aq.user){ap.user=this.map_account(aq.user)}}return ap});ah.prototype.map_event=(function c(au){var ap={},aw;if(au){aw=au.payload||{};switch(au.type){case"CommitCommentEvent":ap.comment=this.map(aw.comment,{_:["body","html_url"]});break;case"CreateEvent":ap=this.map(aw,{_:["ref_type","ref","description"]});break;case"DeleteEvent":ap=this.map(aw,{_:["ref_type","ref"]});break;case"FollowEvent":if(aw.target&&aw.target.login){ap.target={login:aw.target.login}}break;case"ForkEvent":if(aw.forkee&&isNaN(aw.forkee)){ap.forkee=this.map_repository(aw.forkee)}break;case"GistEvent":ap=this.map(aw,{_:["action"]});ap.gist=this.map(aw.gist,{_:["description","html_url"]});break;case"GollumEvent":ap.pages=[];if(aw.pages&&aw.pages.length){for(var ax=0;ax<aw.pages.length;ax++){ap.pages.push(this.map(aw.pages[ax],{_:["title","action"]}))}}break;case"IssueCommentEvent":ap=this.map(aw,{_:["action"]});ap.issue=this.map(aw.issue,{_:["number","title","html_url"]});ap.issue.is_pull_request=(aw.issue&&aw.issue.pull_request&&aw.issue.pull_request.html_url);ap.comment=this.map(aw.comment,{_:["body","html_url","id"]});break;case"IssuesEvent":ap=this.map(aw,{_:["action"]});ap.issue=this.map(aw.issue,{_:["number","title","body","html_url"]});break;case"MemberEvent":ap=this.map(aw,{_:["action"]});if(aw.member&&aw.member.login){ap.member={login:aw.member.login}}break;case"PullRequestEvent":ap=this.map(aw,{_:["action","number"]});ap.pull_request=this.map(aw.pull_request,{_:["body","title","html_url"]});if(ap.number){ap.pull_request.number=ap.number;delete ap.number}break;case"PullRequestReviewCommentEvent":var aq;ap.pull_request={};if(aw.comment._links&&aw.comment._links.pull_request&&aw.comment._links.pull_request.href){aq=aw.comment._links.pull_request.href;aq=aq.match(/(\d+)\/?$/);aq=aq?aq[1]:null;if(aq){ap.pull_request.number=aq}}ap.comment=this.map(aw.comment,{_:["body","html_url"]});if(!ap.comment.html_url&&aw.comment&&aw.comment._links&&aw.comment._links.html){ap.comment.html_url=aw.comment._links.html.href}break;case"PushEvent":var ay,ar;ap=this.map(aw,{_:["size","ref","before","head"]});ap.commits=[];if(ap.size){if(aw.commits){ar=aw.commits;ay=false}else{if(aw.shas){ar=aw.shas;ay=true}}if(!ar.length){ap.size=0}else{for(var av=0;av<ar.length;av++){var at=ar[av];ap.commits.push({sha:ay?at[0]:at.sha,message:ay?at[2]:at.message,author:{name:ay?at[3]:at.author.name}})}}}break;case"WatchEvent":ap=this.map(aw,{_:["action"]});break}ap.type=au.type;ap.created_at=au.created_at;ap.actor=this.map(au.actor,{_:["login","avatar_url"]});ap.repository=this.map(au.repository||au.repo,{_:["name","full_name"]});if(ap.repository&&(ap.repository.full_name||ap.repository.name)){if(!ap.repository.full_name&&ap.repository.name){ap.repository.full_name=ap.repository.name;ap.repository.name=null}if(ap.type=="CreateEvent"&&ap.ref_type=="repository"&&ap.description){ap.repository.description=ap.description}}}return ap});ah.prototype.get_account_details=(function J(au,at,ar){var aq=this;function ap(av,aw){if(!av&&aw){aw=aq.map_account(aw)}return at(av,aw)}this.get_user(au).fetch(ap,ar)});ah.prototype.get_account_repositories=(function ai(ar,aq,ap){this.get_user(ar).repositories.fetch(this.decorate_collback(aq,"repositories","repositories"),ap)});ah.prototype.get_account_stars=(function al(ar,aq,ap){this.get_user(ar).starred.fetch(this.decorate_collback(aq,"starred","repositories"),ap)});ah.prototype.get_account_own_events=(function w(ar,aq,ap){this.get_user(ar).events.fetch(this.decorate_collback(aq,"events","events"),ap)});ah.prototype.get_account_received_events=(function j(ar,aq,ap){this.get_user(ar).received_events.fetch(this.decorate_collback(aq,"received_events","events"),ap)});ah.prototype.get_account_followers=(function b(ar,aq,ap){this.get_user(ar).followers.fetch(this.decorate_collback(aq,"followers","accounts"),ap)});ah.prototype.get_account_following=(function ao(ar,aq,ap){this.get_user(ar).following.fetch(this.decorate_collback(aq,"following","accounts"),ap)});ah.prototype.get_account_org_members=(function Y(ar,aq,ap){this.get_user(ar).members.fetch(this.decorate_collback(aq,"members","accounts"),ap)});ah.prototype.get_account_orgs=(function ae(ar,aq,ap){this.get_user(ar).orgs.fetch(this.decorate_collback(aq,"orgs","accounts"),ap)});ah.prototype.get_repository_details=(function t(aq,au,at){var ar=this;function ap(av,aw){if(!av&&aw){aw=ar.map_repository(aw)}return au(av,aw)}this.get_repo(aq).fetch(ap,at)});ah.prototype.get_repository_readme=(function h(ap,ar,aq){this.get_repo(ap).fetchReadme(this.decorate_collback(ar,"readme","field"),aq)});ah.prototype.get_repository_activity=(function ab(ap,ar,aq){this.get_repo(ap).events.fetch(this.decorate_collback(ar,"events","events"),aq)});ah.prototype.get_repository_forks=(function G(ap,ar,aq){this.get_repo(ap).forks.fetch(this.decorate_collback(ar,"forks","repositories"),aq)});ah.prototype.get_repository_stars=(function P(ap,ar,aq){this.get_repo(ap).stargazers.fetch(this.decorate_collback(ar,"stargazers","accounts"),aq)});ah.prototype.get_repository_contributors=(function l(ap,ar,aq){this.get_repo(ap).contributors.fetch(this.decorate_collback(ar,"contributors","accounts"),aq)});if(!W.Providers){W.Providers={}}W.Providers.github=ah})(Reposio);(function(D){D.View=Class.$extend({__classvars__:{model:null,view_name:null,views:{},views_cache:{},get:(function C(I,J){if(!this.views_cache[I.id]){this.views_cache[I.id]=new this.views[I.id](I,J)}return this.views_cache[I.id]})},__init__:(function A(I,J){this.page=I;this.display=J;this.nodes_cache=null;this.container=null;this.init_events();this.accept_options=this.__classvars__.accept_options}),init_events:(function G(){}),cache_nodes:(function p(){this.container=this.page.nodes.content;this.nodes_cache={}}),nodes:(function l(){if(!this.nodes_cache){this.cache_nodes()}return this.nodes_cache}),reset:(function x(I){if(!this.page.node.data("mobile-page")){this.page.node.page()}}),update:(function n(J,I){})});D.View.views._list=D.View.$extend({__init__:(function y(I,J){this.$super(I,J);this.options={}}),cache_nodes:(function m(){this.$super();this.nodes_cache.list=this.container.children("ul");this.nodes_cache.load_buttons=this.container.children(".load-buttons");this.nodes_cache.load_more_button=this.nodes_cache.load_buttons.find("a.list-more-button");this.nodes_cache.load_all_button=this.nodes_cache.load_buttons.find("a.list-all-button")}),reset:(function o(J){this.$super();var I=this.nodes();this.empty_list_node();I.load_buttons.addClass("ui-hidden");I.load_more_button.addClass("ui-disabled");I.load_all_button.addClass("ui-disabled")}),empty_list_node:(function f(){var I=this.nodes(),J=I.list[0];while(J.firstChild){J.removeChild(J.firstChild)}}),update:(function g(L,K){var J=this.nodes(),I=this.get_items(L,this.get_data(L));this.empty_list_node();if(I.length){I[0].className+=" ui-first-child";this.update_list_node(I)}this.update_load_buttons(L);this.refresh_widgets()}),update_list_node:(function r(K){var J=this.nodes(),M=J.list[0],I=M.lastChild;if(K.length){K[K.length-1].className+=" ui-last-child";if(I){I.className=I.className.replace("ui-last-child","")}for(var L=0;L<K.length;L++){M.appendChild(K[L])}}}),complete:(function i(L,K){var J=this.nodes(),I=this.get_items(L,this.prepare_data(L,K));this.update_list_node(I);this.refresh_widgets()}),update_load_buttons:(function a(L){var I=this.nodes();if(!I.load_buttons.length){return}var J=$.param(this.options),K=L.list_page_status[this.$class.data_field][J];if(!L.list_page_status[this.$class.data_field].__global__.all&&(K?K.maybe_more:true)){this.enable_load_buttons()}else{this.hide_load_buttons()}}),toggle_load_buttons_enabled:(function d(J){var I=this.nodes();if(!I.load_buttons.length){return}I.load_more_button.toggleClass("ui-disabled",!J);I.load_all_button.toggleClass("ui-disabled",!J);if(J){this.show_load_buttons()}}),disable_load_buttons:(function w(){this.toggle_load_buttons_enabled(false)}),enable_load_buttons:(function v(){this.toggle_load_buttons_enabled(true)}),toggle_load_buttons_visible:(function F(J){var I=this.nodes();if(!I.load_buttons.length){return}I.load_buttons.toggleClass("ui-hidden",!J);if(!J){this.disable_load_buttons()}}),hide_load_buttons:(function q(){this.toggle_load_buttons_visible(false)}),show_load_buttons:(function B(){this.toggle_load_buttons_visible(true)}),refresh_widgets:(function H(){this.display.load_visible_images()}),get_data:(function u(I){return I.get_list(this.$class.data_field,this.options)}),prepare_data:(function k(J,I){return J.get_list(this.$class.data_field,this.options,I)}),get_items:(function z(J,I){}),options_form:(function e(){var I=this,L="#"+this.$class.view_name+"_options";if(!this._options_form){this._options_form=$(L);if(!this._options_form.length){var K=I.display.get_template(I.$class.view_name+"_options",true),J=$(K);this._options_form=J.find(L);setTimeout(function(){J.collapsible();$.mobile.checkboxradio.prototype.enhanceWithin(I._options_form,true);$.mobile.button.prototype.enhanceWithin(I._options_form,true);$.mobile.selectmenu.prototype.enhanceWithin(I._options_form,true);$.mobile.controlgroup.prototype.enhanceWithin(I._options_form,true);I.page.nodes.content.prepend(K)},500)}}return this._options_form}),get_options_from_form:(function h(){var P=this.options_form().serializeArray(),I,J={},Q=[],M={},L={},K=this.$class.view_name+"_options_";for(var O=0;O<P.length;O++){I=P[O].name.replace(K,"");if(I=="submit"){continue}if(!_.contains(Q,I)){Q.push(I);L[I]=$("#"+P[O].name).is("select[multiple=multiple]")}if(L[I]){if(!J[I]){J[I]=[]}J[I].push(P[O].value)}else{J[I]=P[O].value}}Q.sort();for(var N=0;N<Q.length;N++){M[Q[N]]=J[Q[N]]}return M}),manage_options:(function c(I){var J,K,L={},M=this.$class.view_name+"_options_";this.options_form().find("[type=reset]").click();J=$.extend({},this.$class.default_options);if(I){for(K in I){if(typeof(J[K])!=="undefined"){J[K]=decodeURIComponent(decodeURIComponent(I[K]))}}}for(K in J){L[M+K]=J[K]}this.options_form().unserializeForm($.param(L));this.options=J;return this.options}),init_events:(function E(){var K=this,N=(function L(S){S.preventDefault();S.stopPropagation();var Q=K.get_options_from_form(),P={},T="#"+K.$class.view_name;T+="!"+K.$class.model+"="+K.display.controller[K.$class.model].id.replace("/",":");for(var R in Q){P[R]=encodeURIComponent(Q[R])}T+="&"+$.param(P);window.location.hash=T;return false}),O=(function J(P){P.preventDefault();P.stopPropagation();if(!$(this).hasClass("ui-disabled")){var Q=K.display.pages[$.mobile.activePage.data("url")];$.mobile.loading("show");K.disable_load_buttons();K.display.ask_for_more(Q)}return false}),I=(function M(P){P.preventDefault();P.stopPropagation();if(!$(this).hasClass("ui-disabled")){var Q=K.display.pages[$.mobile.activePage.data("url")];$.mobile.loading("show");K.disable_load_buttons();K.display.ask_for_all(Q)}return false});$(document).on("submit","#"+this.__classvars__.view_name+"_options",N);$(document).on("click","#"+this.__classvars__.view_name+"_load_buttons .list-more-button",O);$(document).on("click","#"+this.__classvars__.view_name+"_load_buttons .list-all-button",I)})});D.View.views._accounts=D.View.views._list.$extend({get_items:(function s(J,I){return this.display.create_accounts_list_items(I,J.provider)})});D.View.views._repositories=D.View.views._list.$extend({get_items:(function j(J,I){return this.display.create_repositories_list_items(I,J.provider)})});D.View.views._events=D.View.views._list.$extend({get_items:(function b(M,K){var I=[];for(var J=0;J<K.length;J++){var L=M.provider.formatter.format(K[J],M);if(L){I.push(L)}}return this.display.create_events_list_items(I)}),refresh_widgets:(function t(){this.display.render_widgets(this.nodes().list);this.display.load_visible_images()})})})(Reposio);(function(d){d.View.views.account_home=d.View.$extend({__classvars__:{model:"account",view_name:"account_home"},cache_nodes:(function f(){this.$super();var h=this.nodes_cache;var g=this.container.find(".account-main");h.avatar=g.children("img");h.provider=g.children("p.provider");h.name=g.children("p.account-name");var i=g.children("h3");h.username=i.children("strong");h.organization=i.children("span");h.infos=this.container.find(".account-details");h.infos_loading=h.infos.children(".failover");h.infos_items=h.infos.children(".ui-li-has-icon");h.company_container=h.infos.children("li.account-company");h.company=h.company_container.children(":last");h.location_container=h.infos.children("li.account-location");h.location=h.location_container.children(":last");h.email_container=h.infos.children("li.account-email");h.email=h.email_container.children(":last");h.created_at_container=h.infos.children("li.account-created_at");h.created_at=h.created_at_container.children(":last");h.site_container=h.infos.children("li.account-site");h.site=h.site_container.find("a");h.orgs_container=this.container.find(".account-orgs")}),reset:(function c(h){this.$super();var g=this.nodes(),i=!!(h&&h.details);g.username.html(h.username||"loading...");g.name.html((i&&h.details.name)||"");g.avatar.attr("src","img/default-avatar.png");if(i&&h.details.avatar_url){g.avatar.attr("src",h.details.avatar_url)}if(i){this._update_org(h,g);this._update_details(h,g);if(!h.details.created_at){g.infos_loading.show()}}else{g.organization.hide();g.orgs_container.show();g.infos_items.hide();g.infos_loading.show()}if(!i||!h.orgs||!h.orgs.length){this.display.clear_listview(g.orgs_container,"Loading...",true)}}),_update_details:(function e(i,g){g.created_at.html(i.details.created_at?this.display.format_date(i.details.created_at):"");g.created_at_container.toggle(!!i.details.created_at);g.company.html(i.details.company||"");g.company_container.toggle(!!i.details.company);g.location.html(i.details.location||"");g.location_container.toggle(!!i.details.location);var h=!!(i.details.email&&i.details.email.indexOf("@")!==-1);g.email.html(h?i.details.email:"");g.email_container.toggle(h);g.site.html(i.details.site||"");g.site_container.toggle(!!i.details.site);g.site.attr("href",i.details.site||"/")}),_update_org:(function b(i,g){var h=i.is_organization();g.orgs_container.toggle(!h);g.organization.toggle(h);return h}),update:(function a(m,i){var h=this.nodes(),n=this;var l=this._update_org(m,h);h.username.html(m.username);h.provider.html(m.provider.name);h.avatar.attr("src",m.details.avatar_url);h.name.html(m.details.name||"");h.name.toggle(!!m.details.name);this._update_details(m,h);h.infos_loading.hide();if(!l){var k=(function j(p){m.update_data("orgs",p);if(m.orgs[""]&&m.orgs[""].length){n.display.clear_listview(h.orgs_container);h.orgs_container.append(n.display.create_accounts_list_items(m.orgs[""],m.provider));h.orgs_container.listview("refresh");n.display.load_visible_images()}else{n.display.clear_listview(h.orgs_container,"No organizations",true);h.orgs_container.fadeOut()}});var o=(function g(p){n.display.clear_listview(h.orgs_container,"Failed to load organizations",true)});if(typeof m.orgs[""]==="undefined"||i){m.fetch("orgs",k,o)}else{k(m.orgs[""])}}n.container.find("ul[data-role=listview]").listview("refresh")})});d.View.views.account_repositories=d.View.views._repositories.$extend({__classvars__:{model:"account",view_name:"account_repositories",data_field:"repositories",accept_options:true,default_options:{direction:"desc",forks:"all",language:null,sort:"pushed",type:"all"}}});d.View.views.account_stars=d.View.views._repositories.$extend({__classvars__:{model:"account",view_name:"account_stars",data_field:"stars",accept_options:true,default_options:{direction:"desc",forks:"all",language:null,sort:"created"}}});d.View.views.account_followers=d.View.views._accounts.$extend({__classvars__:{model:"account",view_name:"account_followers",data_field:"followers"}});d.View.views.account_following=d.View.views._accounts.$extend({__classvars__:{model:"account",view_name:"account_following",data_field:"following"}});d.View.views.account_members=d.View.views._accounts.$extend({__classvars__:{model:"account",view_name:"account_members",data_field:"org_members"}});d.View.views.account_activity=d.View.views._events.$extend({__classvars__:{model:"account",view_name:"account_activity",data_field:"own_events",accept_options:true,default_options:{mode:"display",type:null}}});d.View.views.account_events=d.View.views._events.$extend({__classvars__:{model:"account",view_name:"account_events",data_field:"received_events",accept_options:true,default_options:{mode:"display",type:null}}})})(Reposio);(function(d){d.View.views.repository_home=d.View.$extend({__classvars__:{model:"repository",view_name:"repository_home"},cache_nodes:(function c(){this.$super();var j=this.nodes_cache;var i=this.container.children(".repo-main");j.provider=i.children("p.provider");var k=i.children(".repo-path");j.name=k.children("strong.repo-name");j.owner_container=k.children("span.repo-owner-container");j.owner=j.owner_container.children("span.repo-owner");j.fork_container=i.children("div.repo-fork");var l=i.find(".repo-links");j.fork_name=l.children("span.repo-fork-name");j.fork_owner=l.find("span strong.repo-fork-owner");j.last_push_container=i.children("p.repo-last-push");j.last_push=j.last_push_container.children("span");j.desc_readme=this.container.children("div.ui-collapsible-set");j.description_container=j.desc_readme.children("div.repo-desc-container");j.description=j.description_container.find(".repo-desc");j.readme_container=j.desc_readme.children("div.repo-readme-container");j.readme=j.readme_container.find(".repo-readme")}),reset:(function h(j){this.$super();var i=this.nodes(),k=!!(j&&j.details);i.name.html((k&&j.details.name)||"loading...");if(k&&j.details.user){this._update_owner(j,i);i.owner_container.show()}else{i.owner_container.hide()}if(k&&j.details.is_fork&&j.details.parent){this._update_fork(j,i);i.fork_container.show()}else{i.fork_container.hide()}if(k&&j.details.pushed_at){this._update_last_push(j,i);i.last_push_container.show()}else{i.last_push_container.hide()}if(k&&(j.details.description||j.readme)){i.desc_readme.show()}else{i.desc_readme.hide()}i.description.text((k&&j.details.description)||"");i.readme.html((k&&j.readme)||"<em>Loading...</em>");this.display.render_widgets(this.container)}),_update_owner:(function f(j,i){i.owner.html(this.display.account_link(j.details.user.login,j.provider.name,j.details.user.avatar_url))}),_update_fork:(function a(j,i){i.fork_name.html(this.display.repository_link(j.details.parent.name,j.provider.name));i.fork_owner.html(this.display.account_link(j.details.parent.user.login,j.provider.name,j.details.parent.user.avatar_url))}),_update_last_push:(function b(j,i){i.last_push.html(j.details.pushed_at?this.display.format_date(j.details.pushed_at,true):"never !")}),update:(function g(k,n){var i=this.nodes();i.provider.html(k.provider.name);i.name.html(k.details.name);this._update_owner(k,i);i.owner_container.show();if(k.details.is_fork){this._update_fork(k,i);i.fork_container.show()}this._update_last_push(k,i);i.last_push_container.show();i.description.text(k.details.description||"<em>No description!</em>");i.description_container.toggle(!!k.details.description);var o=(function m(p){k.update_data("readme",p);if(!k.readme&&i.readme_container.hasClass("ui-collapsible-collapsed")){i.readme_container.fadeOut()}else{i.readme.html(k.readme||"<em>No readme!</em>")}});var j=(function l(p){i.readme.html("<em>Failed to load readme!</em>")});if(k.readme===null||n){k.fetch("readme",o,j)}else{o(k.readme)}i.desc_readme.show();i.readme_container.show();this.display.render_widgets(this.container)})});d.View.views.repository_forks=d.View.views._repositories.$extend({__classvars__:{model:"repository",view_name:"repository_forks",data_field:"forks",accept_options:true,default_options:{never_updated:"show",sort:"newest"}}});d.View.views.repository_activity=d.View.views._events.$extend({__classvars__:{model:"repository",view_name:"repository_activity",data_field:"activity",accept_options:true,default_options:{mode:"display",type:null}}});d.View.views.repository_contributors=d.View.views._accounts.$extend({__classvars__:{model:"repository",view_name:"repository_contributors",data_field:"contributors"},get_items:(function e(k,l){for(var j=0;j<l.length;j++){l[j].html_prepend='<p class="ui-li-aside count ui-li-desc">'+l[j].contributions+"</p>"}return this.$super(k,l)})});d.View.views.repository_stars=d.View.views._accounts.$extend({__classvars__:{model:"repository",view_name:"repository_stars",data_field:"stars"}})})(Reposio);