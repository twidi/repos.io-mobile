var Reposio={};$(document).ready((function App__on_ready(){Reposio.controller=new Reposio.Controller();Reposio.controller.init()}));(function(r){var x=(function o(){this.providers={};this.can_login=false;for(var z in r.Providers){this.providers[z]=new r.Providers[z](this);if(!this.can_login&&this.providers[z].can_login()){this.can_login=true}}for(var y in r.Models){this[y]=null}this.current_user=null;this.favorites=$.jStorage.get("favorites",[]);this.display=new r.Display(this)});x.prototype.init=(function c(){this.get_current_user();this.display.init()});x.prototype.set_current_object=(function j(z,y){var A=(this[z]===null||this[z].id!=y);if(A){this[z]=r.Models[z].get(y,this);this.display["change_"+z]()}this.display["update_"+z+"_navbar"](this[z]);return A});x.prototype.fetch_full_error=(function d(A,C,D,z,y,E,B){if(this.display.confirm_new_fech("full","this page",A,B)){C.fetch_full(D,z,y,E,B)}});x.prototype.fetch_more_error=(function m(A,C,D,z,y,B){if(this.display.confirm_new_fech("more","more",A,B)){C.fetch_more(D,z,y,B)}});x.prototype.fetch_all_error=(function l(B,D,E,z,A,y,C){if(this.display.confirm_new_fech("all","all",B,C)){D.fetch_all(E,z,A,y,C)}});x.prototype.make_page_hash=(function b(B,z,y){var A="#"+z.id+"!"+B.$class.model_name+"="+B.ref.replace("/",":")+"@"+B.provider.name;return A});x.prototype.toggle_favorite=(function n(F,D,A,C){var E=this.make_page_hash(F,D,A),z=this.favorites.length,y,B=false;this.favorites=_.reject($.jStorage.get("favorites",[]),function(G){return G.hash==E});if(z==this.favorites.length){y=this.create_favorite(E,F,D.title,A);this.favorites[C?"unshift":"push"](y);B=true}$.jStorage.set("favorites",this.favorites);$.jStorage.set("favorites-managed",true);this.display.ask_for_favorites_redraw();return B});x.prototype.create_favorite=(function w(B,A,C,z){var y={hash:B,model:A.$class.model_name,ref:A.ref,provider:A.provider.name};if(C!="Details"){y.title=C}if(z&&_.size(z)>0){y.options=z}switch(A.$class.model_name){case"account":if(A.details&&A.details.avatar_url){y.avatar_url=A.details.avatar_url}break;case"repository":if(A.details.user&&A.details.user.avatar_url){y.avatar_url=A.details.user.avatar_url}if(A.details.is_fork){y.is_fork=true}if(A.details.description){y.description=A.details.description}break}return y});x.prototype.is_favorited=(function t(B,z,y){var A=this.make_page_hash(B,z,y);return !!(_.find(this.favorites,function(C){return C.hash==A}))});x.prototype.get_current_user=(function k(){var y=this;this.current_user=$.jStorage.get("logged-user",null);if(!this.current_user){return}if(this.current_user.provider&&this.providers[this.current_user.provider]){var B=this.providers[this.current_user.provider];if(!B.login(this.current_user,(function A(C){var D=r.Models.account.get(C.login+"@"+B.name,y);D.update_data("details",C);D.details_fetched=true}),(function z(C){alert("We are unable to check your authentication, you may want to logout and login again.")}))){this.current_user=null}}else{this.current_user=null}if(!this.current_user){setTimeout(function(){y.logout()},500)}});x.prototype.login=(function g(A,z,y){this.current_user=z;this.current_user.username=A;this.current_user.provider=y;$.jStorage.set("logged-user",this.current_user);this.display.login_success()});x.prototype.logout=(function s(){if(this.current_user){this.providers[this.current_user.provider].logout()}this.current_user=null;$.jStorage.deleteKey("logged-user");_.each(["repository","account"],function(z){var A=Reposio.Models.base.cache[z];for(var y in A){A[y].flags={}}});this.display.logout()});x.prototype.check_login=(function q(z){var y=this;setTimeout(function(){if(!z.provider||!y.providers[z.provider]){return y.display.login_fail()}y.providers[z.provider].check_login(z,(function A(C,F){var D=r.Models.account.get(C.login+"@"+z.provider,y);D.update_data("details",C);D.details_fetched=true;if(!y.is_favorited(D,y.display.pages.account_home)){var E=y.make_page_hash(D,y.display.pages.account_home),B=y.create_favorite(E,D,"Details");this.favorites=$.jStorage.get("favorites",[]);this.favorites.unshift(B);$.jStorage.set("favorites",this.favorites);y.display.ask_for_favorites_redraw()}y.login(C.login,F,z.provider)}),function(){y.display.login_fail()})},1)});x.prototype.check_flag=(function a(y,A,C,z){var B=this.providers[A.provider.name];B["check_"+y](A.ref,function(D){A.set_flag(y,D);C(A.is_flagged(y))},z)});x.prototype.toggle_flag=(function e(y,B,E,A){var z=this,C=this.providers[B.provider.name];if(!B.is_flag_set(y)){this.check_flag(y,B,function(){z.toggle_flag(y,B,E,A)},A)}else{var D=y;if(B.is_flagged(y)){D="un"+D}C[D](B.ref,function(F){B.set_flag(y,F);E()},A)}});x.prototype.check_star=(function f(z,A,y){this.check_flag("star",z,A,y)});x.prototype.toggle_star=(function h(z,A,y){this.toggle_flag("star",z,A,y)});x.prototype.check_watch=(function p(z,A,y){this.check_flag("watch",z,A,y)});x.prototype.toggle_watch=(function i(z,A,y){this.toggle_flag("watch",z,A,y)});x.prototype.check_follow=(function u(z,A,y){this.check_flag("follow",z,A,y)});x.prototype.toggle_follow=(function v(z,A,y){this.toggle_flag("follow",z,A,y)});r.Controller=x})(Reposio);(function(D){var t=(function M(T){this.controller=T});t.prototype.init=(function v(){var aa=this;this.need_favorites_redraw=true;this.templates_container=$("#templates");this.nodes={body:$("body"),home:{favorites:$("#home-favorites"),anonymous:$("#welcome-anonymous"),username:$("#welcome span"),login_button:$("#home-login-button"),no_login_button:$(".home-hide-no-login-button")}};for(var Y in this.pages_list){this.construct_pages(Y,this.pages_list[Y])}$.mobile.initializePage();aa.init_events();var X=$("div[data-role=page]:not(.ui-page)"),W=$("#start-screen"),V=$("#progress-loader"),Z=X.length,U=(function T(ab,ae){if(ae<ab.length){var ad=Math.max(6,Math.min(Math.round(100*(ae+1)/Z),100));V.css({width:ad+"%"});setTimeout((function ac(){var ag=ab.eq(ae);ag.page();U(ab,ae+1)}),10);if(ae==2){$("html").removeClass("loading")}}else{var af=$.jStorage.get("start_screen_seen");V.parent().html("Enjoy !");W.fadeOut(af?"fast":1200,function(){W.remove()});$.jStorage.set("start_screen_seen",true)}});U(X,0);if(this.controller.can_login){$("#welcome-anonymous-cannot-login").hide();$("#welcome-anonymous-can-login").show();$(".auth-menu").show();this.toggle_auth_infos()}});t.prototype.format_date=(function w(X,Y,T,U){if(!X){return""}var W=X.split("T");if(Y){var V=W[1].slice(0,T?8:5);return(U?"":W[0]+" ")+V}else{return W[0]}});t.prototype.escape_html=(function x(T){if(!T){return""}return T.indexOf("<")===-1?T:$("<div/>").text(T).html()});t.prototype.nodes={};t.prototype.template_sources={};t.prototype.templates={};t.prototype.pages_list={};t.prototype.pages={};t.prototype.construct_pages=(function o(T,Z){for(var ag=0;ag<Z.length;ag++){var V=Z[ag];V.name=V.id;V.id=T+"_"+V.name;V.type=T;if(!V.title){V.title=V.name[0].toUpperCase()+V.name.slice(1)}if(!V.method){V.method=V.name}}var ak="",U=(Z.length>4),ab={account:this.get_template_source("account-footer"),repository:this.get_template_source("repository-footer")};for(var al=0;al<Z.length;al++){var aj=Z[al],am="",ae=[];if(U){ae.push(Z[0]);ae.push(Z[1]);ae.push(Z[(al<2)?2:al])}else{ae=Z}am='<div data-role="page" id="'+aj.id+'">';am+='<div data-role="header" data-id="'+T+'_pages" data-position="fixed" data-theme="a" class="header">';am+="<h3></h3>";am+='<a href="#main_menu_'+aj.id+'" id="main_menu_'+aj.id+'_opener" data-icon="gear" data-iconpos="notext" data-rel="popup" class="ui-btn-right">Options</a>';am+='<div data-role="navbar">';am+="<ul"+(U?' class="extended"':"")+">";for(var ai=0;ai<ae.length;ai++){var ad=ae[ai];am+="<li>";am+='<a href="#'+ad.id+'"'+(ai<al?' data-direction="reverse"':"")+' class="'+(ad.name==aj.name?"ui-btn-active ui-state-persist ":"")+ad.id+'-link">';am+=ad.title;if(ad.count){am+='<span class="'+ad.id+'-count ui-li-count ui-btn-up-c ui-btn-corner-all">?</span>'}am+="</a>";am+="</li>"}if(U){am+='<li><a data-rel="popup" href="#menu_'+aj.id+'">...</a>'}am+="</ul>";am+="</div>";am+="</div>";am+='<div data-role="content"></div>';am+=ab[Z[al].type];if(U){am+='<div data-role="popup" id="menu_'+aj.id+'" data-theme="a" class="nav-menu">';am+='<ul data-inset="true" data-theme="a">';for(var ah=0;ah<Z.length;ah++){var Y=Z[ah];am+="<li>";am+='<a href="#'+Y.id+'" class="'+(Y.name==aj.name?"ui-btn-active ":"")+Y.id+'-link">';am+=Y.title;if(Y.count){am+='<span class="'+Y.id+'-count ui-li-count ui-btn-up-c ui-btn-corner-all">?</span>'}am+="</a>";am+="</li>"}am+="</ul>";am+="</div>"}am+='<div data-role="popup" id="main_menu_'+aj.id+'" data-theme="a" class="main-nav-menu">';am+="</div>";am+="</div>";ak+=am}this.nodes.body.append(ak);for(var af=0;af<Z.length;af++){var aa=Z[af],X=$("#"+aa.id),W=$("#main_menu_"+aa.id),ac=X.find(".footer"),an=this.get_template(aa.id,true,true);aa.nodes={links:$("a."+aa.id+"-link"),page:X,header:X.children(":jqmData(role=header)").children("h3"),content:X.children(":jqmData(role=content)"),main_menu:W,footer:ac,refresh_control:ac.find(".refresh-control"),go_provider_control:ac.find(".go-provider-control"),favorite_control:ac.find(".favorite-control"),star_control:ac.find(".star-control"),watch_control:ac.find(".watch-control"),follow_control:ac.find(".follow-control")};aa.node=aa.nodes.page;if(an){aa.nodes.content.prepend(an.children)}aa.view=D.View.get(aa,this);this.pages[aa.id]=aa}});t.prototype.update_go_provider_control=(function L(U,T){U.nodes.go_provider_control.find(".provider").text(this.controller[U.type].provider.name);U.nodes.go_provider_control.toggleClass("ui-disabled",!T);U.nodes.go_provider_control.attr("href",T||"")});t.prototype.init_events=(function b(){var ag=this;$(document).on("pagebeforechange",(function aa(am,al){if(typeof al.toPage!=="string"){return}if(al.options.dataUrl){al.options.dataUrl=al.options.dataUrl.replace("?","!")}al.options.allowSamePageTransition=true;if(al.toPage==$.mobile.path.stripQueryParams(location.href.replace("!","?"))){al.options.transition="none"}ag.on_before_page_change(am,al)}));$(document).on("pagechange",(function V(aq,ao){ag.update_fullscreen_control();if($.mobile.activePage&&$.mobile.activePage.hasClass("current_page")&&!$.mobile.activePage.hasClass("page_loaded")){$.mobile.loading("show")}try{var an=ag.pages[ao.toPage.data("url")],am,ap=ag.controller[an.type];ag.update_favorite_control(an);am=ag["get_real_"+an.type+"_page"](an.name,ap);ag.update_go_provider_control(an,am);ag.update_star_control(an,ap);ag.update_watch_control(an,ap);ag.update_follow_control(an,ap)}catch(al){}}));$(".nav-menu").on("popupafterclose",(function ad(){var ao=$(this),an=ao.find("a.ui-btn-active"),al,am;if(an.length){am=ao.parents(".ui-page");if(am.length){al=an.attr("href");am.find('.ui-header .ui-navbar a[href="'+al+'"]').addClass("ui-btn-active")}}}));$(".nav-menu").on("popupbeforeposition",(function aj(){var al=$(this).children("ul");if(!al.hasClass("ui-listview")){al.listview()}}));$(".main-nav-menu").on("popupbeforeposition",(function W(){var am=$(this),ao=$("#"+this.id+"_opener");ao.addClass("popup-opened");if(!am.children().length){var an=ag.get_template("main-nav-menu");am.append(an.cloneNode(true));am.trigger("create");var ap=ag.pages[$.mobile.activePage.data("url")],al=ap.nodes.main_menu.find(".auth-menu");al.find(".ui-btn-text").text(ag.controller.current_user?"Logout":"Login");if(ag.controller.can_login){al.show()}}}));$(".main-nav-menu").on("popupafterclose",(function T(){var al=$("#"+this.id+"_opener");al.removeClass("popup-opened")}));$(document).on("click",".events-list a.collapsible-trigger",(function ah(ap){ap.preventDefault();ap.stopPropagation();var ao=$(this),al=ao.parents("li"),aq,an,ar,am;if(!ao.hasClass("filled")){ao.addClass("filled");ar=al[0].event_data;if(ar.provider["more_"+ar.event.type]){am=ar.provider["more_"+ar.event.type](ar.event,ar.source);al.append(am);an=al.children(":last");an.collapsible();ag.render_widgets(an);ao.data("collapsible",an);setTimeout(function(){an.trigger("expand")},100)}}else{aq=al.hasClass("more-opened");an=ao.data("collapsible");if(an){an.trigger(aq?"collapse":"expand")}}al.toggleClass("more-opened",!aq);return false}));$(document).on("click",".events-list a.fetch-desc-trigger",(function ai(at){at.preventDefault();at.stopPropagation();var av=$(this),aq=av.data("repository"),au=D.Models.repository.get(aq,ag.controller),an=(function ap(ay){$('p.ui-li-desc[data-fetching-repository="'+aq+'"]').each((function az(){var aA=$(this);aA.children().remove();aA.append(ay)}))}),aw=(function am(){var ay=$(this),az=ay.parent();az.children().remove();az.append("<em>loading...</em>").attr("data-fetching-repository",aq)}),ax=(function ar(az){var ay;au.update_data("details",az);if(au.details.description){ay="<strong>"+ag.escape_html(au.details.description)+" </strong>"}else{ay="<em>no description</em>"}an(ay)}),ao=(function al(ay){an("<em>Loading failed! ("+ag.get_error_text(ay)+') </em><a href="#" class="fetch-desc-trigger" data-repository="'+au.id+'">Retry ?</a>')});$('a.fetch-desc-trigger[data-repository="'+aq+'"]').each(aw);if(au.details_fetched){ax()}else{au.fetch("details",ax,ao,null,"fail_if_404")}}));$(document).on("click","li.with-extension",(function ak(al){al.preventDefault();al.stopPropagation();$(this).toggleClass("extended");return false}));$(document).on("click",".refresh-control",(function X(ao){ao.preventDefault();ao.stopPropagation();var an=ag.pages[$.mobile.activePage.data("url")],am=an.view.accept_options?an.view.get_options_from_form():null;setTimeout((function al(){$.mobile.loading("show");ag.ask_for_page(an.id,ag.controller[an.type].id,am,"force")}),100)}));$(document).on("click",".favorite-control",(function Z(ap){ap.preventDefault();ap.stopPropagation();var an=ag.pages[$.mobile.activePage.data("url")],al=an.view.accept_options?an.view.get_options_from_form():null,ao=ag.controller[an.type],am=ag.controller.toggle_favorite(ao,an,al);ag.update_favorite_control(an,!!am)}));$(document).on("click",".flag-control",(function Y(ao){ao.preventDefault();ao.stopPropagation();var am=ag.pages[$.mobile.activePage.data("url")],an=ag.controller[am.type],al=$(this).data("flag");ag["toggle_"+al](am,an)}));$(window).on("scrollstop",ag.load_visible_images);$(window).on("resize",ag.load_visible_images);$.jStorage.listenKeyChange("favorites",function(al,am){ag.controller.favorites=$.jStorage.get("favorites",[]);ag.ask_for_favorites_redraw()});if(screenfull.enabled){$(document).on("change",".fullscreen-control",(function ac(al){$(this).parents(".main-nav-menu").popup("close");screenfull.toggle()}));screenfull.onchange=ag.update_fullscreen_control}else{var ab=$(".fullscreen-control");ab.parents(".ui-checkbox").add(ab.parents("label")).remove()}ag.nodes.home.no_login_button.on("click",(function af(al){al.preventDefault();al.stopPropagation();ag.nodes.home.anonymous.fadeOut()}));ag.nodes.home.login_button.on("click",(function ae(al){al.preventDefault();al.stopPropagation();ag.login()}));$(document).on("click",".auth-menu",(function U(am){am.preventDefault();am.stopPropagation();var al=ag.pages[$.mobile.activePage.data("url")];(al?al.nodes.main_menu:$.mobile.activePage.find(".main-nav-menu")).popup("close");if(ag.controller.current_user){ag.controller.logout()}else{ag.login()}}))});t.prototype.load_visible_images=(function e(){var T,V=$("img[data-original]:in-viewport:visible");for(var U=0;U<V.length;U++){T=V[U];T.src=T.getAttribute("data-original");T.removeAttribute("data-original")}});t.prototype.update_fullscreen_control=(function p(){$(".fullscreen-control").attr("checked",screenfull.isFullscreen).each(function(){try{$(this).checkboxradio("refresh")}catch(T){}})});t.prototype.update_favorite_control=(function J(U,T){if(T!==false&&T!==true){T=this.controller.is_favorited(this.controller[U.type],U,U.view.accept_options?U.view.get_options_from_form():null)}U.nodes.favorite_control.toggleClass("selected",T)});t.prototype.user_can_flag=(function d(T,U){if(!this.controller.current_user){return false}if(!U.can_have_flag(T)){return false}switch(T){case"star":break;case"watch":break;case"follow":if(U.$class.model_name=="account"&&U.username==this.controller.current_user.username){return false}break}return true});t.prototype.update_flag_control=(function q(T,X,aa,U){var Z=this,W=this.is_page_for_obj(X,aa),Y=X.nodes[T+"_control"],V=this.user_can_flag(T,aa);if(!V||!aa.is_flag_set(T)){if(W){Y.removeClass("selected");Y.addClass("ui-disabled")}if(V){this.controller["check_"+T](aa,function(ab){Z.update_flag_control(T,X,aa,U)},function(){if(confirm(U+'"'+aa.ref+'". Retry ?')){Z.update_flag_control(T,X,aa,U)}})}}else{if(W){Y.removeClass("ui-disabled");Y.toggleClass("selected",aa.is_flagged(T))}}});t.prototype.toggle_flag=(function u(T,X,aa,U){var Z=this,W=this.is_page_for_obj(X,aa),Y=X.nodes[T+"_control"],V=this.user_can_flag(T,aa);if(!V){return}if(W){$.mobile.loading("show");Y.addClass("ui-disabled")}this.controller["toggle_"+T](aa,function(){if(W){Z.update_flag_control(T,X,aa,U);$.mobile.loading("hide")}},function(){if(confirm(U+'"'+aa.ref+'". Retry ?')){Z.toggle_flag(T,X,aa,U)}else{if(W){Z.update_flag_control(T,X,aa,U);$.mobile.loading("hide")}}})});t.prototype.update_star_control=(function y(T,U){this.update_flag_control("star",T,U,"Unable to check if you star the repository ")});t.prototype.toggle_star=(function I(T,U){this.toggle_flag("star",T,U,"Unable to toggle your star of the repository ")});t.prototype.update_watch_control=(function F(T,U){this.update_flag_control("watch",T,U,"Unable to check if you watch the repository ")});t.prototype.toggle_watch=(function H(T,U){this.toggle_flag("watch",T,U,"Unable to toggle your watching of the repository ")});t.prototype.update_follow_control=(function i(T,U){this.update_flag_control("follow",T,U,"Unable to check if you follow ")});t.prototype.toggle_follow=(function C(T,U){this.toggle_flag("follow",T,U,"Unable to toggle your following of ")});t.prototype.on_before_page_change=(function A(X,W){var U=$.mobile.path.parseUrl(W.toPage),T,V;if(U.hash&&W.options){T=U.hash.slice(1);if(this.pages[T]){V=this.pages[T];if(W.options.pageData&&W.options.pageData[V.type]){$.mobile.loading("show");this.ask_for_page(V.id,W.options.pageData[V.type],_.omit(W.options.pageData,V.type));return}}}if(V||!$(U.hash).length){$.mobile.changePage($("#home"));X.preventDefault()}if(U.hash=="#home"){this.refresh_home_favorites()}});t.prototype.is_page_for_obj=(function c(T,U){var V=T.node.data("current-for");if(!V||V!=U.id){return false}return true});t.prototype.is_page_for=(function m(U,V,T){if(!this.is_page_for_obj(U,V)){return false}if(U.view.accept_options&&U.node.data("current-options")!=$.param(T)){return false}return true});t.prototype.ask_for_page=(function E(ab,Z,aa,U){Z=Z.replace(":","/");var X=this,Y=this.pages[ab],V=this.controller.set_current_object(Y.type,Z),W=this.controller[Y.type],ac=Y.view.accept_options?Y.view.manage_options(aa):{};$(".current_page, .page_loaded").removeClass("current_page page_loaded");Y.node.addClass("current_page");Y.node.data("title",Y.nodes.header.text());if(!U&&this.is_page_for(Y,W,ac)){this.post_render_page(Y)}else{Y.nodes.refresh_control.addClass("ui-disabled");Y.view.reset(W);if(Y.view.accept_options){Y.node.data("current-options",$.param(ac))}Y.node.data("current-for",W.id);W.fetch_full(Y.method,(function T(){X.render_page(Y,W,ac,U)}),ac,U)}});t.prototype.ask_for_more=(function n(W){var Y=this,X=this.controller[W.type],U=W.view.options;X.fetch_more(W.method,(function T(Z){if(!Y.is_page_for(W,X,U)){return}W.view.complete(X,Z);W.view.update_load_buttons(X);if(W.node.hasClass("current_page")){$.mobile.loading("hide")}}),U,(function V(){W.view.enable_load_buttons()}))});t.prototype.ask_for_all=(function K(X){var Z=this,Y=this.controller[X.type],V=X.view.options;Y.fetch_all(X.method,(function U(aa){if(!Z.is_page_for(X,Y,V)){return}X.view.complete(Y,aa)}),(function T(){if(!Z.is_page_for(X,Y,V)){return}if(X.node.hasClass("current_page")){X.view.hide_load_buttons();$.mobile.loading("hide")}}),V,(function W(){X.view.enable_load_buttons()}))});t.prototype.render_page=(function s(V,W,T,U){if(!this.is_page_for(V,W,T)){return}V.view.update(W,U);if(V.node.hasClass("current_page")){this["update_"+V.type+"_navbar"](W);this.post_render_page(V)}});t.prototype.post_render_page=(function f(T){$.mobile.loading("hide");T.node.addClass("page_loaded");T.nodes.refresh_control.removeClass("ui-disabled ui-btn-active")});t.prototype.render_widgets=(function j(T){T.find(":jqmData(role=listview)").listview();T.find(":jqmData(role=collapsible-set)").collapsibleset();T.find(":jqmData(role=collapsible)").collapsible();T.find(":jqmData(role=button)").button();T.find(":jqmData(role=table)").table()});t.prototype.create_events_list_items=(function h(Y){var X=this.get_template("event-list-day"),U=this.get_template("event-list-item"),V=[],Z=null,T,aa;for(var W=0;W<Y.length;W++){aa=Y[W];if(aa.day!=Z){T=X.cloneNode(true);T.innerHTML=aa.day;Z=aa.day;V.push(T)}T=U.cloneNode(true);T.innerHTML=aa.html;T.event_data={event:aa.event,source:aa.source,provider:aa.provider};V.push(T)}return V});t.prototype.get_error_text=(function G(T){var U="";if(T){if(T.statusText){U=T.statusText}if(T.status){if(T.statusText){U+=" - "}U+=T.status}}if(!U){U="undefined error"}return U});t.prototype.confirm_new_fech=(function S(X,W,V,U){$.mobile.loading("hide");var T=confirm("Unable to fetch "+W+" ("+this.get_error_text(V)+"), retry ?");if(T){$.mobile.loading("show")}else{if(U){U()}else{switch(X){case"full":history.go(-1);break;case"more":case"all":}}}return T});t.prototype.get_template_source=(function z(U){if(!this.template_sources[U]){var T=this.templates_container.find("[data-template-for="+U+"]")[0];this.template_sources[U]=T.childNodes[0].nodeValue;T.parentNode.removeChild(T)}return this.template_sources[U]});t.prototype.get_template=(function B(U,T,W){var X,V;if(!this.templates[U]){V=document.createElement("div");V.innerHTML=this.get_template_source(U);if(!W){V=V.removeChild(V.children[0])}this.templates[U]=V}V=this.templates[U];if(T){delete this.templates[U]}return V});t.prototype.clear_listview=(function R(U,V,T){U.children(":not(.ui-li-divider)").remove();if(V){U.append('<li class="failover">'+V+"</li>")}if(T){U.listview("refresh")}});D.Display=t;t.prototype.get_favorites_items=(function r(){var U=[],V,T,W,X;if(!this.controller.favorites.length){this.controller.favorites=[{hash:"#account_home!account=twidi@github",model:"account",ref:"twidi",avatar_url:"https://secure.gravatar.com/avatar/4929cd99d0f54b7fa03081f9ab8bb0d4",provider:"github"},{hash:"#repository_home!repository=twidi:repos.io-mobile@github",model:"repository",ref:"twidi/repos.io-mobile",avatar_url:"https://secure.gravatar.com/avatar/4929cd99d0f54b7fa03081f9ab8bb0d4",description:"A mobile application for Github",provider:"github"}];if(!$.jStorage.get("favorites-managed")){$.jStorage.set("favorites",this.controller.favorites)}}for(V=0;V<this.controller.favorites.length;V++){T=this.controller.favorites[V];X={name:T.provider};switch(T.model){case"account":W={login:T.ref};if(T.title){W.login+=" - "+T.title}if(T.avatar_url){W.avatar_url=T.avatar_url}U.push(this.create_account_list_item(W,X,T.hash));break;case"repository":W={full_name:T.ref,is_fork:T.is_fork,description:T.description};if(T.title){W.full_name+=" - "+T.title}if(T.avatar_url){W.user={avatar_url:T.avatar_url}}U.push(this.create_repository_list_item(W,X,T.hash));break}}return U});t.prototype.ask_for_favorites_redraw=(function Q(){this.need_favorites_redraw=true;if($.mobile.activePage.data("url")=="home"){this.refresh_home_favorites()}});t.prototype.refresh_home_favorites=(function l(){if(!this.need_favorites_redraw){return}var U=this,T=this.get_favorites_items();this.clear_listview(this.nodes.home.favorites);this.nodes.home.favorites.append(T);this.need_favorites_redraw=false;setTimeout(U.load_visible_images,500);setTimeout(U.load_visible_images,1000);setTimeout(U.load_visible_images,2000)});t.prototype.login=(function g(){window.open(this.controller.providers.github.login_url($.mobile.path.makeUrlAbsolute("github_login.html")))});t.prototype.logout=(function a(){this.toggle_auth_infos();this.update_controls_needing_auth()});t.prototype.toggle_auth_infos=(function P(){if(!this.controller.can_login){return}var T=!!this.controller.current_user;$(".auth-menu .ui-btn-text, .auth-menu:not(.ui-btn)").text(T?"Logout":"Login");if(T){this.nodes.home.anonymous.fadeOut();this.nodes.home.username.html(", <strong>"+this.controller.current_user.username+"</strong>");this.nodes.home.username.show()}else{this.nodes.home.anonymous.fadeIn();this.nodes.home.username.hide();this.nodes.home.username.html("")}});t.prototype.update_controls_needing_auth=(function k(){try{var U=this.pages[$.mobile.activePage.data("url")];if(U){this.update_star_control(U,this.controller[U.type]);this.update_watch_control(U,this.controller[U.type]);this.update_follow_control(U,this.controller[U.type])}}catch(T){}});t.prototype.login_success=(function O(){this.toggle_auth_infos();this.update_controls_needing_auth();alert("You are now identified as "+this.controller.current_user.username)});t.prototype.login_fail=(function N(){alert("Something goes wrong and we couldn't complete the authentication.")})})(Reposio);(function(f){f.Display.prototype.pages_list.account=[{id:"home",title:"Details",method:"details"},{id:"repositories",title:"Repos",count:true},{id:"activity",method:"own_events"},{id:"members",method:"org_members"},{id:"stars"},{id:"following",count:true},{id:"followers",count:true},{id:"events",title:"Following activity",method:"received_events"}];f.Display.prototype.change_account=(function a(){$(".account_repositories-count").hide();$(".account_followers-count").hide();$(".account_following-count").hide();for(var k=0;k<this.pages_list.account.length;k++){var l=this.pages_list.account[k];for(var h=0;h<l.nodes.links.length;h++){l.nodes.links[h].href="#"+l.id+"!account="+this.controller.account.id}l.nodes.header.html(this.controller.account.username+" - "+l.title);l.node.removeData("current-for")}});f.Display.prototype.account_link=(function c(k,j,i){var h='<a class="account-link" href="#account_home!account='+k+"@"+j+'">';h+=k;if(i){h+='<img class="avatar-small avatar-small-after" src="'+i+'" />'}h+="</a>";return h});f.Display.prototype.create_account_list_item=(function g(l,n,i){var p=this.get_template("account-list-item"),q=p.cloneNode(true),o=q.getElementsByTagName("a")[0],h=o.children,k=h[0],m=h[1],j=[];o.href=i||"#account_home!account="+l.login+"@"+n.name;m.innerHTML=l.login;k.setAttribute("data-original",l.avatar_url);if(l.html_prepend){$(o).prepend(l.html_prepend)}return q});f.Display.prototype.create_accounts_list_items=(function d(k,l){var h=[];for(var j=0;j<k.length;j++){h.push(this.create_account_list_item(k[j],l))}return h});f.Display.prototype.update_account_navbar=(function e(i){var h=i.is_organization();$(".go-button").find(".provider").html(i.provider.name);$(".account_members-link").closest("li").toggle(h);$(".account_repositories-count").html(i.details?i.details.repos_count:"?").show();$(".account_followers-count").html(i.details?i.details.followers_count:"?").show();$(".account_following-count").html(i.details?i.details.following_count:"?").show()});f.Display.prototype.get_real_account_page=(function b(h,j){var i=j.is_organization();switch(h){case"home":return"https://github.com/"+j.username;case"repositories":return"https://github.com/"+j.username+"?tab=repositories";case"activity":return i?null:"https://github.com/"+j.username+"?tab=activity";case"followers":return"https://github.com/"+j.username+"/followers";case"stars":case"following":return"https://github.com/"+j.username+"/following";case"members":return i?"https://github.com/"+j.username+"?tab=members":null}return null})})(Reposio);(function(e){e.Display.prototype.pages_list.repository=[{id:"home",title:"Details",method:"details"},{id:"activity"},{id:"contributors"},{id:"forks",count:true},{id:"stars",count:true}];e.Display.prototype.change_repository=(function b(){$(".repository_forks-count").hide();$(".repository_stars-count").hide();for(var k=0;k<this.pages_list.repository.length;k++){var l=this.pages_list.repository[k];for(var h=0;h<l.nodes.links.length;h++){l.nodes.links[h].href="#"+l.id+"!repository="+this.controller.repository.id.replace("/",":")}l.nodes.header.html(this.controller.repository.path+" - "+l.title);l.node.removeData("current-for")}});e.Display.prototype.repository_link=(function a(h,i){var j=h.replace("/",":");return'<a class="repo-link" href="#repository_home!repository='+j+"@"+i+'">'+h+"</a>"});e.Display.prototype.create_repository_list_item=(function d(o,p,i){var r=this.get_template("repository-list-item"),u=o.full_name||o.name,s=r.cloneNode(true),q=s.getElementsByTagName("a")[0],h=q.children,j=h[1].children,m=j[0],k=j[1],n=h[2],t=h[3],l=[];q.href=i||"#repository_home!repository="+u.replace("/",":")+"@"+p.name,k.innerHTML=u;if(o.user&&o.user.avatar_url){m.setAttribute("data-original",o.user.avatar_url)}if(o.description){n.innerHTML=o.description}else{l.push("no-desc")}if(!o.is_fork){l.push("no-fork")}if(o.pushed_at){t.getElementsByTagName("span")[0].innerHTML=this.format_date(o.pushed_at,true)}else{l.push("no-date")}if(l.length){s.className+=" "+l.join(" ")}return s});e.Display.prototype.create_repositories_list_items=(function g(k,l){var h=[];for(var j=0;j<k.length;j++){h.push(this.create_repository_list_item(k[j],l))}return h});e.Display.prototype.update_repository_navbar=(function c(h){$(".go-button").find(".provider").html(h.provider.name);$(".repository_forks-count").html(h.details?h.details.forks_count:"?").show();$(".repository_stars-count").html(h.details?h.details.watchers_count:"?").show()});e.Display.prototype.get_real_repository_page=(function f(h,i){switch(h){case"home":case"activity":return"https://github.com/"+i.path;case"contributors":return"https://github.com/"+i.path+"/contributors";case"forks":return"https://github.com/"+i.path+"/network";case"stars":return"https://github.com/"+i.path+"/stargazers"}return null})})(Reposio);(function(o){o.Models={};o.Models.base=Class.$extend({__classvars__:{model_name:null,fields:{},cache:{},default_params:{},fetchable_params:{},get:(function t(x,w){if(!this.cache[this.model_name]){this.cache[this.model_name]={}}if(!this.cache[this.model_name][x]){this.cache[this.model_name][x]=new this(x,w)}return this.cache[this.model_name][x]}),save_many_from_events:(function u(z,D,w){var B,C,A,x;for(var y=0;y<z.length;y++){B=z[y];if(B.actor&&B.actor.login&&B.actor.avatar_url){C=o.Models.account.get(B.actor.login+"@"+D.name,w);C.update_data("details",B.actor)}if(B.repository&&B.repository.full_name&&(B.repository.description||B.repository.pushed_at)){if(B.repository.full_name.indexOf("/")!=-1){A=o.Models.repository.get(B.repository.full_name+"@"+D.name,w);A.update_data("details",B.repository)}}if(B.type=="ForkEvent"&&B.forkee){A=o.Models.repository.get(B.forkee.full_name+"@"+D.name,w);A.update_data("details",B.forkee)}}})},__init__:(function b(z,w){var y=z.split("@");this.id=z;this.ref=y[0];this.provider=w.providers[y[1]];this.controller=w;this.list_page_status={};this.details_fetched=false;this.flags={};for(var x in this.__classvars__.fields){if(this.__classvars__.fields[x] instanceof Array){this[x]={};this.list_page_status[x]={__global__:{all:false}}}else{this[x]=null}}}),is_flag_set:(function f(w){return(typeof this.flags["flag_"+w]!="undefined")}),is_flagged:(function h(w){return !!this.flags["flag_"+w]}),can_have_flag:(function c(w){return(this.$class.flags.indexOf(w)!==-1)}),set_flag:(function e(w,x){this.flags["flag_"+w]=!!x}),is_type_list:(function i(w){return(this.$class.fields[w] instanceof Array)}),is_type_string:(function l(w){return(this.$class.fields[w]==="")}),update_data:(function v(w,x,y){if(this.is_type_list(w)){this[w][y||""]=x}else{if(this.is_type_string(w)){this[w]=x}else{if(this[w]===null){this[w]={}}this[w]=$.extend(this[w],x)}}}),get_list:(function p(B,y,C){var A=this.filter_fetchable_params(B,y);if(this["sort_and_filter_"+B]){var x=this.list_page_status[B].__global__.all;if(!x){var z=this.filter_unfetchable_params(B,y);if(!_.isEmpty(z)){C=C||this[B][$.param(A)];x=true}}if(x){var w=this["sort_and_filter_"+B](y,C);if(w!==null){return w}}}return C||this[B][$.param(A)]}),filter_fetchable_params:(function q(w,x){x=x||{};if(this.$class.fetchable_params[w]){return _.pick(x,this.$class.fetchable_params[w])}else{return x}}),filter_unfetchable_params:(function s(w,x){x=x||{};if(this.$class.fetchable_params[w]){return _.omit(x,this.$class.fetchable_params[w])}else{return{}}}),fetch:(function n(y,B,x,A,z){var w=this;A=A||{};if(this.$class.default_params[y]){A=$.extend({},this.$class.default_params[y],A);delete A.max_pages}w.provider["get_"+w.$class.model_name+"_"+y](w.ref,function(C,D){if(C&&C.status==404&&!z){D=w.$class.fields[y];C=null}if(C){if(x){x(C)}}else{if(B){B(D)}}},A)}),fetched:(function d(w,x){if(this.is_type_list(w)){if(this.list_page_status[w].__global__.all){return true}return(typeof this[w][x]!="undefined")}else{if(w=="details"){return this.details_fetched}else{return(this[w]!==null)}}}),fetch_full:(function m(y,C,B,z,x){var w=this,A;B=this.filter_fetchable_params(y,B);A=$.param(B);if(y!="details"&&!w.fetched("details","")){w.fetch_full("details",function(){w.fetch_full(y,C,B,z)});return}if(z&&this.list_page_status[y]){w.list_page_status[y].__global__={all:false}}if(z||!w.fetched(y,A)){w.fetch(y,function(D){if(y=="details"){w.details_fetched=true}w.update_data(y,D,A);if(w.is_type_list(y)){w.update_list_page_status(y,B,1,D?D.length||0:0)}C()},function(D){w.controller.fetch_full_error(D,w,y,C,B,z,x)},B,"fail_if_404")}else{C()}}),update_list_page_status:(function k(C,z,D,x){var A=this.$class.default_params[C]||{},E=$.param(z),w=A.max_pages||null,y=A.per_page||null,B=true;if(!x){B=false}else{if(w&&D>=w){B=false}else{if(y&&x<y){B=false}}}this.list_page_status[C][E]={last_page:D,maybe_more:B};if(B){this.list_page_status[C].__global__={all:false}}else{this.list_page_status[C].__global__={all:true,params:z,str_params:E};if(this["manage_global_for_"+C]){this["manage_global_for_"+C]()}}}),_fetch_more:(function a(y,C,B,x){var w=this,A,z;C=this.filter_fetchable_params(y,C);A=$.param(C);z=$.extend({},C,{page:w.list_page_status[y][A].last_page+1});w.fetch(y,function(D){w[y][A]=w[y][A].concat(D);w.update_list_page_status(y,C,z.page,D?D.length||0:0);B(D)},x,z)}),fetch_more:(function j(y,A,z,x){var w=this;this.list_page_status[y].__global__={all:false};this._fetch_more(y,z,A,function(B){w.controller.fetch_more_error(B,w,y,A,z,x)})}),fetch_all:(function g(C,x,D,A,E){var B=this,F;A=this.filter_fetchable_params(C,A);F=$.param(A);B.list_page_status[C].__global__={all:false};var z=function(G){x(G);if(B.list_page_status[C][F].maybe_more){w()}else{D()}};var y=function(G){B.controller.fetch_all_error(G,B,C,x,D,A,E)};var w=function(){B._fetch_more(C,A,z,y)};w()}),sort_and_filter_events:(function r(x,y){var z=x.mode==="display",w,A;if(!x.type){return z?y:[]}w=z?_.filter:_.reject;A=x.type.split(",");return w(y,function(B){return(A.indexOf(B.type)!==-1)})})})})(Reposio);(function(g){g.Models.account=g.Models.base.$extend({__classvars__:{model_name:"account",fields:{details:{},repositories:[],stars:[],own_events:[],received_events:[],followers:[],following:[],org_members:[],orgs:[]},flags:["follow"],default_params:{repositories:{per_page:50},stars:{per_page:50},own_events:{per_page:30,max_pages:10},received_events:{per_page:30,max_pages:10},followers:{per_page:50},following:{per_page:50},org_members:{per_page:50}},fetchable_params:{repositories:["direction","sort","type"],stars:["direction","sort"],own_events:[],received_events:[]},sort_and_filter_helpers:{repositories:{filter_type:(function m(q){return(q.user.login==this.username)}),filter_type_method:{member:_.reject,owner:_.filter},filter_forks:(function f(q){return q.is_fork}),filter_forks_method:{no:_.reject,yes:_.filter},filter_language:(function l(q){return(q.language&&q.language==this)}),sort_field:{created:"created_at",pushed:"pushed_at",updated:"updated_at",full_name:"full_name"}},stars:{sort_field:{created:"starred_order",updated:"pushed_at"},filter_forks:(function j(q){return q.is_fork}),filter_forks_method:{no:_.reject,yes:_.filter},filter_language:(function d(q){return(q.language&&q.language==this)})}},save_many:(function c(s,u,q){var t;for(var r=0;r<s.length;r++){t=g.Models.account.get(s[r].login+"@"+u.name,q);t.update_data("details",s[r])}})},__init__:(function e(r,q){this.$super(r,q);this.username=this.ref}),update_data:(function i(q,r,s){this.$super(q,r,s);switch(q){case"repositories":case"stars":g.Models.repository.save_many(r,this.provider,this.controller);break;case"followers":case"following":case"org_members":g.Models.account.save_many(r,this.provider,this.controller);break;case"orgs":g.Models.account.save_many(_.map(r,function(t){t.type="Organization";return t}),this.provider,this.controller);break;case"own_events":case"received_events":g.Models.base.save_many_from_events(r,this.provider,this.controller);break}}),manage_global_for_repositories:(function k(){var q=this.list_page_status.repositories.__global__;if(q.params.type!="all"){q.all=false}}),sort_and_filter_repositories:(function p(q,u){var s=this.list_page_status.repositories.__global__,r=this.$class.sort_and_filter_helpers.repositories,t=u||this.repositories[s.str_params];if(q.type&&q.type!="all"){t=r.filter_type_method[q.type](t,r.filter_type,this)}if(q.forks&&q.forks!="all"){t=r.filter_forks_method[q.forks](t,r.filter_forks)}if(q.language){t=_.filter(t,r.filter_language,q.language=="CSharp"?"C#":q.language)}if(u||q.sort!=s.params.sort){t=_.sortBy(t,r.sort_field[q.sort]);if(q.direction=="desc"){t.reverse()}}else{if(q.direction!=s.params.direction){t.reverse();if(q.type=="all"){s.params.direction=q.direction}}}return t}),manage_global_for_stars:(function o(){var q=this.list_page_status.stars.__global__;if(q.params.sort!="created"){q.all=false}}),sort_and_filter_stars:(function n(q,v){var t=this.list_page_status.stars.__global__,s=this.$class.sort_and_filter_helpers.stars,u=v||this.stars[t.str_params],w;if((!t.all&&q.sort=="created")||(t.all&&!t.default_order_saved)){if(t.all){t.default_order_saved=true}if((t.all?t.params:q).direction=="desc"){u.reverse();if(t.all){t.params.direction="asc"}}var r=t.all?"":_.uniqueId();_.each(u,function(y,x){y.starred_order=r+x});if(!t.all&&q.direction=="desc"){u.reverse()}}if(q.language){u=_.filter(u,s.filter_language,q.language=="CSharp"?"C#":q.language)}if(q.forks&&q.forks!="all"){u=s.filter_forks_method[q.forks](u,s.filter_forks,this)}if(v||q.sort!=t.params.sort){u=_.sortBy(u,s.sort_field[q.sort]);if(q.direction=="desc"){u.reverse()}}else{if(q.direction!=t.params.direction){u.reverse();t.params.direction=q.direction}}return u}),sort_and_filter_own_events:(function b(q,t){var r=this.list_page_status.own_events.__global__,s=t||this.own_events[r.str_params];return this.sort_and_filter_events(q,s)}),sort_and_filter_received_events:(function h(q,t){var r=this.list_page_status.received_events.__global__,s=t||this.received_events[r.str_params];return this.sort_and_filter_events(q,s)}),is_organization:(function a(){return(this.details&&this.details.type&&this.details.type=="Organization")})})})(Reposio);(function(d){d.Models.repository=d.Models.base.$extend({__classvars__:{model_name:"repository",fields:{details:{},readme:"",activity:[],forks:[],stars:[],contributors:[]},flags:["star","watch"],default_params:{activity:{per_page:30,max_pages:10},forks:{per_page:50},stars:{per_page:50},contributors:{per_page:100}},fetchable_params:{forks:["sort"],activity:[]},sort_and_filter_helpers:{forks:{sort_field:{newest:"created_at",oldest:"created_at",watchers:"watchers_count"},filter_never_updated:(function g(h){return h.pushed_at<=h.created_at})}},save_many:(function f(k,m,h){var l;for(var j=0;j<k.length;j++){l=d.Models.repository.get(k[j].full_name+"@"+m.name,h);l.update_data("details",k[j])}})},__init__:(function b(j,h){this.$super(j,h);this.path=this.ref;this.href_id=this.id.replace("/",":");var i=this.path.split("/");this.details={name:i[1],user:{login:i[0]}}}),update_data:(function c(i,j,k){this.$super(i,j,k);switch(i){case"details":var h=d.Models.account.get(this.details.user.login+"@"+this.provider.name,this.controller);if(j.user){h.update_data("details",j.user)}break;case"forks":d.Models.repository.save_many(j,this.provider,this.controller);break;case"stars":case"contributors":d.Models.account.save_many(j,this.provider,this.controller);break;case"activity":d.Models.base.save_many_from_events(j,this.provider,this.controller);break}}),sort_and_filter_forks:(function a(h,l){var j=this.list_page_status.forks.__global__,i=this.$class.sort_and_filter_helpers.forks,k=l||this.forks[j.str_params];if(h.never_updated=="hide"){k=_.reject(k,i.filter_never_updated)}k=_.sortBy(k,i.sort_field[h.sort]);if(h.sort!="oldest"){k.reverse()}return k}),sort_and_filter_activity:(function e(h,k){var i=this.list_page_status.activity.__global__,j=k||this.activity[i.str_params];return this.sort_and_filter_events(h,j)})})})(Reposio);(function(r){var aB=(function P(aD){this.provider=aD});aB.prototype.format=(function w(aE,aF){if(aE.type&&this[aE.type]){var aD=this[aE.type](aE,aF);if(!aD){aD=this.base_format(aE,aF,"<em>("+aE.type.replace("Event","").toLowerCase()+")</em>")}return{event:aE,source:aF,provider:this,html:aD,day:this.provider.controller.display.format_date(aE.created_at)}}return null});aB.prototype.format_actor=(function aA(aF,aG,aE){var aD='<a class="account-link'+(aE?" main-link":"")+'" href="#account_home!account='+aF.login+"@"+aG.provider.name+'">';if(aF.avatar_url){aD+='<img class="avatar-small" src="img/default-avatar.png" data-original="'+aF.avatar_url+'" />'}aD+=aF.login;aD+="</a>";return aD});aB.prototype.format_repo=(function C(aH,aG,aI,aE,aF){var aJ=aH.full_name.split("/"),aD;aD='<a class="repo-link'+(aE?" main-link":"")+'" href="#repository_home!repository='+aH.full_name.replace("/",":")+"@"+aI.provider.name+'">'+aJ[1]+"</a>";if(aF||aG.login!=aJ[0]&&(aI.$class.model_name!="account"||aI.username!=aJ[0])){aD+=" by "+this.format_actor({login:aJ[0]},aI)}return aD});aB.prototype.base_format=(function B(aH,aI,aF,aK,aJ,aE){var aD,aG;aD='<p class="ui-li-aside">'+this.provider.controller.display.format_date(aH.created_at,"show-time",null,"time-only")+"</p>";if(!aJ&&aH.repository&&aH.repository.full_name){aJ=this.format_repo(aH.repository,aH.actor,aI,"main")}aG=this.format_actor(aH.actor,aI,"main")+" "+aF;if(aJ){aG+=" "+aJ}aD+='<div class="event-main">'+aG+"</div>";if(aE){aD+=this.format_external_link(aE)}if(aK){aD+='<p class="ui-li-desc">'+aK+"</p>"}return aD});aB.prototype.markdown_event_more=(function v(aD){if(!aD){return""}result='<div class="markdown">';result+=marked(aD,{sanitize:true,breaks:true,smartLists:true});result+="</div>";return result});aB.prototype.trigger_text=(function p(aE,aD){if(aD){return'<a href="#" class="collapsible-trigger">'+aE+"</a>"}else{return aE}});aB.prototype.more=(function ah(aE){var aD='<div data-role="collapsible" data-content-theme="d" data-corners="false" data-mini="true" class="event-more"><h3>More</h3>';aD+=aE;aD+="</div>";return aD});aB.prototype.description_fetcher=(function ay(aF,aG,aD){var aH,aE;if(!aD){aD=aF.repository}if(aD.full_name&&(!aG.path||aD.full_name!=aG.path)){aE=r.Models.repository.get(aD.full_name+"@github",this.provider.controller);if(typeof(aD.description)!="undefined"){aE.update_data("details",aD)}aH="Description: ";if(aE.details&&aE.details.description){aH+="<strong>"+this.provider.controller.display.escape_html(aE.details.description)+"</strong>"}else{if(aE.details_fetched){aH+="<em>no description</em>"}else{aH+='<a href="#" class="fetch-desc-trigger" data-repository="'+aE.id+'">click to fetch</a>'}}}return aH});aB.prototype.format_external_link=(function h(aD){var aE='<a class="ui-li-link-alt ui-btn ui-btn-icon-notext ui-btn-up-c" data-theme="c" href="'+aD+'" target="_blank">';aE+='<span class="ui-btn ui-btn-icon-notext">';aE+='<span class="ui-btn-inner">';aE+='<span class="ui-icon ui-icon-arrow-r">&nbsp;</span>';aE+="</span>";aE+="</span>";aE+="</a>";return aE});aB.prototype.CommitCommentEvent=(function e(aE,aF){var aD=this.trigger_text("commented",aE.comment.body)+" a commit on";return this.base_format(aE,aF,aD,null,null,aE.comment.html_url)});aB.prototype.more_CommitCommentEvent=(function t(aD,aE){return this.more(this.markdown_event_more(aD.comment.body))});aB.prototype.CreateEvent=(function d(aF,aG){var aD="created",aH,aE;switch(aF.ref_type){case"branch":aD+=" a branch on";aH="Branch: <strong>"+aF.ref+"</strong>";aE="https://github.com/"+aF.repository.full_name+"/tree/"+aF.ref;break;case"repository":if(aF.description){aH="Description: <strong>"+aF.description+"</strong>"}aE="https://github.com/"+aF.repository.full_name;break;case"tag":aD+=" a tag on";aH="Tag: <strong>"+aF.ref+"</strong>";aE="https://github.com/"+aF.repository.full_name+"/tree/"+aF.ref;break}return this.base_format(aF,aG,aD,aH,null,aE)});aB.prototype.DeleteEvent=(function ad(aE,aF){var aD="deleted",aG;switch(aE.ref_type){case"branch":aD+=" a branch on";aG="Branch: <strong>"+aE.ref+"</strong>";break;case"tag":aG="Tag: <strong>"+aE.ref+"</strong>";break}return this.base_format(aE,aF,aD,aG)});aB.prototype.DownloadEvent=(function W(aD,aE){});aB.prototype.FollowEvent=(function am(aD,aE){var aF=this.format_actor(aD.target,aE);return this.base_format(aD,aE,"started following",null,aF)});aB.prototype.ForkEvent=(function az(aE,aF){var aD=this.trigger_text("forked",aE.forkee),aG=this.description_fetcher(aE,aF,aE.forkee);return this.base_format(aE,aF,aD,aG)});aB.prototype.more_ForkEvent=(function aq(aD,aE){return this.more("<p>Fork: "+this.format_repo(aD.forkee,aD.actor,aE,null,true)+"</p>")});aB.prototype.ForkApplyEvent=(function aa(aD,aE){return this.base_format(aD,aE,"applied the fork queue to")});aB.prototype.GistEvent=(function ar(aE,aG){var aF=aE.action,aD,aH;if(!aF.match(/d$/)){if(!aF.match(/e$/)){aF+="e"}aF+="d"}aD=aF+" a gist";if(aE.gist.description){aH="Description: <strong>"+aE.gist.description+"</strong>"}return this.base_format(aE,aG,aD,aH,null,aE.gist.html_url)});aB.prototype.GollumEvent=(function L(aF,aG){var aH=this.format_repo(aF.repository,aF.actor,aG),aD=this.trigger_text("edited",true)+" the "+aH+" wiki",aE="https://github.com/"+aF.repository.full_name+"/wiki";return this.base_format(aF,aG,aD,null," ",aE)});aB.prototype.more_GollumEvent=(function o(aF,aH){var aE='<ul data-role="listview" data-theme="d">';for(var aD=0;aD<aF.pages.length;aD++){var aG=aF.pages[aD];aE+="<li>";aE+="<em>"+aG.title+"</em> — <strong>"+aG.action+"</strong>";aE+="</li>"}aE+="</ul>";return this.more(aE)});aB.prototype.IssueCommentEvent=(function D(aF,aG){var aD,aH=(aF.is_pull_request?"Pull request":"Issue")+": <strong>#"+aF.issue.number+" - "+aF.issue.title+"</strong>",aE;if(aF.action=="created"){aD=this.trigger_text("commented",aF.comment.body);aD+=" "+(aF.is_pull_request?"a pull request":"an issue")+" on"}else{aD=aF.action+" a ";aD+=this.trigger_text("comment",aF.action!="deleted"&&aF.comment.body);aD+=" on an issue on"}if(aF.comment.html_url){aE=aF.comment.html_url}else{if(aF.issue.html_url&&aF.comment.id){aE=aF.issue.html_url+"#issuecomment-"+aF.comment.id}}return this.base_format(aF,aG,aD,aH,null,aE)});aB.prototype.more_IssueCommentEvent=(function u(aD,aE){return this.more(this.markdown_event_more(aD.comment.body))});aB.prototype.IssuesEvent=(function al(aE,aF){var aD=aE.action+" an "+this.trigger_text("issue",aE.issue.body)+" on",aG="Issue <strong>#"+aE.issue.number+" - "+aE.issue.title+"</strong>";return this.base_format(aE,aF,aD,aG,null,aE.issue.html_url)});aB.prototype.more_IssuesEvent=(function A(aD,aE){return this.more(this.markdown_event_more(aD.issue.body))});aB.prototype.MemberEvent=(function a(aE,aF){var aD=aE.action+" ",aG;aD+=this.format_actor(aE.member,aF);aD+=" as a member "+(aE.action=="added"?"to":"from");aG=this.description_fetcher(aE,aF);return this.base_format(aE,aF,aD,aG)});aB.prototype.PublicEvent=(function i(aD,aE){return this.base_format(aD,aE,"open sourced")});aB.prototype.PullRequestEvent=(function m(aE,aF){var aD=aE.action+" a "+this.trigger_text("pull request",aE.pull_request.body)+" on",aG="Pull request <strong>#"+aE.pull_request.number+" - "+aE.pull_request.title+"</strong>";return this.base_format(aE,aF,aD,aG,null,aE.pull_request.html_url)});aB.prototype.more_PullRequestEvent=(function J(aD,aE){return this.more(this.markdown_event_more(aD.pull_request.body))});aB.prototype.PullRequestReviewCommentEvent=(function ac(aE,aF){var aD=this.trigger_text("commented",aE.comment.body)+" a pull request on",aG;if(aE.pull_request.number){aG="Pull request <strong>#"+aE.pull_request.number+"</strong>"}return this.base_format(aE,aF,aD,aG,null,aE.comment.html_url)});aB.prototype.more_PullRequestReviewCommentEvent=(function Y(aD,aE){return this.more(this.markdown_event_more(aD.comment.body))});aB.prototype.PushEvent=(function an(aF,aG){var aD="pushed "+(aF.size?this.trigger_text(aF.size+" commit"+(aF.size>1?"s":""),true):"")+" to",aH,aE;if(aF.ref&&aF.ref.indexOf("refs/heads/")===0){aH="Branch: <strong>"+aF.ref.replace("refs/heads/","")+"</strong>"}if(aF.size==1){aE="https://github.com/"+aF.repository.full_name+"/commit/"+aF.commits[0].sha}else{if(aF.before&&aF.head){aE="https://github.com/"+aF.repository.full_name+"/compare/"+aF.before+"..."+aF.head}}return this.base_format(aF,aG,aD,aH,null,aE)});aB.prototype.more_PushEvent=(function ab(aI,aJ){var aH='<ul data-role="listview" data-theme="d">';for(var aG=0;aG<aI.commits.length;aG++){var aK=aI.commits[aG],aD=aK.message.split("\n"),aF=aD.shift(),aE=aD.length?"<br />"+aD.join("<br />"):"";aH+="<li"+(aE.length?' class="with-extension"':"")+">";aH+="<strong>"+aK.author.name+"</strong>";aH+=" — <em>";aH+=aF;if(aE){aH+='<span class="extension">'+aE+"</span>"}aH+="</em>";aH+="</li>"}aH+="</ul>";return this.more(aH)});aB.prototype.TeamAddEvent=(function av(aD,aE){});aB.prototype.WatchEvent=(function n(aE,aF){var aD=aE.action+" watching",aG=this.description_fetcher(aE,aF);return this.base_format(aE,aF,aD,aG)});var ag=(function j(aD){this.conf=(providers_config?providers_config.github||{}:{});this.name="github";if(this.conf.auth=="oauth"&&this.conf.token){this.set_token(this.conf.token)}Gh3.Helper.cache=false;this.controller=aD;this.formatter=new aB(this)});ag.prototype.set_token=(function ao(aD){this.conf.token=aD;if(aD){Gh3.Helper.headers.Authorization="token "+aD}else{if(Gh3.Helper.headers.Authorization){delete Gh3.Helper.headers.Authorization}}});ag.prototype.login=(function K(aH,aE,aG){if(!aH||aH.provider!=this.name||!aH.token){return false}this.set_token(aH.token);var aF=this,aD=new Gh3.CurrentUser();aD.fetch(function(aJ,aI){if(aJ||!aI){if(aG){aG(aJ)}}else{if(aE){aE(aF.map_account(aI))}}});return true});ag.prototype.logout=(function c(){this.set_token()});ag.prototype.can_login=(function H(){return !!(this.conf.auth=="oauth"&&this.conf.client_id&&this.conf.token_script)});ag.prototype.login_url=(function z(aD){this.conf.last_state=Math.random();var aE="https://github.com/login/oauth/authorize?scope=public_repo,user:follow&client_id=";aE+=this.conf.client_id;aE+="&redirect_uri="+escape(aD);aE+="&state="+this.conf.last_state;return aE});ag.prototype.check_login=(function aj(aG,aE,aH){var aF=this,aD=this.conf.last_state;delete this.conf.last_state;if(aG.error||!aG.code||!aG.state||aG.state!=aD){return aH()}$.ajax({url:this.conf.token_script+"?code="+escape(aG.code),dataType:"json"}).done(function(aJ){if(aJ.error||!aJ.token){return aH()}aF.set_token(aJ.token);var aI=new Gh3.CurrentUser();aI.fetch(function(aL,aK){if(!aL&&aK){aE(aF.map_account(aK),{token:aJ.token})}else{aH()}})}).fail(aH)});ag.prototype.get_user=(function M(aD){return new Gh3.User(aD)});ag.prototype.get_repo=(function g(aE){var aD=aE.split("/");return new Gh3.Repository(aD[1],this.get_user(aD[0]))});ag.prototype.map_type={accounts:"account",repositories:"repository",events:"event"};ag.prototype.decorate_collback=(function N(aG,aD,aE){var aF=this;return function(aI,aJ){var aH;if(!aI){switch(aE){case"field":aH=aJ[aD];break;case"repositories":case"accounts":case"events":aH=_.map(aJ[aD].getAll(),aF["map_"+aF.map_type[aE]],aF);break;default:aH=aJ[aD].getAll()}}aG(aI,aI?null:aH)}});ag.prototype.map=(function ai(aH,aF){var aE={},aD;if(aH){for(var aG=0;aG<aF._.length;aG++){aD=aF._[aG];if(typeof(aH[aD])=="undefined"){continue}aE[aF[aD]||aD]=aH[aD]}}return aE});ag.prototype.account_mapping={_:["login","type","avatar_url","name","created_at","company","location","email","blog","public_repos","followers_count","following_count","contributions"],blog:"site",public_repos:"repos_count"};ag.prototype.map_account=(function l(aE){var aD={};if(aE){aD=this.map(aE,this.account_mapping)}return aD});ag.prototype.repository_mapping={_:["name","full_name","description","pushed_at","created_at","updated_at","forks_count","fork","watchers_count","language"],fork:"is_fork"};ag.prototype.map_repository=(function b(aE){var aD={};if(aE){aD=this.map(aE,this.repository_mapping);if(aE.fork&&aE.parent){aD.parent=this.map_repository(aE.parent)}if(aE.user){aD.user=this.map_account(aE.user)}}return aD});ag.prototype.map_event=(function E(aH){var aD={},aJ;if(aH){aJ=aH.payload||{};switch(aH.type){case"CommitCommentEvent":aD.comment=this.map(aJ.comment,{_:["body","html_url"]});break;case"CreateEvent":aD=this.map(aJ,{_:["ref_type","ref","description"]});break;case"DeleteEvent":aD=this.map(aJ,{_:["ref_type","ref"]});break;case"FollowEvent":if(aJ.target&&aJ.target.login){aD.target={login:aJ.target.login}}break;case"ForkEvent":if(aJ.forkee&&isNaN(aJ.forkee)){aD.forkee=this.map_repository(aJ.forkee)}break;case"GistEvent":aD=this.map(aJ,{_:["action"]});aD.gist=this.map(aJ.gist,{_:["description","html_url"]});break;case"GollumEvent":aD.pages=[];if(aJ.pages&&aJ.pages.length){for(var aK=0;aK<aJ.pages.length;aK++){aD.pages.push(this.map(aJ.pages[aK],{_:["title","action"]}))}}break;case"IssueCommentEvent":aD=this.map(aJ,{_:["action"]});aD.issue=this.map(aJ.issue,{_:["number","title","html_url"]});aD.issue.is_pull_request=(aJ.issue&&aJ.issue.pull_request&&aJ.issue.pull_request.html_url);aD.comment=this.map(aJ.comment,{_:["body","html_url","id"]});break;case"IssuesEvent":aD=this.map(aJ,{_:["action"]});aD.issue=this.map(aJ.issue,{_:["number","title","body","html_url"]});break;case"MemberEvent":aD=this.map(aJ,{_:["action"]});if(aJ.member&&aJ.member.login){aD.member={login:aJ.member.login}}break;case"PullRequestEvent":aD=this.map(aJ,{_:["action","number"]});aD.pull_request=this.map(aJ.pull_request,{_:["body","title","html_url"]});if(aD.number){aD.pull_request.number=aD.number;delete aD.number}break;case"PullRequestReviewCommentEvent":var aE;aD.pull_request={};if(aJ.comment._links&&aJ.comment._links.pull_request&&aJ.comment._links.pull_request.href){aE=aJ.comment._links.pull_request.href;aE=aE.match(/(\d+)\/?$/);aE=aE?aE[1]:null;if(aE){aD.pull_request.number=aE}}aD.comment=this.map(aJ.comment,{_:["body","html_url"]});if(!aD.comment.html_url&&aJ.comment&&aJ.comment._links&&aJ.comment._links.html){aD.comment.html_url=aJ.comment._links.html.href}break;case"PushEvent":var aL,aF;aD=this.map(aJ,{_:["size","ref","before","head"]});aD.commits=[];if(aD.size){if(aJ.commits){aF=aJ.commits;aL=false}else{if(aJ.shas){aF=aJ.shas;aL=true}}if(!aF.length){aD.size=0}else{for(var aI=0;aI<aF.length;aI++){var aG=aF[aI];aD.commits.push({sha:aL?aG[0]:aG.sha,message:aL?aG[2]:aG.message,author:{name:aL?aG[3]:aG.author.name}})}}}break;case"WatchEvent":aD=this.map(aJ,{_:["action"]});break}aD.type=aH.type;aD.created_at=aH.created_at;aD.actor=this.map(aH.actor,{_:["login","avatar_url"]});aD.repository=this.map(aH.repository||aH.repo,{_:["name","full_name"]});if(aD.repository&&(aD.repository.full_name||aD.repository.name)){if(!aD.repository.full_name&&aD.repository.name){aD.repository.full_name=aD.repository.name;aD.repository.name=null}if(aD.type=="CreateEvent"&&aD.ref_type=="repository"&&aD.description){aD.repository.description=aD.description}}}return aD});ag.prototype.get_account_details=(function k(aH,aG,aF){var aE=this;function aD(aI,aJ){if(!aI&&aJ){aJ=aE.map_account(aJ)}return aG(aI,aJ)}this.get_user(aH).fetch(aD,aF)});ag.prototype.get_account_repositories=(function au(aF,aE,aD){this.get_user(aF).repositories.fetch(this.decorate_collback(aE,"repositories","repositories"),aD)});ag.prototype.get_account_stars=(function at(aF,aE,aD){this.get_user(aF).starred.fetch(this.decorate_collback(aE,"starred","repositories"),aD)});ag.prototype.get_account_own_events=(function s(aF,aE,aD){this.get_user(aF).events.fetch(this.decorate_collback(aE,"events","events"),aD)});ag.prototype.get_account_received_events=(function x(aF,aE,aD){this.get_user(aF).received_events.fetch(this.decorate_collback(aE,"received_events","events"),aD)});ag.prototype.get_account_followers=(function Z(aF,aE,aD){this.get_user(aF).followers.fetch(this.decorate_collback(aE,"followers","accounts"),aD)});ag.prototype.get_account_following=(function q(aF,aE,aD){this.get_user(aF).following.fetch(this.decorate_collback(aE,"following","accounts"),aD)});ag.prototype.get_account_org_members=(function f(aF,aE,aD){this.get_user(aF).members.fetch(this.decorate_collback(aE,"members","accounts"),aD)});ag.prototype.get_account_orgs=(function aC(aF,aE,aD){this.get_user(aF).orgs.fetch(this.decorate_collback(aE,"orgs","accounts"),aD)});ag.prototype.get_repository_details=(function y(aE,aH,aG){var aF=this;function aD(aI,aJ){if(!aI&&aJ){aJ=aF.map_repository(aJ)}return aH(aI,aJ)}this.get_repo(aE).fetch(aD,aG)});ag.prototype.get_repository_readme=(function G(aD,aF,aE){this.get_repo(aD).fetchReadme(this.decorate_collback(aF,"readme","field"),aE)});ag.prototype.get_repository_activity=(function R(aD,aF,aE){this.get_repo(aD).events.fetch(this.decorate_collback(aF,"events","events"),aE)});ag.prototype.get_repository_forks=(function I(aD,aF,aE){this.get_repo(aD).forks.fetch(this.decorate_collback(aF,"forks","repositories"),aE)});ag.prototype.get_repository_stars=(function O(aD,aF,aE){this.get_repo(aD).stargazers.fetch(this.decorate_collback(aF,"stargazers","accounts"),aE)});ag.prototype.get_repository_contributors=(function ax(aD,aF,aE){this.get_repo(aD).contributors.fetch(this.decorate_collback(aF,"contributors","accounts"),aE)});ag.prototype._check_flag=(function af(aG,aD,aH,aF){var aE=new Gh3[aD](aG);aE.check(aH,aF)});ag.prototype._set_flag=(function S(aG,aD,aH,aF){var aE=new Gh3[aD](aG);aE.set(function(){aH(true)},aF)});ag.prototype._unset_flag=(function T(aG,aD,aH,aF){var aE=new Gh3[aD](aG);aE.unset(function(){aH(false)},aF)});ag.prototype.check_star=(function ak(aE,aF,aD){this._check_flag(this.get_repo(aE),"Star",aF,aD)});ag.prototype.star=(function Q(aE,aF,aD){this._set_flag(this.get_repo(aE),"Star",aF,aD)});ag.prototype.unstar=(function F(aE,aF,aD){this._unset_flag(this.get_repo(aE),"Star",aF,aD)});ag.prototype.check_watch=(function aw(aE,aF,aD){this._check_flag(this.get_repo(aE),"Watching",aF,aD)});ag.prototype.watch=(function X(aE,aF,aD){this._set_flag(this.get_repo(aE),"Watching",aF,aD)});ag.prototype.unwatch=(function U(aE,aF,aD){this._unset_flag(this.get_repo(aE),"Watching",aF,aD)});ag.prototype.check_follow=(function ae(aF,aE,aD){this._check_flag(this.get_user(aF),"Following",aE,aD)});ag.prototype.follow=(function V(aF,aE,aD){this._set_flag(this.get_user(aF),"Following",aE,aD)});ag.prototype.unfollow=(function ap(aF,aE,aD){this._unset_flag(this.get_user(aF),"Following",aE,aD)});if(!r.Providers){r.Providers={}}r.Providers.github=ag})(Reposio);(function(D){D.View=Class.$extend({__classvars__:{model:null,view_name:null,views:{},views_cache:{},get:(function C(I,J){if(!this.views_cache[I.id]){this.views_cache[I.id]=new this.views[I.id](I,J)}return this.views_cache[I.id]})},__init__:(function A(I,J){this.page=I;this.display=J;this.nodes_cache=null;this.container=null;this.init_events();this.accept_options=this.__classvars__.accept_options}),init_events:(function G(){}),cache_nodes:(function p(){this.container=this.page.nodes.content;this.nodes_cache={}}),nodes:(function l(){if(!this.nodes_cache){this.cache_nodes()}return this.nodes_cache}),reset:(function x(I){if(!this.page.node.data("mobile-page")){this.page.node.page()}}),update:(function n(J,I){})});D.View.views._list=D.View.$extend({__init__:(function y(I,J){this.$super(I,J);this.options={}}),cache_nodes:(function m(){this.$super();this.nodes_cache.list=this.container.children("ul");this.nodes_cache.load_buttons=this.container.children(".load-buttons");this.nodes_cache.load_more_button=this.nodes_cache.load_buttons.find("a.list-more-button");this.nodes_cache.load_all_button=this.nodes_cache.load_buttons.find("a.list-all-button")}),reset:(function o(J){this.$super();var I=this.nodes();this.empty_list_node();I.load_buttons.addClass("ui-hidden");I.load_more_button.addClass("ui-disabled");I.load_all_button.addClass("ui-disabled")}),empty_list_node:(function f(){var I=this.nodes(),J=I.list[0];while(J.firstChild){J.removeChild(J.firstChild)}}),update:(function g(L,K){var J=this.nodes(),I=this.get_items(L,this.get_data(L));this.empty_list_node();if(I.length){I[0].className+=" ui-first-child";this.update_list_node(I)}this.update_load_buttons(L);this.refresh_widgets()}),update_list_node:(function r(K){var J=this.nodes(),M=J.list[0],I=M.lastChild;if(K.length){K[K.length-1].className+=" ui-last-child";if(I){I.className=I.className.replace("ui-last-child","")}for(var L=0;L<K.length;L++){M.appendChild(K[L])}}}),complete:(function i(L,K){var J=this.nodes(),I=this.get_items(L,this.prepare_data(L,K));this.update_list_node(I);this.refresh_widgets()}),update_load_buttons:(function a(L){var I=this.nodes();if(!I.load_buttons.length){return}var J=$.param(this.options),K=L.list_page_status[this.$class.data_field][J];if(!L.list_page_status[this.$class.data_field].__global__.all&&(K?K.maybe_more:true)){this.enable_load_buttons()}else{this.hide_load_buttons()}}),toggle_load_buttons_enabled:(function d(J){var I=this.nodes();if(!I.load_buttons.length){return}I.load_more_button.toggleClass("ui-disabled",!J);I.load_all_button.toggleClass("ui-disabled",!J);if(J){this.show_load_buttons()}}),disable_load_buttons:(function w(){this.toggle_load_buttons_enabled(false)}),enable_load_buttons:(function v(){this.toggle_load_buttons_enabled(true)}),toggle_load_buttons_visible:(function F(J){var I=this.nodes();if(!I.load_buttons.length){return}I.load_buttons.toggleClass("ui-hidden",!J);if(!J){this.disable_load_buttons()}}),hide_load_buttons:(function q(){this.toggle_load_buttons_visible(false)}),show_load_buttons:(function B(){this.toggle_load_buttons_visible(true)}),refresh_widgets:(function H(){this.display.load_visible_images()}),get_data:(function u(I){return I.get_list(this.$class.data_field,this.options)}),prepare_data:(function k(J,I){return J.get_list(this.$class.data_field,this.options,I)}),get_items:(function z(J,I){}),options_form:(function e(){var I=this,L="#"+this.$class.view_name+"_options";if(!this._options_form){this._options_form=$(L);if(!this._options_form.length){var K=I.display.get_template(I.$class.view_name+"_options",true),J=$(K);this._options_form=J.find(L);setTimeout(function(){J.collapsible();$.mobile.checkboxradio.prototype.enhanceWithin(I._options_form,true);$.mobile.button.prototype.enhanceWithin(I._options_form,true);$.mobile.selectmenu.prototype.enhanceWithin(I._options_form,true);$.mobile.controlgroup.prototype.enhanceWithin(I._options_form,true);I.page.nodes.content.prepend(K)},500)}}return this._options_form}),get_options_from_form:(function h(){var P=this.options_form().serializeArray(),I,J={},Q=[],M={},L={},K=this.$class.view_name+"_options_";for(var O=0;O<P.length;O++){I=P[O].name.replace(K,"");if(I=="submit"){continue}if(!_.contains(Q,I)){Q.push(I);L[I]=$("#"+P[O].name).is("select[multiple=multiple]")}if(L[I]){if(!J[I]){J[I]=[]}J[I].push(P[O].value)}else{J[I]=P[O].value}}Q.sort();for(var N=0;N<Q.length;N++){M[Q[N]]=J[Q[N]]}return M}),manage_options:(function c(I){var J,K,L={},M=this.$class.view_name+"_options_";this.options_form().find("[type=reset]").click();J=$.extend({},this.$class.default_options);if(I){for(K in I){if(typeof(J[K])!=="undefined"){J[K]=decodeURIComponent(decodeURIComponent(I[K]))}}}for(K in J){L[M+K]=J[K]}this.options_form().unserializeForm($.param(L));this.options=J;return this.options}),init_events:(function E(){var K=this,N=(function L(S){S.preventDefault();S.stopPropagation();var Q=K.get_options_from_form(),P={},T="#"+K.$class.view_name;T+="!"+K.$class.model+"="+K.display.controller[K.$class.model].id.replace("/",":");for(var R in Q){P[R]=encodeURIComponent(Q[R])}T+="&"+$.param(P);window.location.hash=T;return false}),O=(function J(P){P.preventDefault();P.stopPropagation();if(!$(this).hasClass("ui-disabled")){var Q=K.display.pages[$.mobile.activePage.data("url")];$.mobile.loading("show");K.disable_load_buttons();K.display.ask_for_more(Q)}return false}),I=(function M(P){P.preventDefault();P.stopPropagation();if(!$(this).hasClass("ui-disabled")){var Q=K.display.pages[$.mobile.activePage.data("url")];$.mobile.loading("show");K.disable_load_buttons();K.display.ask_for_all(Q)}return false});$(document).on("submit","#"+this.__classvars__.view_name+"_options",N);$(document).on("click","#"+this.__classvars__.view_name+"_load_buttons .list-more-button",O);$(document).on("click","#"+this.__classvars__.view_name+"_load_buttons .list-all-button",I)})});D.View.views._accounts=D.View.views._list.$extend({get_items:(function s(J,I){return this.display.create_accounts_list_items(I,J.provider)})});D.View.views._repositories=D.View.views._list.$extend({get_items:(function j(J,I){return this.display.create_repositories_list_items(I,J.provider)})});D.View.views._events=D.View.views._list.$extend({get_items:(function b(M,K){var I=[];for(var J=0;J<K.length;J++){var L=M.provider.formatter.format(K[J],M);if(L){I.push(L)}}return this.display.create_events_list_items(I)}),refresh_widgets:(function t(){this.display.render_widgets(this.nodes().list);this.display.load_visible_images()})})})(Reposio);(function(d){d.View.views.account_home=d.View.$extend({__classvars__:{model:"account",view_name:"account_home"},cache_nodes:(function f(){this.$super();var h=this.nodes_cache;var g=this.container.find(".account-main");h.avatar=g.children("img");h.provider=g.children("p.provider");h.name=g.children("p.account-name");var i=g.children("h3");h.username=i.children("strong");h.organization=i.children("span");h.infos=this.container.find(".account-details");h.infos_loading=h.infos.children(".failover");h.infos_items=h.infos.children(".ui-li-has-icon");h.company_container=h.infos.children("li.account-company");h.company=h.company_container.children(":last");h.location_container=h.infos.children("li.account-location");h.location=h.location_container.children(":last");h.email_container=h.infos.children("li.account-email");h.email=h.email_container.children(":last");h.created_at_container=h.infos.children("li.account-created_at");h.created_at=h.created_at_container.children(":last");h.site_container=h.infos.children("li.account-site");h.site=h.site_container.find("a");h.orgs_container=this.container.find(".account-orgs")}),reset:(function c(h){this.$super();var g=this.nodes(),i=!!(h&&h.details);g.username.html(h.username||"loading...");g.name.html((i&&h.details.name)||"");g.avatar.attr("src","img/default-avatar.png");if(i&&h.details.avatar_url){g.avatar.attr("src",h.details.avatar_url)}if(i){this._update_org(h,g);this._update_details(h,g);if(!h.details.created_at){g.infos_loading.show()}}else{g.organization.hide();g.orgs_container.show();g.infos_items.hide();g.infos_loading.show()}if(!i||!h.orgs||!h.orgs.length){this.display.clear_listview(g.orgs_container,"Loading...",true)}}),_update_details:(function e(i,g){g.created_at.html(i.details.created_at?this.display.format_date(i.details.created_at):"");g.created_at_container.toggle(!!i.details.created_at);g.company.html(i.details.company||"");g.company_container.toggle(!!i.details.company);g.location.html(i.details.location||"");g.location_container.toggle(!!i.details.location);var h=!!(i.details.email&&i.details.email.indexOf("@")!==-1);g.email.html(h?i.details.email:"");g.email_container.toggle(h);g.site.html(i.details.site||"");g.site_container.toggle(!!i.details.site);g.site.attr("href",i.details.site||"/")}),_update_org:(function b(i,g){var h=i.is_organization();g.orgs_container.toggle(!h);g.organization.toggle(h);return h}),update:(function a(m,i){var h=this.nodes(),n=this;var l=this._update_org(m,h);h.username.html(m.username);h.provider.html(m.provider.name);h.avatar.attr("src",m.details.avatar_url);h.name.html(m.details.name||"");h.name.toggle(!!m.details.name);this._update_details(m,h);h.infos_loading.hide();if(!l){var k=(function j(p){m.update_data("orgs",p);if(m.orgs[""]&&m.orgs[""].length){n.display.clear_listview(h.orgs_container);h.orgs_container.append(n.display.create_accounts_list_items(m.orgs[""],m.provider));h.orgs_container.listview("refresh");n.display.load_visible_images()}else{n.display.clear_listview(h.orgs_container,"No organizations",true);h.orgs_container.fadeOut()}});var o=(function g(p){n.display.clear_listview(h.orgs_container,"Failed to load organizations",true)});if(typeof m.orgs[""]==="undefined"||i){m.fetch("orgs",k,o)}else{k(m.orgs[""])}}n.container.find("ul[data-role=listview]").listview("refresh")})});d.View.views.account_repositories=d.View.views._repositories.$extend({__classvars__:{model:"account",view_name:"account_repositories",data_field:"repositories",accept_options:true,default_options:{direction:"desc",forks:"all",language:null,sort:"pushed",type:"all"}}});d.View.views.account_stars=d.View.views._repositories.$extend({__classvars__:{model:"account",view_name:"account_stars",data_field:"stars",accept_options:true,default_options:{direction:"desc",forks:"all",language:null,sort:"created"}}});d.View.views.account_followers=d.View.views._accounts.$extend({__classvars__:{model:"account",view_name:"account_followers",data_field:"followers"}});d.View.views.account_following=d.View.views._accounts.$extend({__classvars__:{model:"account",view_name:"account_following",data_field:"following"}});d.View.views.account_members=d.View.views._accounts.$extend({__classvars__:{model:"account",view_name:"account_members",data_field:"org_members"}});d.View.views.account_activity=d.View.views._events.$extend({__classvars__:{model:"account",view_name:"account_activity",data_field:"own_events",accept_options:true,default_options:{mode:"display",type:null}}});d.View.views.account_events=d.View.views._events.$extend({__classvars__:{model:"account",view_name:"account_events",data_field:"received_events",accept_options:true,default_options:{mode:"display",type:null}}})})(Reposio);(function(d){d.View.views.repository_home=d.View.$extend({__classvars__:{model:"repository",view_name:"repository_home"},cache_nodes:(function c(){this.$super();var j=this.nodes_cache;var i=this.container.children(".repo-main");j.provider=i.children("p.provider");var k=i.children(".repo-path");j.name=k.children("strong.repo-name");j.owner_container=k.children("span.repo-owner-container");j.owner=j.owner_container.children("span.repo-owner");j.fork_container=i.children("div.repo-fork");var l=i.find(".repo-links");j.fork_name=l.children("span.repo-fork-name");j.fork_owner=l.find("span strong.repo-fork-owner");j.last_push_container=i.children("p.repo-last-push");j.last_push=j.last_push_container.children("span");j.desc_readme=this.container.children("div.ui-collapsible-set");j.description_container=j.desc_readme.children("div.repo-desc-container");j.description=j.description_container.find(".repo-desc");j.readme_container=j.desc_readme.children("div.repo-readme-container");j.readme=j.readme_container.find(".repo-readme")}),reset:(function h(j){this.$super();var i=this.nodes(),k=!!(j&&j.details);i.name.html((k&&j.details.name)||"loading...");if(k&&j.details.user){this._update_owner(j,i);i.owner_container.show()}else{i.owner_container.hide()}if(k&&j.details.is_fork&&j.details.parent){this._update_fork(j,i);i.fork_container.show()}else{i.fork_container.hide()}if(k&&j.details.pushed_at){this._update_last_push(j,i);i.last_push_container.show()}else{i.last_push_container.hide()}if(k&&(j.details.description||j.readme)){i.desc_readme.show()}else{i.desc_readme.hide()}i.description.text((k&&j.details.description)||"");i.readme.html((k&&j.readme)||"<em>Loading...</em>");this.display.render_widgets(this.container)}),_update_owner:(function f(j,i){i.owner.html(this.display.account_link(j.details.user.login,j.provider.name,j.details.user.avatar_url))}),_update_fork:(function a(j,i){i.fork_name.html(this.display.repository_link(j.details.parent.name,j.provider.name));i.fork_owner.html(this.display.account_link(j.details.parent.user.login,j.provider.name,j.details.parent.user.avatar_url))}),_update_last_push:(function b(j,i){i.last_push.html(j.details.pushed_at?this.display.format_date(j.details.pushed_at,true):"never !")}),update:(function g(k,n){var i=this.nodes();i.provider.html(k.provider.name);i.name.html(k.details.name);this._update_owner(k,i);i.owner_container.show();if(k.details.is_fork){this._update_fork(k,i);i.fork_container.show()}this._update_last_push(k,i);i.last_push_container.show();i.description.text(k.details.description||"<em>No description!</em>");i.description_container.toggle(!!k.details.description);var o=(function m(p){k.update_data("readme",p);if(!k.readme&&i.readme_container.hasClass("ui-collapsible-collapsed")){i.readme_container.fadeOut()}else{i.readme.html(k.readme||"<em>No readme!</em>")}});var j=(function l(p){i.readme.html("<em>Failed to load readme!</em>")});if(k.readme===null||n){k.fetch("readme",o,j)}else{o(k.readme)}i.desc_readme.show();i.readme_container.show();this.display.render_widgets(this.container)})});d.View.views.repository_forks=d.View.views._repositories.$extend({__classvars__:{model:"repository",view_name:"repository_forks",data_field:"forks",accept_options:true,default_options:{never_updated:"show",sort:"newest"}}});d.View.views.repository_activity=d.View.views._events.$extend({__classvars__:{model:"repository",view_name:"repository_activity",data_field:"activity",accept_options:true,default_options:{mode:"display",type:null}}});d.View.views.repository_contributors=d.View.views._accounts.$extend({__classvars__:{model:"repository",view_name:"repository_contributors",data_field:"contributors"},get_items:(function e(k,l){for(var j=0;j<l.length;j++){l[j].html_prepend='<p class="ui-li-aside count ui-li-desc">'+l[j].contributions+"</p>"}return this.$super(k,l)})});d.View.views.repository_stars=d.View.views._accounts.$extend({__classvars__:{model:"repository",view_name:"repository_stars",data_field:"stars"}})})(Reposio);