var Reposio={};$(document).ready((function App__on_ready(){Reposio.controller=new Reposio.Controller();Reposio.controller.init()}));(function(r){var y=(function o(){this.providers={};this.can_login=false;for(var A in r.Providers){this.providers[A]=new r.Providers[A](this);if(!this.can_login&&this.providers[A].can_login()){this.can_login=true}}for(var z in r.Models){this[z]=null}this.current_user=null;this.favorites=$.jStorage.get("favorites",[]);this.display=new r.Display(this)});y.prototype.init=(function c(){this.get_current_user();this.display.init()});y.prototype.set_current_object=(function j(A,z){var B=(this[A]===null||this[A].id!=z);if(B){this[A]=r.Models[A].get(z,this);this.display["change_"+A]()}this.display["update_"+A+"_navbar"](this[A]);return B});y.prototype.fetch_full_error=(function d(B,D,E,A,z,F,C){if(this.display.confirm_new_fech("full","this page",B,C)){D.fetch_full(E,A,z,F,C)}});y.prototype.fetch_more_error=(function m(B,D,E,A,z,C){if(this.display.confirm_new_fech("more","more",B,C)){D.fetch_more(E,A,z,C)}});y.prototype.fetch_all_error=(function l(C,E,F,A,B,z,D){if(this.display.confirm_new_fech("all","all",C,D)){E.fetch_all(F,A,B,z,D)}});y.prototype.make_page_hash=(function b(C,A,z){var B="#"+A.id+"!"+C.$class.model_name+"="+C.ref.replace("/",":")+"@"+C.provider.name;return B});y.prototype.toggle_favorite=(function n(G,E,B,D){var F=this.make_page_hash(G,E,B),A=this.favorites.length,z,C=false;this.favorites=_.reject($.jStorage.get("favorites",[]),function(H){return H.hash==F});if(A==this.favorites.length){z=this.create_favorite(F,G,E.title,B);this.favorites[D?"unshift":"push"](z);C=true}$.jStorage.set("favorites",this.favorites);$.jStorage.set("favorites-managed",true);this.display.ask_for_favorites_redraw();return C});y.prototype.create_favorite=(function x(C,B,D,A){var z={hash:C,model:B.$class.model_name,ref:B.ref,provider:B.provider.name};if(D!="Details"){z.title=D}if(A&&_.size(A)>0){z.options=A}switch(B.$class.model_name){case"account":if(B.details&&B.details.avatar_url){z.avatar_url=B.details.avatar_url}break;case"repository":if(B.details.user&&B.details.user.avatar_url){z.avatar_url=B.details.user.avatar_url}if(B.details.is_fork){z.is_fork=true}if(B.details.description){z.description=B.details.description}break}return z});y.prototype.is_favorited=(function t(C,A,z){var B=this.make_page_hash(C,A,z);return !!(_.find(this.favorites,function(D){return D.hash==B}))});y.prototype.sort_favorites=(function v(C){var D={},B,z,E,A=[];for(B=0;B<this.favorites.length;B++){D[this.favorites[B].hash]=this.favorites[B]}for(z=0;z<C.length;z++){E=C[z];if(D[E]){A.push(D[E])}}this.favorites=A;$.jStorage.set("favorites",this.favorites);$.jStorage.set("favorites-managed",true)});y.prototype.get_current_user=(function k(){var z=this;this.current_user=$.jStorage.get("logged-user",null);if(!this.current_user){return}if(this.current_user.provider&&this.providers[this.current_user.provider]){var C=this.providers[this.current_user.provider];if(!C.login(this.current_user,(function B(D){var E=r.Models.account.get(D.login+"@"+C.name,z);E.update_data("details",D);E.details_fetched=true}),(function A(D){alert("We are unable to check your authentication, you may want to logout and login again.")}))){this.current_user=null}}else{this.current_user=null}if(!this.current_user){setTimeout(function(){z.logout()},500)}});y.prototype.login=(function g(B,A,z){this.current_user=A;this.current_user.username=B;this.current_user.provider=z;$.jStorage.set("logged-user",this.current_user);this.display.login_success()});y.prototype.logout=(function s(){if(this.current_user){this.providers[this.current_user.provider].logout()}this.current_user=null;$.jStorage.deleteKey("logged-user");_.each(["repository","account"],function(A){var B=Reposio.Models.base.cache[A];for(var z in B){B[z].flags={}}});this.display.logout()});y.prototype.check_login=(function q(A){var z=this;setTimeout(function(){if(!A.provider||!z.providers[A.provider]){return z.display.login_fail()}z.providers[A.provider].check_login(A,(function B(D,G){var E=r.Models.account.get(D.login+"@"+A.provider,z);E.update_data("details",D);E.details_fetched=true;if(!z.is_favorited(E,z.display.pages.account_home)){var F=z.make_page_hash(E,z.display.pages.account_home),C=z.create_favorite(F,E,"Details");this.favorites=$.jStorage.get("favorites",[]);this.favorites.unshift(C);$.jStorage.set("favorites",this.favorites);z.display.ask_for_favorites_redraw()}z.login(D.login,G,A.provider)}),function(){z.display.login_fail()})},1)});y.prototype.check_flag=(function a(z,B,D,A){var C=this.providers[B.provider.name];C["check_"+z](B.ref,function(E){B.set_flag(z,E);D(B.is_flagged(z))},A)});y.prototype.toggle_flag=(function e(z,C,F,B){var A=this,D=this.providers[C.provider.name];if(!C.is_flag_set(z)){this.check_flag(z,C,function(){A.toggle_flag(z,C,F,B)},B)}else{var E=z;if(C.is_flagged(z)){E="un"+E}D[E](C.ref,function(G){C.set_flag(z,G);F()},B)}});y.prototype.check_star=(function f(A,B,z){this.check_flag("star",A,B,z)});y.prototype.toggle_star=(function h(A,B,z){this.toggle_flag("star",A,B,z)});y.prototype.check_watch=(function p(A,B,z){this.check_flag("watch",A,B,z)});y.prototype.toggle_watch=(function i(A,B,z){this.toggle_flag("watch",A,B,z)});y.prototype.check_follow=(function u(A,B,z){this.check_flag("follow",A,B,z)});y.prototype.toggle_follow=(function w(A,B,z){this.toggle_flag("follow",A,B,z)});r.Controller=y})(Reposio);(function(G){var v=(function Q(Y){this.controller=Y});v.prototype.init=(function x(){var af=this;this.need_favorites_redraw=true;this.templates_container=$("#templates");this.nodes={body:$("body"),home:{favorites:$("#home-favorites"),anonymous:$("#welcome-anonymous"),username:$("#welcome span"),login_button:$("#home-login-button"),no_login_button:$(".home-hide-no-login-button"),sort_favorites_control:$("#sort-favorites-home")}};this.home_favorites_sortable_created=false;this.nodes.home.sort_favorites_control.attr("checked",false);for(var ad in this.pages_list){this.construct_pages(ad,this.pages_list[ad])}$.mobile.initializePage();af.init_events();var ac=$("div[data-role=page]:not(.ui-page)"),ab=$("#start-screen"),aa=$("#progress-loader"),ae=ac.length,Z=(function Y(ag,aj){if(aj<ag.length){var ai=Math.max(6,Math.min(Math.round(100*(aj+1)/ae),100));aa.css({width:ai+"%"});setTimeout((function ah(){var al=ag.eq(aj);al.page();Z(ag,aj+1)}),10);if(aj==2){$("html").removeClass("loading")}}else{var ak=$.jStorage.get("start_screen_seen");aa.parent().html("Enjoy !");ab.fadeOut(ak?"fast":1200,function(){ab.remove()});$.jStorage.set("start_screen_seen",true)}});Z(ac,0);if(this.controller.can_login){$("#welcome-anonymous-cannot-login").hide();$("#welcome-anonymous-can-login").show();$(".auth-menu").show();this.toggle_auth_infos()}});v.prototype.format_date=(function y(ac,ad,Y,Z){if(!ac){return""}var ab=ac.split("T");if(ad){var aa=ab[1].slice(0,Y?8:5);return(Z?"":ab[0]+" ")+aa}else{return ab[0]}});v.prototype.escape_html=(function z(Y){if(!Y){return""}return Y.indexOf("<")===-1?Y:$("<div/>").text(Y).html()});v.prototype.is_light_color=(function W(Z){var ac,ab,Y,ad;try{Z=Z.replace("#","");if(Z.length==3){Z=Z[0]+Z[0]+Z[1]+Z[1]+Z[2]+Z[2]}ac=parseInt(Z.substr(0,2),16);ab=parseInt(Z.substr(2,2),16);Y=parseInt(Z.substr(4,2),16);ad=((ac*299)+(ab*587)+(Y*114))/1000;return(ad>=128)}catch(aa){return true}});v.prototype.nodes={};v.prototype.template_sources={};v.prototype.templates={};v.prototype.pages_list={};v.prototype.pages={};v.prototype.construct_pages=(function q(Y,ae){for(var al=0;al<ae.length;al++){var aa=ae[al];aa.name=aa.id;aa.id=Y+"_"+aa.name;aa.type=Y;if(!aa.title){aa.title=aa.name[0].toUpperCase()+aa.name.slice(1)}if(!aa.method){aa.method=aa.name}}var ap="",Z=(ae.length>4),ag={account:this.get_template_source("account-footer"),repository:this.get_template_source("repository-footer")};for(var aq=0;aq<ae.length;aq++){var ao=ae[aq],ar="",aj=[];if(Z){aj.push(ae[0]);aj.push(ae[1]);aj.push(ae[(aq<2)?2:aq])}else{aj=ae}ar='<div data-role="page" id="'+ao.id+'">';ar+='<div data-role="header" data-id="'+Y+'_pages" data-position="fixed" data-theme="a" class="header">';ar+="<h3></h3>";ar+='<a href="#main_menu_'+ao.id+'" id="main_menu_'+ao.id+'_opener" data-icon="gear" data-iconpos="notext" data-rel="popup" class="ui-btn-right">Options</a>';ar+='<div data-role="navbar">';ar+="<ul"+(Z?' class="extended"':"")+">";for(var an=0;an<aj.length;an++){var ai=aj[an];ar+="<li>";ar+='<a href="#'+ai.id+'"'+(an<aq?' data-direction="reverse"':"")+' class="'+(ai.name==ao.name?"ui-btn-active ui-state-persist ":"")+ai.id+'-link">';ar+=ai.title;if(ai.count){ar+='<span class="'+ai.id+'-count ui-li-count ui-btn-up-c ui-btn-corner-all">?</span>'}ar+="</a>";ar+="</li>"}if(Z){ar+='<li><a data-rel="popup" href="#menu_'+ao.id+'">...</a>'}ar+="</ul>";ar+="</div>";ar+="</div>";ar+='<div data-role="content"></div>';ar+=ag[ae[aq].type];if(Z){ar+='<div data-role="popup" id="menu_'+ao.id+'" data-theme="a" class="nav-menu">';ar+='<ul data-inset="true" data-theme="a">';for(var am=0;am<ae.length;am++){var ad=ae[am];ar+="<li>";ar+='<a href="#'+ad.id+'" class="'+(ad.name==ao.name?"ui-btn-active ":"")+ad.id+'-link">';ar+=ad.title;if(ad.count){ar+='<span class="'+ad.id+'-count ui-li-count ui-btn-up-c ui-btn-corner-all">?</span>'}ar+="</a>";ar+="</li>"}ar+="</ul>";ar+="</div>"}ar+='<div data-role="popup" id="main_menu_'+ao.id+'" data-theme="a" class="main-nav-menu">';ar+="</div>";ar+="</div>";ap+=ar}this.nodes.body.append(ap);for(var ak=0;ak<ae.length;ak++){var af=ae[ak],ac=$("#"+af.id),ab=$("#main_menu_"+af.id),ah=ac.find(".footer"),at=this.get_template(af.id,true,true);af.nodes={links:$("a."+af.id+"-link"),page:ac,header:ac.children(":jqmData(role=header)").children("h3"),content:ac.children(":jqmData(role=content)"),main_menu:ab,footer:ah,refresh_control:ah.find(".refresh-control"),go_provider_control:ah.find(".go-provider-control"),favorite_control:ah.find(".favorite-control"),star_control:ah.find(".star-control"),watch_control:ah.find(".watch-control"),follow_control:ah.find(".follow-control")};af.node=af.nodes.page;if(at){af.nodes.content.prepend(at.children)}af.view=G.View.get(af,this);this.pages[af.id]=af}});v.prototype.update_go_provider_control=(function P(Z,Y){Z.nodes.go_provider_control.find(".provider").text(this.controller[Z.type].provider.name);Z.nodes.go_provider_control.toggleClass("ui-disabled",!Y);Z.nodes.go_provider_control.attr("href",Y||"")});v.prototype.init_events=(function c(){var ak=this;$(document).on("pagebeforechange",(function af(at,ar){if(typeof ar.toPage!=="string"){return}if(ar.options.dataUrl){ar.options.dataUrl=ar.options.dataUrl.replace("?","!")}ar.options.allowSamePageTransition=true;if(ar.toPage==$.mobile.path.stripQueryParams(location.href.replace("!","?"))){ar.options.transition="none"}ak.on_before_page_change(at,ar)}));$(document).on("pagechange",(function aa(ax,av){ak.update_fullscreen_control();if($.mobile.activePage&&$.mobile.activePage.hasClass("current_page")&&!$.mobile.activePage.hasClass("page_loaded")){$.mobile.loading("show")}try{var au=ak.pages[av.toPage.data("url")],at,aw=ak.controller[au.type];ak.update_favorite_control(au);at=ak["get_real_"+au.type+"_page"](au.name,aw);ak.update_go_provider_control(au,at);ak.update_star_control(au,aw);ak.update_watch_control(au,aw);ak.update_follow_control(au,aw);ak.load_visible_images();ak.toggle_sort_favorites(false)}catch(ar){}}));$(".nav-menu").on("popupafterclose",(function ah(){var av=$(this),au=av.find("a.ui-btn-active"),ar,at;if(au.length){at=av.parents(".ui-page");if(at.length){ar=au.attr("href");at.find('.ui-header .ui-navbar a[href="'+ar+'"]').addClass("ui-btn-active")}}}));$(".nav-menu").on("popupbeforeposition",(function an(){var ar=$(this).children("ul");if(!ar.hasClass("ui-listview")){ar.listview()}}));$(".main-nav-menu").on("popupbeforeposition",(function ab(){var at=$(this),av=$("#"+this.id+"_opener");av.addClass("popup-opened");if(!at.children().length){var au=ak.get_template("main-nav-menu");at.append(au.cloneNode(true));at.trigger("create");var aw=ak.pages[$.mobile.activePage.data("url")],ar=aw.nodes.main_menu.find(".auth-menu");ar.find(".ui-btn-text").text(ak.controller.current_user?"Logout":"Login");if(ak.controller.can_login){ar.show()}}}));$(".main-nav-menu").on("popupafterclose",(function Y(){var ar=$("#"+this.id+"_opener");ar.removeClass("popup-opened")}));$(document).on("click",".collapsible-trigger",(function al(ax){ax.preventDefault();ax.stopPropagation();var aw=$(this),ar=aw.parents("li"),ay,av,au,at;if(!aw.hasClass("filled")){aw.addClass("filled");au=ar[0].more_type;if(ak["render_"+au+"_collapsible"]){at=ak["render_"+au+"_collapsible"](ar);if(at!==null){ar.append('<div data-role="collapsible" data-content-theme="d" data-corners="false" data-mini="true" class="more"><h3>More</h3>'+at+"</div>");av=ar.children(":last");av.collapsible();ak.render_widgets(av);aw.data("collapsible",av);setTimeout(function(){av.trigger("expand")},100)}}}else{ay=ar.hasClass("more-opened");av=aw.data("collapsible");if(av){av.trigger(ay?"collapse":"expand")}}ar.toggleClass("more-opened",!ay);return false}));$(document).on("click",".events-list a.fetch-desc-trigger",(function am(az){az.preventDefault();az.stopPropagation();var aB=$(this),ax=aB.data("repository"),aA=G.Models.repository.get(ax,ak.controller),au=(function aw(aE){$('p.ui-li-desc[data-fetching-repository="'+ax+'"]').each((function aF(){var aG=$(this);aG.children().remove();aG.append(aE)}))}),aC=(function at(){var aE=$(this),aF=aE.parent();aF.children().remove();aF.append("<em>loading...</em>").attr("data-fetching-repository",ax)}),aD=(function ay(aF){var aE;if(aF){aA.update_data("details",aF)}if(aA.details.description){aE="<strong>"+ak.escape_html(aA.details.description)+" </strong>"}else{aE="<em>no description</em>"}au(aE)}),av=(function ar(aE){au("<em>Loading failed! ("+ak.get_error_text(aE)+') </em><a href="#" class="fetch-desc-trigger" data-repository="'+aA.id+'">Retry ?</a>')});$('a.fetch-desc-trigger[data-repository="'+ax+'"]').each(aC);if(aA.details_fetched){aD()}else{aA.fetch("details",aD,av,null,"fail_if_404")}}));$(document).on("click","li.with-extension",(function aq(ar){ar.preventDefault();ar.stopPropagation();$(this).toggleClass("extended");return false}));$(document).on("click",".refresh-control",(function ac(av){av.preventDefault();av.stopPropagation();var au=ak.pages[$.mobile.activePage.data("url")],at=au.view.accept_options?au.view.get_options_from_form():null;setTimeout((function ar(){$.mobile.loading("show");ak.ask_for_page(au.id,ak.controller[au.type].id,at,"force")}),100)}));$(document).on("click",".favorite-control",(function ae(aw){aw.preventDefault();aw.stopPropagation();var au=ak.pages[$.mobile.activePage.data("url")],ar=au.view.accept_options?au.view.get_options_from_form():null,av=ak.controller[au.type],at=ak.controller.toggle_favorite(av,au,ar);ak.update_favorite_control(au,!!at)}));$(document).on("click",".flag-control",(function ad(av){av.preventDefault();av.stopPropagation();var at=ak.pages[$.mobile.activePage.data("url")],au=ak.controller[at.type],ar=$(this).data("flag");ak["toggle_"+ar](at,au)}));$(window).on("scrollstop",ak.load_visible_images);$(window).on("resize",ak.load_visible_images);$.jStorage.listenKeyChange("favorites",function(ar,at){if(!ak.nodes.home.favorites.hasClass("sorting")){ak.controller.favorites=$.jStorage.get("favorites",[]);ak.ask_for_favorites_redraw()}});if(screenfull.enabled){$(document).on("change",".fullscreen-control",(function ao(ar){$(this).parents(".main-nav-menu").popup("close");screenfull.toggle()}));screenfull.onchange=ak.update_fullscreen_control}else{var ag=$(".fullscreen-control");ag.parents(".ui-checkbox").add(ag.parents("label")).remove()}$(document).on("change","#sort-favorites-home",(function ap(ar){$(this).parents(".main-nav-menu").popup("close");ak.toggle_sort_favorites(ak.nodes.home.sort_favorites_control.attr("checked"))}));ak.nodes.home.no_login_button.on("click",(function aj(ar){ar.preventDefault();ar.stopPropagation();ak.nodes.home.anonymous.fadeOut()}));ak.nodes.home.login_button.on("click",(function ai(ar){ar.preventDefault();ar.stopPropagation();ak.login()}));$(document).on("click",".auth-menu",(function Z(at){at.preventDefault();at.stopPropagation();var ar=ak.pages[$.mobile.activePage.data("url")];(ar?ar.nodes.main_menu:$.mobile.activePage.find(".main-nav-menu")).popup("close");if(ak.controller.current_user){ak.controller.logout()}else{ak.login()}}))});v.prototype.toggle_sort_favorites=(function b(Y){var ab;try{ab=!!this.nodes.home.favorites.sortable("option","disabled");if(typeof Y!=="undefined"){ab=!!Y;this.nodes.home.sort_favorites_control.attr("checked",ab).checkboxradio("refresh")}this.nodes.body.toggleClass("sorting",ab);this.nodes.home.favorites.toggleClass("sorting",ab);this.ask_for_favorites_redraw();this.nodes.home.favorites.sortable(ab?"enable":"disable")}catch(Z){this.nodes.home.sort_favorites_control.attr("checked",false);try{this.nodes.home.sort_favorites_control.checkboxradio("refresh")}catch(aa){}}});v.prototype.load_visible_images=(function f(){var Y,aa=$("img[data-original]:in-viewport:visible");for(var Z=0;Z<aa.length;Z++){Y=aa[Z];Y.src=Y.getAttribute("data-original");Y.removeAttribute("data-original")}});v.prototype.update_fullscreen_control=(function r(){$(".fullscreen-control").attr("checked",screenfull.isFullscreen).each(function(){try{$(this).checkboxradio("refresh")}catch(Y){}})});v.prototype.update_favorite_control=(function N(Z,Y){if(Y!==false&&Y!==true){Y=this.controller.is_favorited(this.controller[Z.type],Z,Z.view.accept_options?Z.view.get_options_from_form():null)}Z.nodes.favorite_control.toggleClass("selected",Y)});v.prototype.user_can_flag=(function e(Y,Z){if(!this.controller.current_user){return false}if(!Z.can_have_flag(Y)){return false}switch(Y){case"star":break;case"watch":break;case"follow":if(Z.$class.model_name=="account"&&Z.username==this.controller.current_user.username){return false}break}return true});v.prototype.update_flag_control=(function s(Y,ac,af,Z){var ae=this,ab=this.is_page_for_obj(ac,af),ad=ac.nodes[Y+"_control"],aa=this.user_can_flag(Y,af);if(!aa||!af.is_flag_set(Y)){if(ab){ad.removeClass("selected");ad.addClass("ui-disabled")}if(aa){this.controller["check_"+Y](af,function(ag){ae.update_flag_control(Y,ac,af,Z)},function(){if(confirm(Z+'"'+af.ref+'". Retry ?')){ae.update_flag_control(Y,ac,af,Z)}})}}else{if(ab){ad.removeClass("ui-disabled");ad.toggleClass("selected",af.is_flagged(Y))}}});v.prototype.toggle_flag=(function w(Y,ac,af,Z){var ae=this,ab=this.is_page_for_obj(ac,af),ad=ac.nodes[Y+"_control"],aa=this.user_can_flag(Y,af);if(!aa){return}if(ab){$.mobile.loading("show");ad.addClass("ui-disabled")}this.controller["toggle_"+Y](af,function(){if(ab){ae.update_flag_control(Y,ac,af,Z);$.mobile.loading("hide")}},function(){if(confirm(Z+'"'+af.ref+'". Retry ?')){ae.toggle_flag(Y,ac,af,Z)}else{if(ab){ae.update_flag_control(Y,ac,af,Z);$.mobile.loading("hide")}}})});v.prototype.update_star_control=(function A(Y,Z){this.update_flag_control("star",Y,Z,"Unable to check if you star the repository ")});v.prototype.toggle_star=(function M(Y,Z){this.toggle_flag("star",Y,Z,"Unable to toggle your star of the repository ")});v.prototype.update_watch_control=(function I(Y,Z){this.update_flag_control("watch",Y,Z,"Unable to check if you watch the repository ")});v.prototype.toggle_watch=(function K(Y,Z){this.toggle_flag("watch",Y,Z,"Unable to toggle your watching of the repository ")});v.prototype.update_follow_control=(function k(Y,Z){this.update_flag_control("follow",Y,Z,"Unable to check if you follow ")});v.prototype.toggle_follow=(function F(Y,Z){this.toggle_flag("follow",Y,Z,"Unable to toggle your following of ")});v.prototype.on_before_page_change=(function C(ac,ab){var Z=$.mobile.path.parseUrl(ab.toPage),Y,aa;if(Z.hash&&ab.options){Y=Z.hash.slice(1);if(this.pages[Y]){aa=this.pages[Y];if(ab.options.pageData&&ab.options.pageData[aa.type]){$.mobile.loading("show");this.ask_for_page(aa.id,ab.options.pageData[aa.type],_.omit(ab.options.pageData,aa.type));return}}}if(aa||!$(Z.hash).length){$.mobile.changePage($("#home"));ac.preventDefault()}if(Z.hash=="#home"){this.refresh_home_favorites()}});v.prototype.is_page_for_obj=(function d(Y,Z){var aa=Y.node.data("current-for");if(!aa||aa!=Z.id){return false}return true});v.prototype.is_page_for=(function o(Z,aa,Y){if(!this.is_page_for_obj(Z,aa)){return false}if(Z.view.accept_options&&Z.node.data("current-options")!=$.param(Y)){return false}return true});v.prototype.ask_for_page=(function H(ag,ae,af,Z){ae=ae.replace(":","/");var ac=this,ad=this.pages[ag],aa=this.controller.set_current_object(ad.type,ae),ab=this.controller[ad.type],ah=ad.view.accept_options?ad.view.manage_options(af):{};$(".current_page, .page_loaded").removeClass("current_page page_loaded");ad.node.addClass("current_page");ad.node.data("title",ad.nodes.header.text());if(!Z&&this.is_page_for(ad,ab,ah)){this.post_render_page(ad)}else{ad.nodes.refresh_control.addClass("ui-disabled");ad.view.reset(ab);if(ad.view.accept_options){ad.node.data("current-options",$.param(ah))}ad.node.data("current-for",ab.id);ab.fetch_full(ad.method,(function Y(){ac.render_page(ad,ab,ah,Z)}),ah,Z)}});v.prototype.ask_for_more=(function p(ab){var ad=this,ac=this.controller[ab.type],Z=ab.view.options;ac.fetch_more(ab.method,(function Y(ae){if(!ad.is_page_for(ab,ac,Z)){return}ab.view.complete(ac,ae);ab.view.update_load_buttons(ac);if(ab.node.hasClass("current_page")){$.mobile.loading("hide")}}),Z,(function aa(){ab.view.enable_load_buttons()}))});v.prototype.ask_for_all=(function O(ac){var ae=this,ad=this.controller[ac.type],aa=ac.view.options;ad.fetch_all(ac.method,(function Z(af){if(!ae.is_page_for(ac,ad,aa)){return}ac.view.complete(ad,af)}),(function Y(){if(!ae.is_page_for(ac,ad,aa)){return}if(ac.node.hasClass("current_page")){ac.view.hide_load_buttons();$.mobile.loading("hide")}}),aa,(function ab(){ac.view.enable_load_buttons()}))});v.prototype.render_page=(function u(aa,ab,Y,Z){if(!this.is_page_for(aa,ab,Y)){return}aa.view.update(ab,Z);if(aa.node.hasClass("current_page")){this["update_"+aa.type+"_navbar"](ab);this.post_render_page(aa)}});v.prototype.post_render_page=(function h(Y){$.mobile.loading("hide");Y.node.addClass("page_loaded");Y.nodes.refresh_control.removeClass("ui-disabled ui-btn-active")});v.prototype.render_widgets=(function l(Y){Y.find(":jqmData(role=listview)").listview();Y.find(":jqmData(role=collapsible-set)").collapsibleset();Y.find(":jqmData(role=collapsible)").collapsible();Y.find(":jqmData(role=button)").button();Y.find(":jqmData(role=table)").table()});v.prototype.create_events_list_items=(function j(ad){var ac=this.get_template("event-list-day"),Z=this.get_template("event-list-item"),aa=[],ae=null,Y,af;for(var ab=0;ab<ad.length;ab++){af=ad[ab];if(af.day!=ae){Y=ac.cloneNode(true);Y.innerHTML=af.day;ae=af.day;aa.push(Y)}Y=Z.cloneNode(true);Y.innerHTML=af.html;Y.more_type="event";Y.event_data={event:af.event,source:af.source,provider:af.provider};aa.push(Y)}return aa});v.prototype.create_issues_list_items=(function D(aj){var ar=this.get_template("issue-list-item"),ai=[],ag,ab,ap,aq,ak,ae,am,ac,ad,ao,al,Z,Y,aa,ah,af;for(var an=0;an<aj.length;an++){ab=aj[an];ag=ar.cloneNode(true);aq=ag.getElementsByTagName("a")[0];ak=aq.children;ae=ak[0];am=ak[1].children[1];ac=ak[2];ad=ak[3].children;ao=ad[0];al=ad[1];Z=ad[2];Y=ak[4].children;aa=Y[0];ah=Y[1];af=Y[2];ap=[];aq.href=ab.html_url;ae.innerHTML=ab.number;ac.innerHTML=this.escape_html(ab.title);am.innerHTML=ab.state;Z.innerHTML=this.format_date(ab.created_at,true);al.innerHTML=ab.user.login;if(ab.user.avatar_url){ao.setAttribute("data-original",ab.user.avatar_url)}if(ab.state=="closed"||ab.comments){aa.innerHTML=(ab.comments||"No")+" comment"+(ab.comments==1?"":"s");if(ab.state=="closed"){ah.innerHTML="closed";af.innerHTML=this.format_date(ab.closed_at,true)}else{ah.innerHTML="updated";af.innerHTML=this.format_date(ab.updated_at,true)}}else{ap.push("no-infos")}ap.push("issue-"+ab.state);if(!ab.pull_request||!ab.pull_request.html_url){ap.push("no-pr")}if((!ab.labels||!ab.labels.length)&&!ab.body_html&&(!ab.milestone&&!ab.milestone.id)){ap.push("no-details")}else{ag.more_type="issue";ag.issue_data=ab}if(ap.length){ag.className+=" "+ap.join(" ")}ai.push(ag)}return ai});v.prototype.get_error_text=(function J(Y){var Z="";if(Y){if(Y.statusText){Z=Y.statusText}if(Y.status){if(Y.statusText){Z+=" - "}Z+=Y.status}}if(!Z){Z="undefined error"}return Z});v.prototype.confirm_new_fech=(function X(ac,ab,aa,Z){$.mobile.loading("hide");var Y=confirm("Unable to fetch "+ab+" ("+this.get_error_text(aa)+"), retry ?");if(Y){$.mobile.loading("show")}else{if(Z){Z()}else{switch(ac){case"full":history.go(-1);break;case"more":case"all":}}}return Y});v.prototype.get_template_source=(function B(Z){if(!this.template_sources[Z]){var Y=this.templates_container.find("[data-template-for="+Z+"]")[0];this.template_sources[Z]=Y.childNodes[0].nodeValue;Y.parentNode.removeChild(Y)}return this.template_sources[Z]});v.prototype.get_template=(function E(Z,Y,ab){var ac,aa;if(!this.templates[Z]){aa=document.createElement("div");aa.innerHTML=this.get_template_source(Z);if(!ab){aa=aa.removeChild(aa.children[0])}this.templates[Z]=aa}aa=this.templates[Z];if(Y){delete this.templates[Z]}return aa});v.prototype.clear_listview=(function V(Z,aa,Y){Z.children(":not(.ui-li-divider)").remove();if(aa){Z.append('<li class="failover">'+aa+"</li>")}if(Y){Z.listview("refresh")}});G.Display=v;v.prototype.get_favorites_items=(function t(){var Z=[],aa,Y,ac,ad,ab;if(!this.controller.favorites.length){this.controller.favorites=[{hash:"#account_home!account=twidi@github",model:"account",ref:"twidi",avatar_url:"https://secure.gravatar.com/avatar/4929cd99d0f54b7fa03081f9ab8bb0d4",provider:"github"},{hash:"#repository_home!repository=twidi:repos.io-mobile@github",model:"repository",ref:"twidi/repos.io-mobile",avatar_url:"https://secure.gravatar.com/avatar/4929cd99d0f54b7fa03081f9ab8bb0d4",description:"A mobile application for Github",provider:"github"}];if(!$.jStorage.get("favorites-managed")){$.jStorage.set("favorites",this.controller.favorites)}}for(aa=0;aa<this.controller.favorites.length;aa++){Y=this.controller.favorites[aa];ad={name:Y.provider};ab=null;switch(Y.model){case"account":ac={login:Y.ref};if(Y.title){ac.login+=" - "+Y.title}if(Y.avatar_url){ac.avatar_url=Y.avatar_url}ab=this.create_account_list_item(ac,ad,Y.hash);break;case"repository":ac={full_name:Y.ref,is_fork:Y.is_fork,description:Y.description};if(Y.title){ac.full_name+=" - "+Y.title}if(Y.avatar_url){ac.user={avatar_url:Y.avatar_url}}ab=this.create_repository_list_item(ac,ad,Y.hash);break}if(ab){ab.favorite_hash=Y.hash;Z.push(ab)}}return Z});v.prototype.ask_for_favorites_redraw=(function U(){this.need_favorites_redraw=true;if($.mobile.activePage&&$.mobile.activePage.data("url")=="home"){this.refresh_home_favorites()}});v.prototype.refresh_home_favorites=(function n(){if(!this.need_favorites_redraw){return}var Z=this,Y=this.get_favorites_items();if(this.home_favorites_sortable_created){this.nodes.home.favorites.sortable("disable")}this.clear_listview(this.nodes.home.favorites);this.nodes.home.favorites.append(Y);this.need_favorites_redraw=false;if(!this.home_favorites_sortable_created){this.nodes.home.favorites.sortable({items:"> li.ui-btn",cursor:"move",axys:"y",delay:0,opacity:0.8,disabled:true,stop:function(ab,ac){var aa=[];Z.nodes.home.favorites.children("li.ui-btn").each(function(){aa.push(this.favorite_hash)});Z.controller.sort_favorites(aa)}});this.home_favorites_sortable_created=true}else{this.nodes.home.favorites.sortable("refresh")}setTimeout(Z.load_visible_images,500);setTimeout(Z.load_visible_images,1000);setTimeout(Z.load_visible_images,2000)});v.prototype.login=(function i(){window.open(this.controller.providers.github.login_url($.mobile.path.makeUrlAbsolute("github_login.html")))});v.prototype.logout=(function a(){this.toggle_auth_infos();this.update_controls_needing_auth()});v.prototype.toggle_auth_infos=(function T(){if(!this.controller.can_login){return}var Y=!!this.controller.current_user;$(".auth-menu .ui-btn-text, .auth-menu:not(.ui-btn)").text(Y?"Logout":"Login");if(Y){this.nodes.home.anonymous.fadeOut();this.nodes.home.username.html(", <strong>"+this.controller.current_user.username+"</strong>");this.nodes.home.username.show()}else{this.nodes.home.anonymous.fadeIn();this.nodes.home.username.hide();this.nodes.home.username.html("")}});v.prototype.update_controls_needing_auth=(function m(){try{var Z=this.pages[$.mobile.activePage.data("url")];if(Z){this.update_star_control(Z,this.controller[Z.type]);this.update_watch_control(Z,this.controller[Z.type]);this.update_follow_control(Z,this.controller[Z.type])}}catch(Y){}});v.prototype.login_success=(function S(){this.toggle_auth_infos();this.update_controls_needing_auth();alert("You are now identified as "+this.controller.current_user.username)});v.prototype.login_fail=(function R(){alert("Something goes wrong and we couldn't complete the authentication.")});v.prototype.render_event_collapsible=(function L(Y){var Z=Y[0].event_data;if(Z.provider["more_"+Z.event.type]){return Z.provider["more_"+Z.event.type](Z.event,Z.source)}else{return null}});v.prototype.render_issue_collapsible=(function g(ag){var af=ag[0].issue_data,aa=[],ac,ae,ad,Z,Y;if(af.milestone&&af.milestone.id){Z='<div class="issue-milestone"><strong>Milestone: </strong>'+this.escape_html(af.milestone.title)+"</div>";aa.push(Z)}if(af.labels&&af.labels.length){ac='<ul class="issue-labels">';for(var ab=0;ab<af.labels.length;ab++){ae=af.labels[ab];ac+='<li style="background:#'+ae.color+'" class="'+(this.is_light_color(ae.color)?"light":"dark")+'-label">'+ae.name+"</li>"}ac+="</ul>";aa.push(ac)}if(af.assignee&&af.assignee.id){Y='<div class="issue-assignee"><strong>Assigned to: </strong>';Y+=this.account_link(af.assignee.login,this.controller.repository.provider.name,af.assignee.avatar_url);Y+="</div>";aa.push(Y)}if(af.body_html){if(aa.length){aa.push("<hr />")}ad='<div class="issue-body">';ad+="<div><strong>Description</strong>, by "+this.account_link(af.user.login,this.controller.repository.provider.name,af.user.avatar_url)+"</div>";ad+='<div class="markup">'+af.body_html+"</div>";ad+="</div>";aa.push(ad)}return aa.join("")})})(Reposio);(function(f){f.Display.prototype.pages_list.account=[{id:"home",title:"Details",method:"details"},{id:"repositories",title:"Repos",count:true},{id:"activity",method:"own_events"},{id:"members",method:"org_members"},{id:"stars"},{id:"following",count:true},{id:"followers",count:true},{id:"events",title:"Following activity",method:"received_events"}];f.Display.prototype.change_account=(function a(){for(var k=0;k<this.pages_list.account.length;k++){var l=this.pages_list.account[k];for(var h=0;h<l.nodes.links.length;h++){l.nodes.links[h].href="#"+l.id+"!account="+this.controller.account.id}l.nodes.header.html(this.controller.account.username+" - "+l.title);l.node.removeData("current-for")}});f.Display.prototype.account_link=(function c(k,j,i){var h='<a class="account-link" href="#account_home!account='+k+"@"+j+'">';h+=k;if(i){h+='<img class="avatar-small avatar-small-after" src="'+i+'" />'}h+="</a>";return h});f.Display.prototype.create_account_list_item=(function g(l,n,i){var p=this.get_template("account-list-item"),q=p.cloneNode(true),o=q.getElementsByTagName("a")[0],h=o.children,k=h[0],m=h[1],j=[];o.href=i||"#account_home!account="+l.login+"@"+n.name;m.innerHTML=l.login;k.setAttribute("data-original",l.avatar_url);if(l.html_prepend){$(o).prepend(l.html_prepend)}return q});f.Display.prototype.create_accounts_list_items=(function d(k,l){var h=[];for(var j=0;j<k.length;j++){h.push(this.create_account_list_item(k[j],l))}return h});f.Display.prototype.update_account_navbar=(function e(i){var h=i.is_organization();$(".go-button").find(".provider").html(i.provider.name);$(".account_members-link").closest("li")[h?"show":"hide"]();$(".account_repositories-count").html(i.details?i.details.repos_count:"?");$(".account_followers-count").html(i.details?i.details.followers_count:"?");$(".account_following-count").html(i.details?i.details.following_count:"?")});f.Display.prototype.get_real_account_page=(function b(h,j){var i=j.is_organization();switch(h){case"home":return"https://github.com/"+j.username;case"repositories":return"https://github.com/"+j.username+"?tab=repositories";case"activity":return i?null:"https://github.com/"+j.username+"?tab=activity";case"followers":return"https://github.com/"+j.username+"/followers";case"stars":case"following":return"https://github.com/"+j.username+"/following";case"members":return i?"https://github.com/"+j.username+"?tab=members":null}return null})})(Reposio);(function(e){e.Display.prototype.pages_list.repository=[{id:"home",title:"Details",method:"details"},{id:"activity"},{id:"contributors"},{id:"forks",count:true},{id:"stars",count:true},{id:"issues",count:true}];e.Display.prototype.change_repository=(function b(){for(var k=0;k<this.pages_list.repository.length;k++){var l=this.pages_list.repository[k];for(var h=0;h<l.nodes.links.length;h++){l.nodes.links[h].href="#"+l.id+"!repository="+this.controller.repository.id.replace("/",":")}l.nodes.header.html(this.controller.repository.path+" - "+l.title);l.node.removeData("current-for")}});e.Display.prototype.repository_link=(function a(j,k,i){var l=j.replace("/",":"),h=i?l.split(":")[1]:j;return'<a class="repo-link" href="#repository_home!repository='+l+"@"+k+'">'+h+"</a>"});e.Display.prototype.create_repository_list_item=(function d(o,p,i){var r=this.get_template("repository-list-item"),u=o.full_name||o.name,s=r.cloneNode(true),q=s.getElementsByTagName("a")[0],h=q.children,j=h[1].children,m=j[0],k=j[1],n=h[2],t=h[3],l=[];q.href=i||"#repository_home!repository="+u.replace("/",":")+"@"+p.name,k.innerHTML=u;if(o.user&&o.user.avatar_url){m.setAttribute("data-original",o.user.avatar_url)}if(o.description){n.innerHTML=o.description}else{l.push("no-desc")}if(!o.is_fork){l.push("no-fork")}else{l.push("with-banner")}if(o.pushed_at){t.getElementsByTagName("span")[0].innerHTML=this.format_date(o.pushed_at,true)}else{l.push("no-date")}if(l.length){s.className+=" "+l.join(" ")}return s});e.Display.prototype.create_repositories_list_items=(function g(k,l){var h=[];for(var j=0;j<k.length;j++){h.push(this.create_repository_list_item(k[j],l))}return h});e.Display.prototype.update_repository_navbar=(function c(h){var i=h.can_have_issues();$(".go-button").find(".provider").html(h.provider.name);$(".repository_forks-count").html(typeof h.details.forks_count!=="undefined"?h.details.forks_count:"?");$(".repository_stars-count").html(typeof h.details.watchers_count!=="undefined"?h.details.watchers_count:"?");$(".repository_issues-count").html(typeof h.details.open_issues_count!=="undefined"&&i?h.details.open_issues_count:"?");$(".repository_issues-link").closest("li")[i?"show":"hide"]()});e.Display.prototype.get_real_repository_page=(function f(h,i){switch(h){case"home":case"activity":return"https://github.com/"+i.path;case"contributors":return"https://github.com/"+i.path+"/contributors";case"forks":return"https://github.com/"+i.path+"/network";case"stars":return"https://github.com/"+i.path+"/stargazers";case"issues":return"https://github.com/"+i.path+"/issues"}return null})})(Reposio);(function(p){p.Models={};p.Models.base=Class.$extend({__classvars__:{model_name:null,fields:{},cache:{},default_params:{},fetchable_params:{},get:(function u(x,w){if(!this.cache[this.model_name]){this.cache[this.model_name]={}}if(!this.cache[this.model_name][x]){this.cache[this.model_name][x]=new this(x,w)}return this.cache[this.model_name][x]}),save_many_from_events:(function e(z,D,w){var B,C,A,x;for(var y=0;y<z.length;y++){B=z[y];if(B.actor&&B.actor.login&&B.actor.avatar_url){C=p.Models.account.get(B.actor.login+"@"+D.name,w);C.update_data("details",B.actor)}if(B.repository&&B.repository.full_name&&(B.repository.description||B.repository.pushed_at)){if(B.repository.full_name.indexOf("/")!=-1){A=p.Models.repository.get(B.repository.full_name+"@"+D.name,w);A.update_data("details",B.repository)}}if(B.type=="ForkEvent"&&B.forkee){A=p.Models.repository.get(B.forkee.full_name+"@"+D.name,w);A.update_data("details",B.forkee)}}})},__init__:(function b(z,w){var y=z.split("@");this.id=z;this.ref=y[0];this.provider=w.providers[y[1]];this.controller=w;this.list_page_status={};this.details_fetched=false;this.flags={};for(var x in this.__classvars__.fields){if(this.__classvars__.fields[x] instanceof Array){this[x]={};this.list_page_status[x]={__global__:{all:false}}}else{this[x]=null}}}),is_flag_set:(function g(w){return(typeof this.flags["flag_"+w]!="undefined")}),is_flagged:(function i(w){return !!this.flags["flag_"+w]}),can_have_flag:(function c(w){return(this.$class.flags.indexOf(w)!==-1)}),set_flag:(function f(w,x){this.flags["flag_"+w]=!!x}),is_type_list:(function j(w){return(this.$class.fields[w] instanceof Array)}),is_type_string:(function m(w){return(this.$class.fields[w]==="")}),update_data:(function v(w,x,y){if(this.is_type_list(w)){this[w][y||""]=x}else{if(this.is_type_string(w)){this[w]=x}else{if(this[w]===null){this[w]={}}this[w]=$.extend(this[w],x)}}}),get_list:(function q(B,y,C){var A=this.filter_fetchable_params(B,y);if(this["sort_and_filter_"+B]){var x=this.list_page_status[B].__global__.all;if(!x){var z=this.filter_unfetchable_params(B,y);if(!_.isEmpty(z)){C=C||this[B][$.param(A)];x=true}}if(x){var w=this["sort_and_filter_"+B](y,C);if(w!==null){return w}}}return C||this[B][$.param(A)]}),filter_fetchable_params:(function r(w,x){x=x||{};if(this.$class.fetchable_params[w]){return _.pick(x,this.$class.fetchable_params[w])}else{return x}}),filter_unfetchable_params:(function t(w,x){x=x||{};if(this.$class.fetchable_params[w]){return _.omit(x,this.$class.fetchable_params[w])}else{return{}}}),fetch:(function o(y,B,x,A,z){var w=this;A=A||{};if(this.$class.default_params[y]){A=$.extend({},this.$class.default_params[y],A);delete A.max_pages}w.provider["get_"+w.$class.model_name+"_"+y](w.ref,function(C,D){if(C&&C.status==404&&!z){D=w.$class.fields[y];C=null}if(C){if(x){x(C)}}else{if(B){B(D)}}},A)}),fetched:(function d(w,x){if(this.is_type_list(w)){if(this.list_page_status[w].__global__.all){return true}return(typeof this[w][x]!="undefined")}else{if(w=="details"){return this.details_fetched}else{return(this[w]!==null)}}}),fetch_full:(function n(y,C,B,z,x){var w=this,A;B=this.filter_fetchable_params(y,B);A=$.param(B);if(y!="details"&&!w.fetched("details","")){w.fetch_full("details",function(){w.fetch_full(y,C,B,z)});return}if(z&&this.list_page_status[y]){w.list_page_status[y].__global__={all:false}}if(z||!w.fetched(y,A)){w.fetch(y,function(D){if(y=="details"){w.details_fetched=true}w.update_data(y,D,A);if(w.is_type_list(y)){w.update_list_page_status(y,B,1,D?D.length||0:0)}C()},function(D){w.controller.fetch_full_error(D,w,y,C,B,z,x)},B,"fail_if_404")}else{C()}}),update_list_page_status:(function l(C,z,D,x){var A=this.$class.default_params[C]||{},E=$.param(z),w=A.max_pages||null,y=A.per_page||null,B=true;if(!x){B=false}else{if(w&&D>=w){B=false}else{if(y&&x<y){B=false}}}this.list_page_status[C][E]={last_page:D,maybe_more:B};if(B){this.list_page_status[C].__global__={all:false}}else{this.list_page_status[C].__global__={all:true,params:z,str_params:E};if(this["manage_global_for_"+C]){this["manage_global_for_"+C]()}}}),_fetch_more:(function a(y,C,B,x){var w=this,A,z;C=this.filter_fetchable_params(y,C);A=$.param(C);z=$.extend({},C,{page:w.list_page_status[y][A].last_page+1});w.fetch(y,function(D){w[y][A]=w[y][A].concat(D);w.update_list_page_status(y,C,z.page,D?D.length||0:0);B(D)},x,z)}),fetch_more:(function k(y,A,z,x){var w=this;this.list_page_status[y].__global__={all:false};this._fetch_more(y,z,A,function(B){w.controller.fetch_more_error(B,w,y,A,z,x)})}),fetch_all:(function h(C,x,D,A,E){var B=this,F;A=this.filter_fetchable_params(C,A);F=$.param(A);B.list_page_status[C].__global__={all:false};var z=function(G){x(G);if(B.list_page_status[C][F].maybe_more){w()}else{D()}};var y=function(G){B.controller.fetch_all_error(G,B,C,x,D,A,E)};var w=function(){B._fetch_more(C,A,z,y)};w()}),sort_and_filter_events:(function s(x,y){var z=x.mode==="display",w,A;if(!x.type){return z?y:[]}w=z?_.filter:_.reject;A=x.type.split(",");return w(y,function(B){return(A.indexOf(B.type)!==-1)})})})})(Reposio);(function(g){g.Models.account=g.Models.base.$extend({__classvars__:{model_name:"account",fields:{details:{},repositories:[],stars:[],own_events:[],received_events:[],followers:[],following:[],org_members:[],orgs:[]},flags:["follow"],default_params:{repositories:{per_page:50},stars:{per_page:50},own_events:{per_page:30,max_pages:10},received_events:{per_page:30,max_pages:10},followers:{per_page:50},following:{per_page:50},org_members:{per_page:50}},fetchable_params:{repositories:["direction","sort","type"],stars:["direction","sort"],own_events:[],received_events:[]},sort_and_filter_helpers:{repositories:{filter_type:(function m(q){return(q.user.login==this.username)}),filter_type_method:{member:_.reject,owner:_.filter},filter_forks:(function f(q){return q.is_fork}),filter_forks_method:{no:_.reject,yes:_.filter},filter_language:(function l(q){return(q.language&&q.language==this)}),sort_field:{created:"created_at",pushed:"pushed_at",updated:"updated_at",full_name:"full_name"}},stars:{sort_field:{created:"starred_order",updated:"pushed_at"},filter_forks:(function j(q){return q.is_fork}),filter_forks_method:{no:_.reject,yes:_.filter},filter_language:(function d(q){return(q.language&&q.language==this)})}},save_many:(function c(s,u,q){var t;for(var r=0;r<s.length;r++){t=g.Models.account.get(s[r].login+"@"+u.name,q);t.update_data("details",s[r])}})},__init__:(function e(r,q){this.$super(r,q);this.username=this.ref}),update_data:(function i(q,r,s){this.$super(q,r,s);switch(q){case"repositories":case"stars":g.Models.repository.save_many(r,this.provider,this.controller);break;case"followers":case"following":case"org_members":g.Models.account.save_many(r,this.provider,this.controller);break;case"orgs":g.Models.account.save_many(_.map(r,function(t){t.type="Organization";return t}),this.provider,this.controller);break;case"own_events":case"received_events":g.Models.base.save_many_from_events(r,this.provider,this.controller);break}}),manage_global_for_repositories:(function k(){var q=this.list_page_status.repositories.__global__;if(q.params.type!="all"){q.all=false}}),sort_and_filter_repositories:(function p(q,u){var s=this.list_page_status.repositories.__global__,r=this.$class.sort_and_filter_helpers.repositories,t=u||this.repositories[s.str_params];if(q.type&&q.type!="all"){t=r.filter_type_method[q.type](t,r.filter_type,this)}if(q.forks&&q.forks!="all"){t=r.filter_forks_method[q.forks](t,r.filter_forks)}if(q.language){t=_.filter(t,r.filter_language,q.language=="CSharp"?"C#":q.language)}if(u||q.sort!=s.params.sort){t=_.sortBy(t,r.sort_field[q.sort]);if(q.direction=="desc"){t.reverse()}}else{if(q.direction!=s.params.direction){t.reverse();if(q.type=="all"){s.params.direction=q.direction}}}return t}),manage_global_for_stars:(function o(){var q=this.list_page_status.stars.__global__;if(q.params.sort!="created"){q.all=false}}),sort_and_filter_stars:(function n(q,v){var t=this.list_page_status.stars.__global__,s=this.$class.sort_and_filter_helpers.stars,u=v||this.stars[t.str_params],w;if((!t.all&&q.sort=="created")||(t.all&&!t.default_order_saved)){if(t.all){t.default_order_saved=true}if((t.all?t.params:q).direction=="desc"){u.reverse();if(t.all){t.params.direction="asc"}}var r=t.all?"":_.uniqueId();_.each(u,function(y,x){y.starred_order=r+x});if(!t.all&&q.direction=="desc"){u.reverse()}}if(q.language){u=_.filter(u,s.filter_language,q.language=="CSharp"?"C#":q.language)}if(q.forks&&q.forks!="all"){u=s.filter_forks_method[q.forks](u,s.filter_forks,this)}if(v||q.sort!=t.params.sort){u=_.sortBy(u,s.sort_field[q.sort]);if(q.direction=="desc"){u.reverse()}}else{if(q.direction!=t.params.direction){u.reverse();t.params.direction=q.direction}}return u}),sort_and_filter_own_events:(function b(q,t){var r=this.list_page_status.own_events.__global__,s=t||this.own_events[r.str_params];return this.sort_and_filter_events(q,s)}),sort_and_filter_received_events:(function h(q,t){var r=this.list_page_status.received_events.__global__,s=t||this.received_events[r.str_params];return this.sort_and_filter_events(q,s)}),is_organization:(function a(){return(this.details&&this.details.type&&this.details.type=="Organization")})})})(Reposio);(function(e){e.Models.repository=e.Models.base.$extend({__classvars__:{model_name:"repository",fields:{details:{},readme:"",activity:[],forks:[],stars:[],contributors:[],issues:[]},flags:["star","watch"],default_params:{activity:{per_page:30,max_pages:10},forks:{per_page:50},stars:{per_page:50},contributors:{per_page:100},issues:{per_page:50}},fetchable_params:{forks:["sort"],activity:[],issues:["direction","sort","state"]},sort_and_filter_helpers:{forks:{sort_field:{newest:"created_at",oldest:"created_at",watchers:"watchers_count"},filter_never_updated:(function f(m){return m.pushed_at<=m.created_at})},issues:{sort_field:{created:"created_at",updated:"updated_at",comments:"comments"},filter_state:(function h(m){return m.state==this})}},save_many:(function d(o,q,m){var p;for(var n=0;n<o.length;n++){p=e.Models.repository.get(o[n].full_name+"@"+q.name,m);p.update_data("details",o[n])}}),save_many_from_issues:(function c(p,s,n){var m,r,o;for(var q=0;q<p.length;q++){m=p[q];if(m.user&&m.user.login&&m.user.avatar_url){r=e.Models.account.get(m.user.login+"@"+s.name,n);r.update_data("details",m.user)}if(m.assignee&&m.assignee.login&&m.assignee.avatar_url){r=e.Models.account.get(m.assignee.login+"@"+s.name,n);r.update_data("details",m.assignee)}}})},__init__:(function l(o,m){this.$super(o,m);this.path=this.ref;this.href_id=this.id.replace("/",":");var n=this.path.split("/");this.details={name:n[1],user:{login:n[0]}}}),update_data:(function a(n,o,p){this.$super(n,o,p);switch(n){case"details":var m=e.Models.account.get(this.details.user.login+"@"+this.provider.name,this.controller);if(o.user){m.update_data("details",o.user)}break;case"forks":e.Models.repository.save_many(o,this.provider,this.controller);break;case"stars":case"contributors":e.Models.account.save_many(o,this.provider,this.controller);break;case"activity":e.Models.base.save_many_from_events(o,this.provider,this.controller);break;case"issues":e.Models.repository.save_many_from_issues(o,this.provider,this.controller)}}),sort_and_filter_forks:(function k(m,q){var o=this.list_page_status.forks.__global__,n=this.$class.sort_and_filter_helpers.forks,p=q||this.forks[o.str_params];if(m.never_updated=="hide"){p=_.reject(p,n.filter_never_updated)}p=_.sortBy(p,n.sort_field[m.sort]);if(m.sort!="oldest"){p.reverse()}return p}),sort_and_filter_activity:(function g(m,p){var n=this.list_page_status.activity.__global__,o=p||this.activity[n.str_params];return this.sort_and_filter_events(m,o)}),manage_global_for_issues:(function j(){var m=this.list_page_status.issues.__global__;m.all=false}),sort_and_filter_issues:(function b(m,q){var o=this.list_page_status.issues.__global__,n=this.$class.sort_and_filter_helpers.issues,p=q||this.issues[o.str_params];p=_.filter(p,n.filter_state,m.state);if(q||m.sort!=o.params.sort){p=_.sortBy(p,n.sort_field[m.sort]);if(m.direction=="desc"){p.reverse()}}else{if(m.direction!=o.params.direction){p.reverse();o.params.direction=m.direction}}return p}),can_have_issues:(function i(){return(this.details&&this.details.has_issues)})})})(Reposio);(function(r){var aC=(function P(aE){this.provider=aE});aC.prototype.format=(function w(aF,aG){if(aF.type&&this[aF.type]){var aE=this[aF.type](aF,aG);if(!aE){aE=this.base_format(aF,aG,"<em>("+aF.type.replace("Event","").toLowerCase()+")</em>")}return{event:aF,source:aG,provider:this,html:aE,day:this.provider.controller.display.format_date(aF.created_at)}}return null});aC.prototype.format_actor=(function aB(aG,aH,aF){var aE='<a class="account-link'+(aF?" main-link":"")+'" href="#account_home!account='+aG.login+"@"+aH.provider.name+'">';if(aG.avatar_url){aE+='<img class="avatar-small" src="img/default-avatar.png" data-original="'+aG.avatar_url+'" />'}aE+=aG.login;aE+="</a>";return aE});aC.prototype.format_repo=(function C(aI,aH,aJ,aF,aG){var aK=aI.full_name.split("/"),aE;aE='<a class="repo-link'+(aF?" main-link":"")+'" href="#repository_home!repository='+aI.full_name.replace("/",":")+"@"+aJ.provider.name+'">'+aK[1]+"</a>";if(aG||aH.login!=aK[0]&&(aJ.$class.model_name!="account"||aJ.username!=aK[0])){aE+=" by "+this.format_actor({login:aK[0]},aJ)}return aE});aC.prototype.base_format=(function B(aI,aJ,aG,aL,aK,aF){var aE,aH;aE='<p class="indicator">'+this.provider.controller.display.format_date(aI.created_at,"show-time",null,"time-only")+"</p>";if(!aK&&aI.repository&&aI.repository.full_name){aK=this.format_repo(aI.repository,aI.actor,aJ,"main")}aH=this.format_actor(aI.actor,aJ,"main")+" "+aG;if(aK){aH+=" "+aK}aE+='<div class="event-main">'+aH+"</div>";if(aF){aE+=this.format_external_link(aF)}if(aL){aE+='<p class="ui-li-desc">'+aL+"</p>"}return aE});aC.prototype.markdown_event_more=(function v(aE){if(!aE){return""}result='<div class="markup">';result+=marked(aE,{sanitize:true,breaks:true,smartLists:true});result+="</div>";return result});aC.prototype.trigger_text=(function p(aF,aE){if(aE){return'<a href="#" class="collapsible-trigger">'+aF+"</a>"}else{return aF}});aC.prototype.more=(function ai(aE){return aE});aC.prototype.description_fetcher=(function az(aG,aH,aE){var aI,aF;if(!aE){aE=aG.repository}if(aE.full_name&&(!aH.path||aE.full_name!=aH.path)){aF=r.Models.repository.get(aE.full_name+"@github",this.provider.controller);if(typeof(aE.description)!="undefined"){aF.update_data("details",aE)}aI="Description: ";if(aF.details&&aF.details.description){aI+="<strong>"+this.provider.controller.display.escape_html(aF.details.description)+"</strong>"}else{if(aF.details_fetched){aI+="<em>no description</em>"}else{aI+='<a href="#" class="fetch-desc-trigger" data-repository="'+aF.id+'">click to fetch</a>'}}}return aI});aC.prototype.format_external_link=(function h(aE){var aF='<a class="ui-li-link-alt ui-btn ui-btn-icon-notext ui-btn-up-c" data-theme="c" href="'+aE+'" target="_blank">';aF+='<span class="ui-btn ui-btn-icon-notext">';aF+='<span class="ui-btn-inner">';aF+='<span class="ui-icon ui-icon-arrow-r">&nbsp;</span>';aF+="</span>";aF+="</span>";aF+="</a>";return aF});aC.prototype.CommitCommentEvent=(function e(aF,aG){var aE=this.trigger_text("commented",aF.comment.body)+" a commit on";return this.base_format(aF,aG,aE,null,null,aF.comment.html_url)});aC.prototype.more_CommitCommentEvent=(function t(aE,aF){return this.more(this.markdown_event_more(aE.comment.body))});aC.prototype.CreateEvent=(function d(aG,aH){var aE="created",aI,aF;switch(aG.ref_type){case"branch":aE+=" a branch on";aI="Branch: <strong>"+aG.ref+"</strong>";aF="https://github.com/"+aG.repository.full_name+"/tree/"+aG.ref;break;case"repository":if(aG.description){aI="Description: <strong>"+aG.description+"</strong>"}aF="https://github.com/"+aG.repository.full_name;break;case"tag":aE+=" a tag on";aI="Tag: <strong>"+aG.ref+"</strong>";aF="https://github.com/"+aG.repository.full_name+"/tree/"+aG.ref;break}return this.base_format(aG,aH,aE,aI,null,aF)});aC.prototype.DeleteEvent=(function ae(aF,aG){var aE="deleted",aH;switch(aF.ref_type){case"branch":aE+=" a branch on";aH="Branch: <strong>"+aF.ref+"</strong>";break;case"tag":aH="Tag: <strong>"+aF.ref+"</strong>";break}return this.base_format(aF,aG,aE,aH)});aC.prototype.DownloadEvent=(function X(aE,aF){});aC.prototype.FollowEvent=(function an(aE,aF){var aG=this.format_actor(aE.target,aF);return this.base_format(aE,aF,"started following",null,aG)});aC.prototype.ForkEvent=(function aA(aF,aG){var aE=this.trigger_text("forked",aF.forkee),aH=this.description_fetcher(aF,aG,aF.forkee);return this.base_format(aF,aG,aE,aH)});aC.prototype.more_ForkEvent=(function ar(aE,aF){return this.more("<p>Fork: "+this.format_repo(aE.forkee,aE.actor,aF,null,true)+"</p>")});aC.prototype.ForkApplyEvent=(function ab(aE,aF){return this.base_format(aE,aF,"applied the fork queue to")});aC.prototype.GistEvent=(function at(aF,aH){var aG=aF.action,aE,aI;if(!aG.match(/d$/)){if(!aG.match(/e$/)){aG+="e"}aG+="d"}aE=aG+" a gist";if(aF.gist.description){aI="Description: <strong>"+aF.gist.description+"</strong>"}return this.base_format(aF,aH,aE,aI,null,aF.gist.html_url)});aC.prototype.GollumEvent=(function L(aG,aH){var aI=this.format_repo(aG.repository,aG.actor,aH),aE=this.trigger_text("edited",true)+" the "+aI+" wiki",aF="https://github.com/"+aG.repository.full_name+"/wiki";return this.base_format(aG,aH,aE,null," ",aF)});aC.prototype.more_GollumEvent=(function o(aG,aI){var aF='<ul data-role="listview" data-theme="d">';for(var aE=0;aE<aG.pages.length;aE++){var aH=aG.pages[aE];aF+="<li>";aF+="<em>"+aH.title+"</em>  <strong>"+aH.action+"</strong>";aF+="</li>"}aF+="</ul>";return this.more(aF)});aC.prototype.IssueCommentEvent=(function D(aG,aH){var aE,aI=(aG.is_pull_request?"Pull request":"Issue")+" <strong>#"+aG.issue.number+" - "+aG.issue.title+"</strong>",aF;if(aG.action=="created"){aE=this.trigger_text("commented",aG.comment.body);aE+=" "+(aG.is_pull_request?"a pull request":"an issue")+" on"}else{aE=aG.action+" a ";aE+=this.trigger_text("comment",aG.action!="deleted"&&aG.comment.body);aE+=" on an issue on"}if(aG.comment.html_url){aF=aG.comment.html_url}else{if(aG.issue.html_url&&aG.comment.id){aF=aG.issue.html_url+"#issuecomment-"+aG.comment.id}}return this.base_format(aG,aH,aE,aI,null,aF)});aC.prototype.more_IssueCommentEvent=(function u(aE,aF){return this.more(this.markdown_event_more(aE.comment.body))});aC.prototype.IssuesEvent=(function am(aF,aG){var aE=aF.action+" an "+this.trigger_text("issue",aF.issue.body)+" on",aH="Issue <strong>#"+aF.issue.number+" - "+aF.issue.title+"</strong>";return this.base_format(aF,aG,aE,aH,null,aF.issue.html_url)});aC.prototype.more_IssuesEvent=(function A(aE,aF){return this.more(this.markdown_event_more(aE.issue.body))});aC.prototype.MemberEvent=(function a(aF,aG){var aE=aF.action+" ",aH;aE+=this.format_actor(aF.member,aG);aE+=" as a member "+(aF.action=="added"?"to":"from");aH=this.description_fetcher(aF,aG);return this.base_format(aF,aG,aE,aH)});aC.prototype.PublicEvent=(function i(aE,aF){return this.base_format(aE,aF,"open sourced")});aC.prototype.PullRequestEvent=(function m(aF,aG){var aE=aF.action+" a "+this.trigger_text("pull request",aF.pull_request.body)+" on",aH="Pull request <strong>#"+aF.pull_request.number+" - "+aF.pull_request.title+"</strong>";return this.base_format(aF,aG,aE,aH,null,aF.pull_request.html_url)});aC.prototype.more_PullRequestEvent=(function J(aE,aF){return this.more(this.markdown_event_more(aE.pull_request.body))});aC.prototype.PullRequestReviewCommentEvent=(function ad(aF,aG){var aE=this.trigger_text("commented",aF.comment.body)+" a pull request on",aH;if(aF.pull_request.number){aH="Pull request <strong>#"+aF.pull_request.number+"</strong>"}return this.base_format(aF,aG,aE,aH,null,aF.comment.html_url)});aC.prototype.more_PullRequestReviewCommentEvent=(function Z(aE,aF){return this.more(this.markdown_event_more(aE.comment.body))});aC.prototype.PushEvent=(function ao(aG,aH){var aE="pushed "+(aG.size?this.trigger_text(aG.size+" commit"+(aG.size>1?"s":""),true):"")+" to",aI,aF;if(aG.ref&&aG.ref.indexOf("refs/heads/")===0){aI="Branch: <strong>"+aG.ref.replace("refs/heads/","")+"</strong>"}if(aG.size==1){aF="https://github.com/"+aG.repository.full_name+"/commit/"+aG.commits[0].sha}else{if(aG.before&&aG.head){aF="https://github.com/"+aG.repository.full_name+"/compare/"+aG.before+"..."+aG.head}}return this.base_format(aG,aH,aE,aI,null,aF)});aC.prototype.more_PushEvent=(function ac(aJ,aK){var aI='<ul data-role="listview" data-theme="d">';for(var aH=0;aH<aJ.commits.length;aH++){var aL=aJ.commits[aH],aE=aL.message.split("\n"),aG=aE.shift(),aF=aE.length?"<br />"+aE.join("<br />"):"";aI+="<li"+(aF.length?' class="with-extension"':"")+">";aI+="<strong>"+aL.author.name+"</strong>";aI+="  <em>";aI+=aG;if(aF){aI+='<span class="extension">'+aF+"</span>"}aI+="</em>";aI+="</li>"}aI+="</ul>";return this.more(aI)});aC.prototype.TeamAddEvent=(function aw(aE,aF){});aC.prototype.WatchEvent=(function n(aF,aG){var aE=aF.action+" watching",aH=this.description_fetcher(aF,aG);return this.base_format(aF,aG,aE,aH)});var ah=(function j(aE){this.conf=(providers_config?providers_config.github||{}:{});this.name="github";if(this.conf.auth=="oauth"&&this.conf.token){this.set_token(this.conf.token)}Gh3.Helper.cache=false;this.controller=aE;this.formatter=new aC(this)});ah.prototype.set_token=(function ap(aE){this.conf.token=aE;if(aE){Gh3.Helper.headers.Authorization="token "+aE}else{if(Gh3.Helper.headers.Authorization){delete Gh3.Helper.headers.Authorization}}});ah.prototype.login=(function K(aI,aF,aH){if(!aI||aI.provider!=this.name||!aI.token){return false}this.set_token(aI.token);var aG=this,aE=new Gh3.CurrentUser();aE.fetch(function(aK,aJ){if(aK||!aJ){if(aH){aH(aK)}}else{if(aF){aF(aG.map_account(aJ))}}});return true});ah.prototype.logout=(function c(){this.set_token()});ah.prototype.can_login=(function H(){return !!(this.conf.auth=="oauth"&&this.conf.client_id&&this.conf.token_script)});ah.prototype.login_url=(function z(aE){this.conf.last_state=Math.random();var aF="https://github.com/login/oauth/authorize?scope=public_repo,user:follow&client_id=";aF+=this.conf.client_id;aF+="&redirect_uri="+escape(aE);aF+="&state="+this.conf.last_state;return aF});ah.prototype.check_login=(function ak(aH,aF,aI){var aG=this,aE=this.conf.last_state;delete this.conf.last_state;if(aH.error||!aH.code||!aH.state||aH.state!=aE){return aI()}$.ajax({url:this.conf.token_script+"?code="+escape(aH.code),dataType:"json"}).done(function(aK){if(aK.error||!aK.token){return aI()}aG.set_token(aK.token);var aJ=new Gh3.CurrentUser();aJ.fetch(function(aM,aL){if(!aM&&aL){aF(aG.map_account(aL),{token:aK.token})}else{aI()}})}).fail(aI)});ah.prototype.get_user=(function M(aE){return new Gh3.User(aE)});ah.prototype.get_repo=(function g(aF){var aE=aF.split("/");return new Gh3.Repository(aE[1],this.get_user(aE[0]))});ah.prototype.map_type={accounts:"account",repositories:"repository",events:"event"};ah.prototype.decorate_collback=(function N(aH,aE,aF){var aG=this;return function(aJ,aK){var aI;if(!aJ){switch(aF){case"field":aI=aK[aE];break;case"repositories":case"accounts":case"events":aI=_.map(aK[aE].getAll(),aG["map_"+aG.map_type[aF]],aG);break;default:aI=aK[aE].getAll()}}aH(aJ,aJ?null:aI)}});ah.prototype.map=(function aj(aI,aG){var aF={},aE;if(aI){for(var aH=0;aH<aG._.length;aH++){aE=aG._[aH];if(typeof(aI[aE])=="undefined"){continue}aF[aG[aE]||aE]=aI[aE]}}return aF});ah.prototype.account_mapping={_:["login","type","avatar_url","name","created_at","company","location","email","blog","public_repos","followers_count","following_count","contributions"],blog:"site",public_repos:"repos_count"};ah.prototype.map_account=(function l(aF){var aE={};if(aF){aE=this.map(aF,this.account_mapping)}return aE});ah.prototype.repository_mapping={_:["name","full_name","description","pushed_at","created_at","updated_at","forks_count","fork","watchers_count","language","open_issues_count","has_issues"],fork:"is_fork"};ah.prototype.map_repository=(function b(aF){var aE={};if(aF){aE=this.map(aF,this.repository_mapping);if(aF.fork&&aF.parent){aE.parent=this.map_repository(aF.parent)}if(aF.user){aE.user=this.map_account(aF.user)}}return aE});ah.prototype.map_event=(function E(aI){var aE={},aK;if(aI){aK=aI.payload||{};switch(aI.type){case"CommitCommentEvent":aE.comment=this.map(aK.comment,{_:["body","html_url"]});break;case"CreateEvent":aE=this.map(aK,{_:["ref_type","ref","description"]});break;case"DeleteEvent":aE=this.map(aK,{_:["ref_type","ref"]});break;case"FollowEvent":if(aK.target&&aK.target.login){aE.target={login:aK.target.login}}break;case"ForkEvent":if(aK.forkee&&isNaN(aK.forkee)){aE.forkee=this.map_repository(aK.forkee)}break;case"GistEvent":aE=this.map(aK,{_:["action"]});aE.gist=this.map(aK.gist,{_:["description","html_url"]});break;case"GollumEvent":aE.pages=[];if(aK.pages&&aK.pages.length){for(var aL=0;aL<aK.pages.length;aL++){aE.pages.push(this.map(aK.pages[aL],{_:["title","action"]}))}}break;case"IssueCommentEvent":aE=this.map(aK,{_:["action"]});aE.issue=this.map(aK.issue,{_:["number","title","html_url"]});aE.issue.is_pull_request=(aK.issue&&aK.issue.pull_request&&aK.issue.pull_request.html_url);aE.comment=this.map(aK.comment,{_:["body","html_url","id"]});break;case"IssuesEvent":aE=this.map(aK,{_:["action"]});aE.issue=this.map(aK.issue,{_:["number","title","body","html_url"]});break;case"MemberEvent":aE=this.map(aK,{_:["action"]});if(aK.member&&aK.member.login){aE.member={login:aK.member.login}}break;case"PullRequestEvent":aE=this.map(aK,{_:["action","number"]});aE.pull_request=this.map(aK.pull_request,{_:["body","title","html_url"]});if(aE.number){aE.pull_request.number=aE.number;delete aE.number}break;case"PullRequestReviewCommentEvent":var aF;aE.pull_request={};if(aK.comment._links&&aK.comment._links.pull_request&&aK.comment._links.pull_request.href){aF=aK.comment._links.pull_request.href;aF=aF.match(/(\d+)\/?$/);aF=aF?aF[1]:null;if(aF){aE.pull_request.number=aF}}aE.comment=this.map(aK.comment,{_:["body","html_url"]});if(!aE.comment.html_url&&aK.comment&&aK.comment._links&&aK.comment._links.html){aE.comment.html_url=aK.comment._links.html.href}break;case"PushEvent":var aM,aG;aE=this.map(aK,{_:["size","ref","before","head"]});aE.commits=[];if(aE.size){if(aK.commits){aG=aK.commits;aM=false}else{if(aK.shas){aG=aK.shas;aM=true}}if(!aG.length){aE.size=0}else{for(var aJ=0;aJ<aG.length;aJ++){var aH=aG[aJ];aE.commits.push({sha:aM?aH[0]:aH.sha,message:aM?aH[2]:aH.message,author:{name:aM?aH[3]:aH.author.name}})}}}break;case"WatchEvent":aE=this.map(aK,{_:["action"]});break}aE.type=aI.type;aE.created_at=aI.created_at;aE.actor=this.map(aI.actor,{_:["login","avatar_url"]});aE.repository=this.map(aI.repository||aI.repo,{_:["name","full_name"]});if(aE.repository&&(aE.repository.full_name||aE.repository.name)){if(!aE.repository.full_name&&aE.repository.name){aE.repository.full_name=aE.repository.name;aE.repository.name=null}if(aE.type=="CreateEvent"&&aE.ref_type=="repository"&&aE.description){aE.repository.description=aE.description}}}return aE});ah.prototype.get_account_details=(function k(aI,aH,aG){var aF=this;function aE(aJ,aK){if(!aJ&&aK){aK=aF.map_account(aK)}return aH(aJ,aK)}this.get_user(aI).fetch(aE,aG)});ah.prototype.get_account_repositories=(function av(aG,aF,aE){this.get_user(aG).repositories.fetch(this.decorate_collback(aF,"repositories","repositories"),aE)});ah.prototype.get_account_stars=(function au(aG,aF,aE){this.get_user(aG).starred.fetch(this.decorate_collback(aF,"starred","repositories"),aE)});ah.prototype.get_account_own_events=(function s(aG,aF,aE){this.get_user(aG).events.fetch(this.decorate_collback(aF,"events","events"),aE)});ah.prototype.get_account_received_events=(function x(aG,aF,aE){this.get_user(aG).received_events.fetch(this.decorate_collback(aF,"received_events","events"),aE)});ah.prototype.get_account_followers=(function aa(aG,aF,aE){this.get_user(aG).followers.fetch(this.decorate_collback(aF,"followers","accounts"),aE)});ah.prototype.get_account_following=(function q(aG,aF,aE){this.get_user(aG).following.fetch(this.decorate_collback(aF,"following","accounts"),aE)});ah.prototype.get_account_org_members=(function f(aG,aF,aE){this.get_user(aG).members.fetch(this.decorate_collback(aF,"members","accounts"),aE)});ah.prototype.get_account_orgs=(function aD(aG,aF,aE){this.get_user(aG).orgs.fetch(this.decorate_collback(aF,"orgs","accounts"),aE)});ah.prototype.get_repository_details=(function y(aF,aI,aH){var aG=this;function aE(aJ,aK){if(!aJ&&aK){aK=aG.map_repository(aK)}return aI(aJ,aK)}this.get_repo(aF).fetch(aE,aH)});ah.prototype.get_repository_readme=(function G(aE,aG,aF){this.get_repo(aE).fetchReadme(this.decorate_collback(aG,"readme","field"),aF)});ah.prototype.get_repository_activity=(function S(aE,aG,aF){this.get_repo(aE).events.fetch(this.decorate_collback(aG,"events","events"),aF)});ah.prototype.get_repository_forks=(function I(aE,aG,aF){this.get_repo(aE).forks.fetch(this.decorate_collback(aG,"forks","repositories"),aF)});ah.prototype.get_repository_stars=(function O(aE,aG,aF){this.get_repo(aE).stargazers.fetch(this.decorate_collback(aG,"stargazers","accounts"),aF)});ah.prototype.get_repository_contributors=(function ay(aE,aG,aF){this.get_repo(aE).contributors.fetch(this.decorate_collback(aG,"contributors","accounts"),aF)});ah.prototype.get_repository_issues=(function Q(aE,aG,aF){this.get_repo(aE).issues.fetch(this.decorate_collback(aG,"issues","issues"),aF)});ah.prototype._check_flag=(function ag(aH,aE,aI,aG){var aF=new Gh3[aE](aH);aF.check(aI,aG)});ah.prototype._set_flag=(function U(aH,aE,aI,aG){var aF=new Gh3[aE](aH);aF.set(function(){aI(true)},aG)});ah.prototype._unset_flag=(function T(aH,aE,aI,aG){var aF=new Gh3[aE](aH);aF.unset(function(){aI(false)},aG)});ah.prototype.check_star=(function al(aF,aG,aE){this._check_flag(this.get_repo(aF),"Star",aG,aE)});ah.prototype.star=(function R(aF,aG,aE){this._set_flag(this.get_repo(aF),"Star",aG,aE)});ah.prototype.unstar=(function F(aF,aG,aE){this._unset_flag(this.get_repo(aF),"Star",aG,aE)});ah.prototype.check_watch=(function ax(aF,aG,aE){this._check_flag(this.get_repo(aF),"Watching",aG,aE)});ah.prototype.watch=(function Y(aF,aG,aE){this._set_flag(this.get_repo(aF),"Watching",aG,aE)});ah.prototype.unwatch=(function V(aF,aG,aE){this._unset_flag(this.get_repo(aF),"Watching",aG,aE)});ah.prototype.check_follow=(function af(aG,aF,aE){this._check_flag(this.get_user(aG),"Following",aF,aE)});ah.prototype.follow=(function W(aG,aF,aE){this._set_flag(this.get_user(aG),"Following",aF,aE)});ah.prototype.unfollow=(function aq(aG,aF,aE){this._unset_flag(this.get_user(aG),"Following",aF,aE)});if(!r.Providers){r.Providers={}}r.Providers.github=ah})(Reposio);(function(D){D.View=Class.$extend({__classvars__:{model:null,view_name:null,views:{},views_cache:{},get:(function C(J,K){if(!this.views_cache[J.id]){this.views_cache[J.id]=new this.views[J.id](J,K)}return this.views_cache[J.id]})},__init__:(function A(J,K){this.page=J;this.display=K;this.nodes_cache=null;this.container=null;this.init_events();this.accept_options=this.__classvars__.accept_options}),init_events:(function H(){}),cache_nodes:(function p(){this.container=this.page.nodes.content;this.nodes_cache={}}),nodes:(function l(){if(!this.nodes_cache){this.cache_nodes()}return this.nodes_cache}),reset:(function x(J){if(!this.page.node.data("mobile-page")){this.page.node.page()}}),update:(function n(K,J){})});D.View.views._list=D.View.$extend({__init__:(function y(J,K){this.$super(J,K);this.options={}}),cache_nodes:(function m(){this.$super();this.nodes_cache.list=this.container.children("ul");this.nodes_cache.load_buttons=this.container.children(".load-buttons");this.nodes_cache.load_more_button=this.nodes_cache.load_buttons.find("a.list-more-button");this.nodes_cache.load_all_button=this.nodes_cache.load_buttons.find("a.list-all-button")}),reset:(function o(K){this.$super();var J=this.nodes();this.empty_list_node();J.load_buttons.addClass("ui-hidden");J.load_more_button.addClass("ui-disabled");J.load_all_button.addClass("ui-disabled")}),empty_list_node:(function f(){var J=this.nodes(),K=J.list[0];while(K.firstChild){K.removeChild(K.firstChild)}}),update:(function g(M,L){var K=this.nodes(),J=this.get_items(M,this.get_data(M));this.empty_list_node();if(J.length){J[0].className+=" ui-first-child";this.update_list_node(J)}this.update_load_buttons(M);this.refresh_widgets()}),update_list_node:(function r(L){var K=this.nodes(),N=K.list[0],J=N.lastChild;if(L.length){L[L.length-1].className+=" ui-last-child";if(J){J.className=J.className.replace("ui-last-child","")}for(var M=0;M<L.length;M++){N.appendChild(L[M])}}}),complete:(function i(M,L){var K=this.nodes(),J=this.get_items(M,this.prepare_data(M,L));this.update_list_node(J);this.refresh_widgets()}),update_load_buttons:(function a(M){var J=this.nodes();if(!J.load_buttons.length){return}var K=$.param(this.options),L=M.list_page_status[this.$class.data_field][K];if(!M.list_page_status[this.$class.data_field].__global__.all&&(L?L.maybe_more:true)){this.enable_load_buttons()}else{this.hide_load_buttons()}}),toggle_load_buttons_enabled:(function d(K){var J=this.nodes();if(!J.load_buttons.length){return}J.load_more_button.toggleClass("ui-disabled",!K);J.load_all_button.toggleClass("ui-disabled",!K);if(K){this.show_load_buttons()}}),disable_load_buttons:(function w(){this.toggle_load_buttons_enabled(false)}),enable_load_buttons:(function v(){this.toggle_load_buttons_enabled(true)}),toggle_load_buttons_visible:(function G(K){var J=this.nodes();if(!J.load_buttons.length){return}J.load_buttons.toggleClass("ui-hidden",!K);if(!K){this.disable_load_buttons()}}),hide_load_buttons:(function q(){this.toggle_load_buttons_visible(false)}),show_load_buttons:(function B(){this.toggle_load_buttons_visible(true)}),refresh_widgets:(function I(){this.display.load_visible_images()}),get_data:(function u(J){return J.get_list(this.$class.data_field,this.options)}),prepare_data:(function k(K,J){return K.get_list(this.$class.data_field,this.options,J)}),get_items:(function z(K,J){}),options_form:(function e(){var J=this,M="#"+this.$class.view_name+"_options";if(!this._options_form){this._options_form=$(M);if(!this._options_form.length){var L=J.display.get_template(J.$class.view_name+"_options",true),K=$(L);this._options_form=K.find(M);setTimeout(function(){K.collapsible();$.mobile.checkboxradio.prototype.enhanceWithin(J._options_form,true);$.mobile.button.prototype.enhanceWithin(J._options_form,true);$.mobile.selectmenu.prototype.enhanceWithin(J._options_form,true);$.mobile.controlgroup.prototype.enhanceWithin(J._options_form,true);J.page.nodes.content.prepend(L)},500)}}return this._options_form}),get_options_from_form:(function h(){var Q=this.options_form().serializeArray(),J,K={},R=[],N={},M={},L=this.$class.view_name+"_options_";for(var P=0;P<Q.length;P++){J=Q[P].name.replace(L,"");if(J=="submit"){continue}if(!_.contains(R,J)){R.push(J);M[J]=$("#"+Q[P].name).is("select[multiple=multiple]")}if(M[J]){if(!K[J]){K[J]=[]}K[J].push(Q[P].value)}else{K[J]=Q[P].value}}R.sort();for(var O=0;O<R.length;O++){N[R[O]]=K[R[O]]}return N}),manage_options:(function c(J){var K,L,M={},N=this.$class.view_name+"_options_";this.options_form().find("[type=reset]").click();K=$.extend({},this.$class.default_options);if(J){for(L in J){if(typeof(K[L])!=="undefined"){K[L]=decodeURIComponent(decodeURIComponent(J[L]))}}}for(L in K){M[N+L]=K[L]}this.options_form().unserializeForm($.param(M));this.options=K;return this.options}),init_events:(function E(){var L=this,O=(function M(T){T.preventDefault();T.stopPropagation();var R=L.get_options_from_form(),Q={},U="#"+L.$class.view_name;U+="!"+L.$class.model+"="+L.display.controller[L.$class.model].id.replace("/",":");for(var S in R){Q[S]=encodeURIComponent(R[S])}U+="&"+$.param(Q);window.location.hash=U;return false}),P=(function K(Q){Q.preventDefault();Q.stopPropagation();if(!$(this).hasClass("ui-disabled")){var R=L.display.pages[$.mobile.activePage.data("url")];$.mobile.loading("show");L.disable_load_buttons();L.display.ask_for_more(R)}return false}),J=(function N(Q){Q.preventDefault();Q.stopPropagation();if(!$(this).hasClass("ui-disabled")){var R=L.display.pages[$.mobile.activePage.data("url")];$.mobile.loading("show");L.disable_load_buttons();L.display.ask_for_all(R)}return false});$(document).on("submit","#"+this.__classvars__.view_name+"_options",O);$(document).on("click","#"+this.__classvars__.view_name+"_load_buttons .list-more-button",P);$(document).on("click","#"+this.__classvars__.view_name+"_load_buttons .list-all-button",J)})});D.View.views._accounts=D.View.views._list.$extend({get_items:(function s(K,J){return this.display.create_accounts_list_items(J,K.provider)})});D.View.views._repositories=D.View.views._list.$extend({get_items:(function j(K,J){return this.display.create_repositories_list_items(J,K.provider)})});D.View.views._events=D.View.views._list.$extend({get_items:(function b(N,L){var J=[];for(var K=0;K<L.length;K++){var M=N.provider.formatter.format(L[K],N);if(M){J.push(M)}}return this.display.create_events_list_items(J)}),refresh_widgets:(function t(){this.display.render_widgets(this.nodes().list);this.display.load_visible_images()})});D.View.views._issues=D.View.views._list.$extend({get_items:(function F(K,J){return this.display.create_issues_list_items(J)})})})(Reposio);(function(d){d.View.views.account_home=d.View.$extend({__classvars__:{model:"account",view_name:"account_home"},cache_nodes:(function f(){this.$super();var h=this.nodes_cache;var g=this.container.find(".account-main");h.avatar=g.children("img");h.provider=g.children("p.provider");h.name=g.children("p.account-name");var i=g.children("h3");h.username=i.children("strong");h.organization=i.children("span");h.infos=this.container.find(".account-details");h.infos_loading=h.infos.children(".failover");h.infos_items=h.infos.children(".ui-li-has-icon");h.company_container=h.infos.children("li.account-company");h.company=h.company_container.children(":last");h.location_container=h.infos.children("li.account-location");h.location=h.location_container.children(":last");h.email_container=h.infos.children("li.account-email");h.email=h.email_container.children(":last");h.created_at_container=h.infos.children("li.account-created_at");h.created_at=h.created_at_container.children(":last");h.site_container=h.infos.children("li.account-site");h.site=h.site_container.find("a");h.orgs_container=this.container.find(".account-orgs")}),reset:(function c(h){this.$super();var g=this.nodes(),i=!!(h&&h.details);g.username.html(h.username||"loading...");g.name.html((i&&h.details.name)||"");g.avatar.attr("src","img/default-avatar.png");if(i&&h.details.avatar_url){g.avatar.attr("src",h.details.avatar_url)}if(i){this._update_org(h,g);this._update_details(h,g);if(!h.details.created_at){g.infos_loading.show()}}else{g.organization.hide();g.orgs_container.show();g.infos_items.hide();g.infos_loading.show()}if(!i||!h.orgs||!h.orgs.length){this.display.clear_listview(g.orgs_container,"Loading...",true)}}),_update_details:(function e(i,g){g.created_at.html(i.details.created_at?this.display.format_date(i.details.created_at):"");g.created_at_container.toggle(!!i.details.created_at);g.company.html(i.details.company||"");g.company_container.toggle(!!i.details.company);g.location.html(i.details.location||"");g.location_container.toggle(!!i.details.location);var h=!!(i.details.email&&i.details.email.indexOf("@")!==-1);g.email.html(h?i.details.email:"");g.email_container.toggle(h);g.site.html(i.details.site||"");g.site_container.toggle(!!i.details.site);g.site.attr("href",i.details.site||"/")}),_update_org:(function b(i,g){var h=i.is_organization();g.orgs_container.toggle(!h);g.organization.toggle(h);return h}),update:(function a(m,i){var h=this.nodes(),n=this;var l=this._update_org(m,h);h.username.html(m.username);h.provider.html(m.provider.name);h.avatar.attr("src",m.details.avatar_url);h.name.html(m.details.name||"");h.name.toggle(!!m.details.name);this._update_details(m,h);h.infos_loading.hide();if(!l){var k=(function j(p){m.update_data("orgs",p);if(m.orgs[""]&&m.orgs[""].length){n.display.clear_listview(h.orgs_container);h.orgs_container.append(n.display.create_accounts_list_items(m.orgs[""],m.provider));h.orgs_container.listview("refresh");n.display.load_visible_images()}else{n.display.clear_listview(h.orgs_container,"No organizations",true);h.orgs_container.fadeOut()}});var o=(function g(p){n.display.clear_listview(h.orgs_container,"Failed to load organizations",true)});if(typeof m.orgs[""]==="undefined"||i){m.fetch("orgs",k,o)}else{k(m.orgs[""])}}n.container.find("ul[data-role=listview]").listview("refresh")})});d.View.views.account_repositories=d.View.views._repositories.$extend({__classvars__:{model:"account",view_name:"account_repositories",data_field:"repositories",accept_options:true,default_options:{direction:"desc",forks:"all",language:null,sort:"pushed",type:"all"}}});d.View.views.account_stars=d.View.views._repositories.$extend({__classvars__:{model:"account",view_name:"account_stars",data_field:"stars",accept_options:true,default_options:{direction:"desc",forks:"all",language:null,sort:"created"}}});d.View.views.account_followers=d.View.views._accounts.$extend({__classvars__:{model:"account",view_name:"account_followers",data_field:"followers"}});d.View.views.account_following=d.View.views._accounts.$extend({__classvars__:{model:"account",view_name:"account_following",data_field:"following"}});d.View.views.account_members=d.View.views._accounts.$extend({__classvars__:{model:"account",view_name:"account_members",data_field:"org_members"}});d.View.views.account_activity=d.View.views._events.$extend({__classvars__:{model:"account",view_name:"account_activity",data_field:"own_events",accept_options:true,default_options:{mode:"display",type:null}}});d.View.views.account_events=d.View.views._events.$extend({__classvars__:{model:"account",view_name:"account_events",data_field:"received_events",accept_options:true,default_options:{mode:"display",type:null}}})})(Reposio);(function(d){d.View.views.repository_home=d.View.$extend({__classvars__:{model:"repository",view_name:"repository_home"},cache_nodes:(function c(){this.$super();var j=this.nodes_cache;var i=this.container.children(".repo-main");j.provider=i.children("p.provider");var k=i.children(".repo-path");j.name=k.children("strong.repo-name");j.owner_container=k.children("span.repo-owner-container");j.owner=j.owner_container.children("span.repo-owner");j.fork_container=i.children("div.repo-fork");var l=i.find(".repo-links");j.fork_name=l.children("span.repo-fork-name");j.fork_owner=l.find("span strong.repo-fork-owner");j.last_push_container=i.children("p.repo-last-push");j.last_push=j.last_push_container.children("span");j.desc_readme=this.container.children("div.ui-collapsible-set");j.description_container=j.desc_readme.children("div.repo-desc-container");j.description=j.description_container.find(".repo-desc");j.readme_container=j.desc_readme.children("div.repo-readme-container");j.readme=j.readme_container.find(".repo-readme")}),reset:(function h(j){this.$super();var i=this.nodes(),k=!!(j&&j.details);i.name.html((k&&j.details.name)||"loading...");if(k&&j.details.user){this._update_owner(j,i);i.owner_container.show()}else{i.owner_container.hide()}if(k&&j.details.is_fork&&j.details.parent){this._update_fork(j,i);i.fork_container.show()}else{i.fork_container.hide()}if(k&&j.details.pushed_at){this._update_last_push(j,i);i.last_push_container.show()}else{i.last_push_container.hide()}if(k&&(j.details.description||j.readme)){i.desc_readme.show()}else{i.desc_readme.hide()}i.description.text((k&&j.details.description)||"");i.readme.html((k&&j.readme)||"<em>Loading...</em>");this.display.render_widgets(this.container)}),_update_owner:(function f(j,i){i.owner.html(this.display.account_link(j.details.user.login,j.provider.name,j.details.user.avatar_url))}),_update_fork:(function a(j,i){i.fork_name.html(this.display.repository_link(j.details.parent.full_name,j.provider.name,true));i.fork_owner.html(this.display.account_link(j.details.parent.user.login,j.provider.name,j.details.parent.user.avatar_url))}),_update_last_push:(function b(j,i){i.last_push.html(j.details.pushed_at?this.display.format_date(j.details.pushed_at,true):"never !")}),update:(function g(k,n){var i=this.nodes();i.provider.html(k.provider.name);i.name.html(k.details.name);this._update_owner(k,i);i.owner_container.show();if(k.details.is_fork){this._update_fork(k,i);i.fork_container.show()}this._update_last_push(k,i);i.last_push_container.show();i.description.text(k.details.description||"<em>No description!</em>");i.description_container.toggle(!!k.details.description);var o=(function m(p){k.update_data("readme",p);if(!k.readme&&i.readme_container.hasClass("ui-collapsible-collapsed")){i.readme_container.fadeOut()}else{i.readme.html(k.readme||"<em>No readme!</em>")}});var j=(function l(p){i.readme.html("<em>Failed to load readme!</em>")});if(k.readme===null||n){k.fetch("readme",o,j)}else{o(k.readme)}i.desc_readme.show();i.readme_container.show();this.display.render_widgets(this.container)})});d.View.views.repository_forks=d.View.views._repositories.$extend({__classvars__:{model:"repository",view_name:"repository_forks",data_field:"forks",accept_options:true,default_options:{never_updated:"show",sort:"newest"}}});d.View.views.repository_activity=d.View.views._events.$extend({__classvars__:{model:"repository",view_name:"repository_activity",data_field:"activity",accept_options:true,default_options:{mode:"display",type:null}}});d.View.views.repository_contributors=d.View.views._accounts.$extend({__classvars__:{model:"repository",view_name:"repository_contributors",data_field:"contributors"},get_items:(function e(k,l){for(var j=0;j<l.length;j++){l[j].html_prepend='<p class="ui-li-aside count ui-li-desc">'+l[j].contributions+"</p>"}return this.$super(k,l)})});d.View.views.repository_stars=d.View.views._accounts.$extend({__classvars__:{model:"repository",view_name:"repository_stars",data_field:"stars"}});d.View.views.repository_issues=d.View.views._issues.$extend({__classvars__:{model:"repository",view_name:"repository_issues",data_field:"issues",accept_options:true,default_options:{direction:"desc",sort:"created",state:"open"}}})})(Reposio);